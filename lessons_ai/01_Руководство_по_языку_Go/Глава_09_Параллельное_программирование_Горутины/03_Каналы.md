# –ö–∞–Ω–∞–ª—ã (Channels)

## üí° –ö–ª—é—á–µ–≤—ã–µ –∏–¥–µ–∏

1. **–ö–∞–Ω–∞–ª** ‚Äî —Ç–∏–ø–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∫–∞–Ω–∞–ª —Å–≤—è–∑–∏ –º–µ–∂–¥—É –≥–æ—Ä—É—Ç–∏–Ω–∞–º–∏
2. **–û—Ç–ø—Ä–∞–≤–∫–∞ `<-`** ‚Äî `ch <- value` –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ –≤ –∫–∞–Ω–∞–ª
3. **–ü–æ–ª—É—á–µ–Ω–∏–µ `<-`** ‚Äî `value := <-ch` –ø–æ–ª—É—á–∞–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ –∏–∑ –∫–∞–Ω–∞–ª–∞
4. **–ù–µ–±—É—Ñ–µ—Ä–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∫–∞–Ω–∞–ª** ‚Äî —Ç—Ä–µ–±—É–µ—Ç –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—è –∏ –ø–æ–ª—É—á–∞—Ç–µ–ª—è
5. **–ë—É—Ñ–µ—Ä–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∫–∞–Ω–∞–ª** ‚Äî –º–æ–∂–µ—Ç —Ö—Ä–∞–Ω–∏—Ç—å N —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –±–µ–∑ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏
6. **–ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞** ‚Äî –æ–ø–µ—Ä–∞—Ü–∏–∏ —Å –∫–∞–Ω–∞–ª–æ–º –±–ª–æ–∫–∏—Ä—É—é—Ç –≥–æ—Ä—É—Ç–∏–Ω—É –¥–æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è

---

## üìã –°–∏–Ω—Ç–∞–∫—Å–∏—Å

### –°–æ–∑–¥–∞–Ω–∏–µ –∫–∞–Ω–∞–ª–æ–≤

```go
// –ù–µ–±—É—Ñ–µ—Ä–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∫–∞–Ω–∞–ª
ch := make(chan Type)

// –ë—É—Ñ–µ—Ä–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∫–∞–Ω–∞–ª —Å —ë–º–∫–æ—Å—Ç—å—é N
ch := make(chan Type, N)
```

### –û–ø–µ—Ä–∞—Ü–∏–∏ —Å –∫–∞–Ω–∞–ª–∞–º–∏

```go
ch <- value     // –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –∑–Ω–∞—á–µ–Ω–∏–µ –≤ –∫–∞–Ω–∞–ª
value := <-ch   // –ø–æ–ª—É—á–∏—Ç—å –∑–Ω–∞—á–µ–Ω–∏–µ –∏–∑ –∫–∞–Ω–∞–ª–∞
value, ok := <-ch  // –ø–æ–ª—É—á–∏—Ç—å + –ø—Ä–æ–≤–µ—Ä–∏—Ç—å, –æ—Ç–∫—Ä—ã—Ç –ª–∏ –∫–∞–Ω–∞–ª

len(ch)  // –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –≤ –∫–∞–Ω–∞–ª–µ
cap(ch)  // —ë–º–∫–æ—Å—Ç—å –∫–∞–Ω–∞–ª–∞ (–¥–ª—è –±—É—Ñ–µ—Ä–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö)
```

---

## üíª –ü—Ä–∏–º–µ—Ä—ã –∫–æ–¥–∞

### –ù–µ–±—É—Ñ–µ—Ä–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∫–∞–Ω–∞–ª

```go
package main

import "fmt"

func main() {
    ch := make(chan string)  // –Ω–µ–±—É—Ñ–µ—Ä–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π
    
    // –ì–æ—Ä—É—Ç–∏–Ω–∞-–æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—å
    go func() {
        ch <- "Hello from goroutine!"
    }()
    
    // –ü–æ–ª—É—á–∞—Ç–µ–ª—å –≤ main (–±–ª–æ–∫–∏—Ä—É–µ—Ç—Å—è –¥–æ –ø–æ–ª—É—á–µ–Ω–∏—è)
    message := <-ch
    fmt.Println(message)
}
```

### –ë—É—Ñ–µ—Ä–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∫–∞–Ω–∞–ª

```go
package main

import "fmt"

func main() {
    ch := make(chan int, 3)  // –±—É—Ñ–µ—Ä –Ω–∞ 3 —ç–ª–µ–º–µ–Ω—Ç–∞
    
    // –ú–æ–∂–µ–º –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –¥–æ 3 –∑–Ω–∞—á–µ–Ω–∏–π –±–µ–∑ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏
    ch <- 1
    ch <- 2
    ch <- 3
    // ch <- 4  // ‚ö†Ô∏è –∑–∞–±–ª–æ–∫–∏—Ä—É–µ—Ç—Å—è ‚Äî –±—É—Ñ–µ—Ä –ø–æ–ª–æ–Ω
    
    fmt.Println(<-ch)  // 1
    fmt.Println(<-ch)  // 2
    fmt.Println(<-ch)  // 3
    
    fmt.Println("Capacity:", cap(ch))  // 3
    fmt.Println("Length:", len(ch))    // 0
}
```

### –î–≤—É—Å—Ç–æ—Ä–æ–Ω–Ω–∏–π –æ–±–º–µ–Ω —á–µ—Ä–µ–∑ –∫–∞–Ω–∞–ª

```go
package main

import "fmt"

func doubler(ch chan int) {
    num := <-ch       // –ø–æ–ª—É—á–∞–µ–º —á–∏—Å–ª–æ
    ch <- num * 2     // –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º –æ–±—Ä–∞—Ç–Ω–æ —É–¥–≤–æ–µ–Ω–Ω–æ–µ
}

func main() {
    ch := make(chan int)
    
    go doubler(ch)
    
    ch <- 21           // –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º
    result := <-ch     // –ø–æ–ª—É—á–∞–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç
    
    fmt.Println("Result:", result)  // 42
}
```

### –ü–µ—Ä–µ–¥–∞—á–∞ –∫–∞–Ω–∞–ª–∞ –≤ —Ñ—É–Ω–∫—Ü–∏—é

```go
package main

import "fmt"

func square(n int, ch chan int) {
    ch <- n * n
}

func main() {
    ch := make(chan int)
    
    go square(5, ch)
    go square(7, ch)
    go square(9, ch)
    
    // –ü–æ–ª—É—á–∞–µ–º 3 —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ (–ø–æ—Ä—è–¥–æ–∫ –Ω–µ –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω)
    fmt.Println(<-ch)
    fmt.Println(<-ch)
    fmt.Println(<-ch)
}
```

### –§—É–Ω–∫—Ü–∏—è, –≤–æ–∑–≤—Ä–∞—â–∞—é—â–∞—è –∫–∞–Ω–∞–ª

```go
package main

import "fmt"

func generator(nums ...int) <-chan int {
    ch := make(chan int)
    
    go func() {
        for _, n := range nums {
            ch <- n
        }
        close(ch)
    }()
    
    return ch
}

func main() {
    ch := generator(1, 2, 3, 4, 5)
    
    for num := range ch {
        fmt.Println(num)
    }
}
```

### –ö–∞–Ω–∞–ª—ã —Ä–∞–∑–Ω—ã—Ö —Ç–∏–ø–æ–≤

```go
package main

import "fmt"

type Message struct {
    From    string
    Content string
}

func main() {
    // –ö–∞–Ω–∞–ª —Å—Ç—Ä—É–∫—Ç—É—Ä
    msgCh := make(chan Message, 2)
    
    msgCh <- Message{From: "Alice", Content: "Hello!"}
    msgCh <- Message{From: "Bob", Content: "Hi there!"}
    
    msg1 := <-msgCh
    msg2 := <-msgCh
    
    fmt.Printf("%s: %s\n", msg1.From, msg1.Content)
    fmt.Printf("%s: %s\n", msg2.From, msg2.Content)
    
    // –ö–∞–Ω–∞–ª —Ñ—É–Ω–∫—Ü–∏–π
    funcCh := make(chan func(int) int, 1)
    funcCh <- func(x int) int { return x * x }
    
    square := <-funcCh
    fmt.Println("Square of 5:", square(5))
}
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ (deadlock)

```go
package main

import "fmt"

func main() {
    ch := make(chan int)
    
    // ‚ùå DEADLOCK ‚Äî main –±–ª–æ–∫–∏—Ä—É–µ—Ç—Å—è, –Ω–∏–∫—Ç–æ –Ω–µ –æ—Ç–ø—Ä–∞–≤–∏—Ç
    // fmt.Println(<-ch)
    
    // ‚ùå DEADLOCK ‚Äî main –±–ª–æ–∫–∏—Ä—É–µ—Ç—Å—è, –Ω–∏–∫—Ç–æ –Ω–µ –ø–æ–ª—É—á–∏—Ç
    // ch <- 42
    
    // ‚úÖ –û—Ç–ø—Ä–∞–≤–∫–∞ –∏ –ø–æ–ª—É—á–µ–Ω–∏–µ –≤ —Ä–∞–∑–Ω—ã—Ö –≥–æ—Ä—É—Ç–∏–Ω–∞—Ö
    go func() {
        ch <- 42
    }()
    fmt.Println(<-ch)  // OK
}
```

### –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–π –ø—Ä–∏–º–µ—Ä: Producer-Consumer

```go
package main

import (
    "fmt"
    "time"
)

func producer(ch chan<- int, done chan<- bool) {
    for i := 1; i <= 5; i++ {
        fmt.Printf("Producing: %d\n", i)
        ch <- i
        time.Sleep(100 * time.Millisecond)
    }
    done <- true
}

func consumer(id int, ch <-chan int) {
    for num := range ch {
        fmt.Printf("Consumer %d received: %d\n", id, num)
        time.Sleep(150 * time.Millisecond)
    }
}

func main() {
    ch := make(chan int, 3)
    done := make(chan bool)
    
    go producer(ch, done)
    go consumer(1, ch)
    go consumer(2, ch)
    
    <-done  // –∂–¥—ë–º –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è producer
    close(ch)  // –∑–∞–∫—Ä—ã–≤–∞–µ–º –∫–∞–Ω–∞–ª
    
    time.Sleep(time.Second)  // –¥–∞—ë–º –≤—Ä–µ–º—è consumers
}
```

### –ü—Ä–∏–º–µ—Ä: Pipeline (–∫–æ–Ω–≤–µ–π–µ—Ä)

```go
package main

import "fmt"

// –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä —á–∏—Å–µ–ª
func gen(nums ...int) <-chan int {
    out := make(chan int)
    go func() {
        for _, n := range nums {
            out <- n
        }
        close(out)
    }()
    return out
}

// –í–æ–∑–≤–æ–¥–∏—Ç –≤ –∫–≤–∞–¥—Ä–∞—Ç
func sq(in <-chan int) <-chan int {
    out := make(chan int)
    go func() {
        for n := range in {
            out <- n * n
        }
        close(out)
    }()
    return out
}

// –§–∏–ª—å—Ç—Ä—É–µ—Ç —á—ë—Ç–Ω—ã–µ
func filterEven(in <-chan int) <-chan int {
    out := make(chan int)
    go func() {
        for n := range in {
            if n%2 == 0 {
                out <- n
            }
        }
        close(out)
    }()
    return out
}

func main() {
    // Pipeline: gen -> sq -> filterEven
    nums := gen(1, 2, 3, 4, 5, 6)
    squared := sq(nums)
    evens := filterEven(squared)
    
    for n := range evens {
        fmt.Println(n)  // 4, 16, 36
    }
}
```

---

## ‚ö†Ô∏è –ß–∞—Å—Ç—ã–µ –æ—à–∏–±–∫–∏

### 1. Deadlock ‚Äî –æ—Ç–ø—Ä–∞–≤–∫–∞ –∏ –ø–æ–ª—É—á–µ–Ω–∏–µ –≤ –æ–¥–Ω–æ–π –≥–æ—Ä—É—Ç–∏–Ω–µ

```go
ch := make(chan int)
ch <- 42      // ‚ùå –±–ª–æ–∫–∏—Ä—É–µ—Ç—Å—è ‚Äî –Ω–∏–∫—Ç–æ –Ω–µ —á–∏—Ç–∞–µ—Ç
fmt.Println(<-ch)

// ‚úÖ –†–µ—à–µ–Ω–∏–µ: –±—É—Ñ–µ—Ä –∏–ª–∏ –æ—Ç–¥–µ–ª—å–Ω–∞—è –≥–æ—Ä—É—Ç–∏–Ω–∞
ch := make(chan int, 1)
ch <- 42
fmt.Println(<-ch)
```

### 2. –ß—Ç–µ–Ω–∏–µ –∏–∑ nil –∫–∞–Ω–∞–ª–∞

```go
var ch chan int  // nil –∫–∞–Ω–∞–ª
// <-ch  // ‚ùå –±–ª–æ–∫–∏—Ä—É–µ—Ç—Å—è –Ω–∞–≤—Å–µ–≥–¥–∞

ch = make(chan int)  // ‚úÖ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º
```

### 3. –ó–∞–ø–∏—Å—å –≤ nil –∫–∞–Ω–∞–ª

```go
var ch chan int
// ch <- 42  // ‚ùå –±–ª–æ–∫–∏—Ä—É–µ—Ç—Å—è –Ω–∞–≤—Å–µ–≥–¥–∞

ch = make(chan int, 1)
ch <- 42  // ‚úÖ OK
```

### 4. –ü–µ—Ä–µ–ø–æ–ª–Ω–µ–Ω–∏–µ –±—É—Ñ–µ—Ä–∞

```go
ch := make(chan int, 2)
ch <- 1
ch <- 2
// ch <- 3  // ‚ùå –±–ª–æ–∫–∏—Ä—É–µ—Ç—Å—è ‚Äî –±—É—Ñ–µ—Ä –ø–æ–ª–æ–Ω

// ‚úÖ –°–Ω–∞—á–∞–ª–∞ –ø—Ä–æ—á–∏—Ç–∞–π—Ç–µ –¥–∞–Ω–Ω—ã–µ
fmt.Println(<-ch)
ch <- 3  // OK
```

### 5. –£—Ç–µ—á–∫–∞ –≥–æ—Ä—É—Ç–∏–Ω—ã

```go
func leak() <-chan int {
    ch := make(chan int)
    go func() {
        // ‚ö†Ô∏è –ï—Å–ª–∏ –Ω–∏–∫—Ç–æ –Ω–µ —á–∏—Ç–∞–µ—Ç, –≥–æ—Ä—É—Ç–∏–Ω–∞ –∑–∞–≤–∏—Å–Ω–µ—Ç –Ω–∞–≤—Å–µ–≥–¥–∞
        ch <- 42
    }()
    return ch
}

// ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –±—É—Ñ–µ—Ä–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∫–∞–Ω–∞–ª
func noLeak() <-chan int {
    ch := make(chan int, 1)
    go func() {
        ch <- 42  // –Ω–µ –±–ª–æ–∫–∏—Ä—É–µ—Ç—Å—è
    }()
    return ch
}
```

---

## üìù –ü—Ä–∞–∫—Ç–∏–∫–∞

### –ó–∞–¥–∞—á–∞ 1: –ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä
–°–æ–∑–¥–∞–π—Ç–µ –≥–æ—Ä—É—Ç–∏–Ω—É-–∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä, –∫–æ—Ç–æ—Ä–∞—è –ø–æ–ª—É—á–∞–µ—Ç —á–µ—Ä–µ–∑ –∫–∞–Ω–∞–ª –¥–≤–∞ —á–∏—Å–ª–∞ –∏ –æ–ø–µ—Ä–∞—Ü–∏—é, –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç.

### –ó–∞–¥–∞—á–∞ 2: –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä ID
–°–æ–∑–¥–∞–π—Ç–µ –≥–æ—Ä—É—Ç–∏–Ω—É, –∫–æ—Ç–æ—Ä–∞—è –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —É–Ω–∏–∫–∞–ª—å–Ω—ã–µ ID (1, 2, 3...) —á–µ—Ä–µ–∑ –∫–∞–Ω–∞–ª.

### –ó–∞–¥–∞—á–∞ 3: Merger
–ù–∞–ø–∏—à–∏—Ç–µ —Ñ—É–Ω–∫—Ü–∏—é merge, –∫–æ—Ç–æ—Ä–∞—è –æ–±—ä–µ–¥–∏–Ω—è–µ—Ç –¥–≤–∞ –∫–∞–Ω–∞–ª–∞ –≤ –æ–¥–∏–Ω.

### –ó–∞–¥–∞—á–∞ 4: Splitter
–ù–∞–ø–∏—à–∏—Ç–µ —Ñ—É–Ω–∫—Ü–∏—é split, –∫–æ—Ç–æ—Ä–∞—è —Ä–∞–∑–¥–µ–ª—è–µ—Ç –æ–¥–∏–Ω –∫–∞–Ω–∞–ª –Ω–∞ –¥–≤–∞ (—á—ë—Ç–Ω—ã–µ/–Ω–µ—á—ë—Ç–Ω—ã–µ —á–∏—Å–ª–∞).

### –ó–∞–¥–∞—á–∞ 5: Worker Pool
–°–æ–∑–¥–∞–π—Ç–µ –ø—É–ª –∏–∑ N –≤–æ—Ä–∫–µ—Ä–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç –∑–∞–¥–∞—á–∏ –∏–∑ –æ–±—â–µ–≥–æ –∫–∞–Ω–∞–ª–∞.

### –ó–∞–¥–∞—á–∞ 6: Fan-In
–û–±—ä–µ–¥–∏–Ω–∏—Ç–µ –¥–∞–Ω–Ω—ã–µ –∏–∑ 3 –∫–∞–Ω–∞–ª–æ–≤ –≤ –æ–¥–∏–Ω —Ä–µ–∑—É–ª—å—Ç–∏—Ä—É—é—â–∏–π –∫–∞–Ω–∞–ª.

### –ó–∞–¥–∞—á–∞ 7: Rate Limiter
–†–µ–∞–ª–∏–∑—É–π—Ç–µ rate limiter —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –±—É—Ñ–µ—Ä–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –∫–∞–Ω–∞–ª–∞.

### –ó–∞–¥–∞—á–∞ 8: Ping-Pong
–†–µ–∞–ª–∏–∑—É–π—Ç–µ –∏–≥—Ä—É ping-pong –º–µ–∂–¥—É –¥–≤—É–º—è –≥–æ—Ä—É—Ç–∏–Ω–∞–º–∏ —á–µ—Ä–µ–∑ –∫–∞–Ω–∞–ª—ã.
