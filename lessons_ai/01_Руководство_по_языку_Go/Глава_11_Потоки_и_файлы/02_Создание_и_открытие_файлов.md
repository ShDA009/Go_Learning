# –°–æ–∑–¥–∞–Ω–∏–µ –∏ –æ—Ç–∫—Ä—ã—Ç–∏–µ —Ñ–∞–π–ª–æ–≤

## üí° –ö–ª—é—á–µ–≤—ã–µ –∏–¥–µ–∏

1. **os.File** ‚Äî —Ç–∏–ø –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å —Ñ–∞–π–ª–∞–º–∏, —Ä–µ–∞–ª–∏–∑—É–µ—Ç Reader –∏ Writer
2. **os.Create** ‚Äî —Å–æ–∑–¥–∞—ë—Ç —Ñ–∞–π–ª (–ø–µ—Ä–µ–∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π)
3. **os.Open** ‚Äî –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç —Ñ–∞–π–ª —Ç–æ–ª—å–∫–æ –¥–ª—è —á—Ç–µ–Ω–∏—è
4. **os.OpenFile** ‚Äî –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç —Ñ–∞–π–ª —Å —É–∫–∞–∑–∞–Ω–∏–µ–º —Ä–µ–∂–∏–º–∞ –∏ –ø—Ä–∞–≤
5. **defer file.Close()** ‚Äî –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –∑–∞–∫—Ä—ã–≤–∞—Ç—å —Ñ–∞–π–ª
6. **–ü—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞** ‚Äî —á–∏—Å–ª–æ–≤–æ–π —Ä–µ–∂–∏–º (0644, 0755, etc.)

---

## üìã –°–∏–Ω—Ç–∞–∫—Å–∏—Å

### –°–æ–∑–¥–∞–Ω–∏–µ —Ñ–∞–π–ª–∞

```go
file, err := os.Create("filename.txt")
if err != nil {
    // –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–∫–∏
}
defer file.Close()
```

### –û—Ç–∫—Ä—ã—Ç–∏–µ –¥–ª—è —á—Ç–µ–Ω–∏—è

```go
file, err := os.Open("filename.txt")
if err != nil {
    // –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–∫–∏
}
defer file.Close()
```

### –û—Ç–∫—Ä—ã—Ç–∏–µ —Å —Ñ–ª–∞–≥–∞–º–∏

```go
file, err := os.OpenFile(
    "filename.txt",
    os.O_RDWR|os.O_CREATE|os.O_APPEND,
    0644,
)
```

### –§–ª–∞–≥–∏ –æ—Ç–∫—Ä—ã—Ç–∏—è

```go
os.O_RDONLY  // —Ç–æ–ª—å–∫–æ —á—Ç–µ–Ω–∏–µ
os.O_WRONLY  // —Ç–æ–ª—å–∫–æ –∑–∞–ø–∏—Å—å
os.O_RDWR    // —á—Ç–µ–Ω–∏–µ –∏ –∑–∞–ø–∏—Å—å
os.O_CREATE  // —Å–æ–∑–¥–∞—Ç—å –µ—Å–ª–∏ –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
os.O_APPEND  // –¥–æ–±–∞–≤–ª—è—Ç—å –≤ –∫–æ–Ω–µ—Ü
os.O_TRUNC   // –æ—á–∏—Å—Ç–∏—Ç—å –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏
os.O_EXCL    // –æ—à–∏–±–∫–∞ –µ—Å–ª–∏ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç (—Å O_CREATE)
```

---

## üíª –ü—Ä–∏–º–µ—Ä—ã –∫–æ–¥–∞

### –°–æ–∑–¥–∞–Ω–∏–µ —Ñ–∞–π–ª–∞

```go
package main

import (
    "fmt"
    "os"
)

func main() {
    file, err := os.Create("hello.txt")
    if err != nil {
        fmt.Println("Error:", err)
        return
    }
    defer file.Close()
    
    fmt.Println("File created:", file.Name())
    
    // –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ñ–∞–π–ª–µ
    info, _ := file.Stat()
    fmt.Println("Size:", info.Size())
    fmt.Println("Mode:", info.Mode())
}
```

### –û—Ç–∫—Ä—ã—Ç–∏–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ —Ñ–∞–π–ª–∞

```go
package main

import (
    "fmt"
    "os"
)

func main() {
    file, err := os.Open("hello.txt")
    if err != nil {
        if os.IsNotExist(err) {
            fmt.Println("File does not exist!")
        } else {
            fmt.Println("Error:", err)
        }
        return
    }
    defer file.Close()
    
    fmt.Println("File opened:", file.Name())
}
```

### OpenFile —Å —Ä–∞–∑–Ω—ã–º–∏ —Ä–µ–∂–∏–º–∞–º–∏

```go
package main

import (
    "fmt"
    "os"
)

func main() {
    // –¢–æ–ª—å–∫–æ —á—Ç–µ–Ω–∏–µ
    readOnly, err := os.OpenFile("data.txt", os.O_RDONLY, 0)
    if err == nil {
        defer readOnly.Close()
        fmt.Println("Opened for reading")
    }
    
    // –¢–æ–ª—å–∫–æ –∑–∞–ø–∏—Å—å (—Å–æ–∑–¥–∞—ë—Ç –µ—Å–ª–∏ –Ω–µ—Ç)
    writeOnly, err := os.OpenFile("output.txt", 
        os.O_WRONLY|os.O_CREATE|os.O_TRUNC, 0644)
    if err == nil {
        defer writeOnly.Close()
        fmt.Println("Opened for writing")
    }
    
    // –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤ –∫–æ–Ω–µ—Ü
    appendFile, err := os.OpenFile("log.txt",
        os.O_APPEND|os.O_CREATE|os.O_WRONLY, 0644)
    if err == nil {
        defer appendFile.Close()
        fmt.Println("Opened for appending")
    }
    
    // –ß—Ç–µ–Ω–∏–µ –∏ –∑–∞–ø–∏—Å—å
    readWrite, err := os.OpenFile("data.txt",
        os.O_RDWR|os.O_CREATE, 0644)
    if err == nil {
        defer readWrite.Close()
        fmt.Println("Opened for read/write")
    }
}
```

### –ü—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ (Unix)

```go
package main

import (
    "fmt"
    "os"
)

func main() {
    // 0644 = rw-r--r--
    // –í–ª–∞–¥–µ–ª–µ—Ü: —á—Ç–µ–Ω–∏–µ + –∑–∞–ø–∏—Å—å
    // –ì—Ä—É–ø–ø–∞: —Ç–æ–ª—å–∫–æ —á—Ç–µ–Ω–∏–µ
    // –û—Å—Ç–∞–ª—å–Ω—ã–µ: —Ç–æ–ª—å–∫–æ —á—Ç–µ–Ω–∏–µ
    
    file1, _ := os.OpenFile("normal.txt", 
        os.O_CREATE|os.O_WRONLY, 0644)
    defer file1.Close()
    
    // 0755 = rwxr-xr-x (–¥–ª—è –∏—Å–ø–æ–ª–Ω—è–µ–º—ã—Ö —Ñ–∞–π–ª–æ–≤)
    file2, _ := os.OpenFile("script.sh",
        os.O_CREATE|os.O_WRONLY, 0755)
    defer file2.Close()
    
    // 0600 = rw------- (—Ç–æ–ª—å–∫–æ –≤–ª–∞–¥–µ–ª–µ—Ü)
    file3, _ := os.OpenFile("secret.txt",
        os.O_CREATE|os.O_WRONLY, 0600)
    defer file3.Close()
    
    fmt.Println("Files created with different permissions")
}
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è —Ñ–∞–π–ª–∞

```go
package main

import (
    "fmt"
    "os"
)

func fileExists(filename string) bool {
    _, err := os.Stat(filename)
    return !os.IsNotExist(err)
}

func main() {
    files := []string{"existing.txt", "missing.txt", "."}
    
    for _, f := range files {
        if fileExists(f) {
            fmt.Printf("%s exists\n", f)
        } else {
            fmt.Printf("%s does not exist\n", f)
        }
    }
}
```

### –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ñ–∞–π–ª–µ

```go
package main

import (
    "fmt"
    "os"
)

func main() {
    info, err := os.Stat("hello.txt")
    if err != nil {
        fmt.Println("Error:", err)
        return
    }
    
    fmt.Println("Name:", info.Name())
    fmt.Println("Size:", info.Size(), "bytes")
    fmt.Println("Mode:", info.Mode())
    fmt.Println("ModTime:", info.ModTime())
    fmt.Println("IsDir:", info.IsDir())
}
```

### –í—Ä–µ–º–µ–Ω–Ω—ã–π —Ñ–∞–π–ª

```go
package main

import (
    "fmt"
    "os"
)

func main() {
    // –°–æ–∑–¥–∞—ë–º –≤—Ä–µ–º–µ–Ω–Ω—ã–π —Ñ–∞–π–ª
    tmpFile, err := os.CreateTemp("", "example-*.txt")
    if err != nil {
        fmt.Println("Error:", err)
        return
    }
    defer os.Remove(tmpFile.Name())  // –£–¥–∞–ª—è–µ–º –ø–æ—Å–ª–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
    defer tmpFile.Close()
    
    fmt.Println("Temp file:", tmpFile.Name())
    
    // –ó–∞–ø–∏—Å—ã–≤–∞–µ–º –¥–∞–Ω–Ω—ã–µ
    tmpFile.WriteString("Temporary data")
}
```

### –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–π –ø—Ä–∏–º–µ—Ä: –±–µ–∑–æ–ø–∞—Å–Ω–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ —Ñ–∞–π–ª–∞

```go
package main

import (
    "fmt"
    "os"
)

func createFileSafe(filename string, overwrite bool) (*os.File, error) {
    if !overwrite {
        // –ü—Ä–æ–≤–µ—Ä—è–µ–º, —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –ª–∏ —Ñ–∞–π–ª
        if _, err := os.Stat(filename); err == nil {
            return nil, fmt.Errorf("file %s already exists", filename)
        }
    }
    
    file, err := os.Create(filename)
    if err != nil {
        return nil, fmt.Errorf("cannot create file: %w", err)
    }
    
    return file, nil
}

func main() {
    // –°–æ–∑–¥–∞—ë–º —Ñ–∞–π–ª, –Ω–µ –ø–µ—Ä–µ–∑–∞–ø–∏—Å—ã–≤–∞—è
    file, err := createFileSafe("data.txt", false)
    if err != nil {
        fmt.Println("Error:", err)
        return
    }
    defer file.Close()
    
    file.WriteString("Hello, World!")
    fmt.Println("File created successfully")
}
```

---

## ‚ö†Ô∏è –ß–∞—Å—Ç—ã–µ –æ—à–∏–±–∫–∏

### 1. –ó–∞–±—ã–ª–∏ –∑–∞–∫—Ä—ã—Ç—å —Ñ–∞–π–ª

```go
// ‚ùå –£—Ç–µ—á–∫–∞ —Ä–µ—Å—É—Ä—Å–æ–≤
file, _ := os.Open("data.txt")
// —Ä–∞–±–æ—Ç–∞ —Å —Ñ–∞–π–ª–æ–º...
// file.Close() ‚Äî –∑–∞–±—ã–ª–∏!

// ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ defer
file, err := os.Open("data.txt")
if err != nil {
    return err
}
defer file.Close()
```

### 2. defer –ø–µ—Ä–µ–¥ –ø—Ä–æ–≤–µ—Ä–∫–æ–π –æ—à–∏–±–∫–∏

```go
// ‚ùå PANIC –µ—Å–ª–∏ file == nil
file, err := os.Open("data.txt")
defer file.Close()  // defer –≤—ã–ø–æ–ª–Ω–∏—Ç—Å—è –¥–∞–∂–µ –ø—Ä–∏ –æ—à–∏–±–∫–µ!
if err != nil {
    return err
}

// ‚úÖ defer –ø–æ—Å–ª–µ –ø—Ä–æ–≤–µ—Ä–∫–∏
file, err := os.Open("data.txt")
if err != nil {
    return err
}
defer file.Close()
```

### 3. –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞

```go
// ‚ùå –°–ª–∏—à–∫–æ–º –æ—Ç–∫—Ä—ã—Ç—ã–µ –ø—Ä–∞–≤–∞
os.OpenFile("secret.txt", os.O_CREATE, 0777)

// ‚úÖ –û–≥—Ä–∞–Ω–∏—á—å—Ç–µ –ø—Ä–∞–≤–∞
os.OpenFile("secret.txt", os.O_CREATE, 0600)
```

---

## üìù –ü—Ä–∞–∫—Ç–∏–∫–∞

### –ó–∞–¥–∞—á–∞ 1: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ñ–∞–π–ª–∞
–ù–∞–ø–∏—à–∏—Ç–µ —Ñ—É–Ω–∫—Ü–∏—é, –ø—Ä–æ–≤–µ—Ä—è—é—â—É—é —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏–µ –∏ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ –∫ —Ñ–∞–π–ª—É.

### –ó–∞–¥–∞—á–∞ 2: –ê—Ç–æ–º–∞—Ä–Ω–∞—è –∑–∞–ø–∏—Å—å
–†–µ–∞–ª–∏–∑—É–π—Ç–µ –∞—Ç–æ–º–∞—Ä–Ω—É—é –∑–∞–ø–∏—Å—å: –ø–∏—à–∏—Ç–µ –≤–æ –≤—Ä–µ–º–µ–Ω–Ω—ã–π —Ñ–∞–π–ª, –∑–∞—Ç–µ–º –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤—ã–≤–∞–π—Ç–µ.

### –ó–∞–¥–∞—á–∞ 3: –°–æ–∑–¥–∞–Ω–∏–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏
–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª —Å —Å–æ–∑–¥–∞–Ω–∏–µ–º –≤—Å–µ—Ö –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã—Ö –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π.

### –ó–∞–¥–∞—á–∞ 4: –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ —Ñ–∞–π–ª–∞
–ò—Å—Å–ª–µ–¥—É–π—Ç–µ –±–ª–æ–∫–∏—Ä–æ–≤–∫—É —Ñ–∞–π–ª–æ–≤ (flock) –¥–ª—è —ç–∫—Å–∫–ª—é–∑–∏–≤–Ω–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞.

### –ó–∞–¥–∞—á–∞ 5: –†–æ—Ç–∞—Ü–∏—è –ª–æ–≥–æ–≤
–†–µ–∞–ª–∏–∑—É–π—Ç–µ –ø—Ä–æ—Å—Ç—É—é —Ä–æ—Ç–∞—Ü–∏—é –ª–æ–≥-—Ñ–∞–π–ª–æ–≤.

### –ó–∞–¥–∞—á–∞ 6: File watcher
–ù–∞–ø–∏—à–∏—Ç–µ –ø—Ä–æ—Å—Ç–æ–π watcher, –æ—Ç—Å–ª–µ–∂–∏–≤–∞—é—â–∏–π –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ñ–∞–π–ª–∞.

### –ó–∞–¥–∞—á–∞ 7: –ë–µ–∑–æ–ø–∞—Å–Ω–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ
–†–µ–∞–ª–∏–∑—É–π—Ç–µ —É–¥–∞–ª–µ–Ω–∏–µ —Å –ø–µ—Ä–µ–∑–∞–ø–∏—Å—å—é –¥–∞–Ω–Ω—ã—Ö.

### –ó–∞–¥–∞—á–∞ 8: Config file
–°–æ–∑–¥–∞–π—Ç–µ –∫–ª–∞—Å—Å –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–º —Ñ–∞–π–ª–æ–º.
