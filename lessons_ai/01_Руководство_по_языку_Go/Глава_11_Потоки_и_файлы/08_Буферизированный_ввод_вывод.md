# –ë—É—Ñ–µ—Ä–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –≤–≤–æ–¥-–≤—ã–≤–æ–¥ (bufio)

## üí° –ö–ª—é—á–µ–≤—ã–µ –∏–¥–µ–∏

1. **bufio.Writer** ‚Äî –±—É—Ñ–µ—Ä–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –∑–∞–ø–∏—Å—å (–Ω–∞–∫–æ–ø–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö)
2. **bufio.Reader** ‚Äî –±—É—Ñ–µ—Ä–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ —á—Ç–µ–Ω–∏–µ (–ø—Ä–µ–¥–∑–∞–≥—Ä—É–∑–∫–∞)
3. **Flush()** ‚Äî –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–∞—è –∑–∞–ø–∏—Å—å –±—É—Ñ–µ—Ä–∞ –≤ –∏—Å—Ç–æ—á–Ω–∏–∫
4. **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å** ‚Äî –º–µ–Ω—å—à–µ —Å–∏—Å—Ç–µ–º–Ω—ã—Ö –≤—ã–∑–æ–≤–æ–≤
5. **Scanner** ‚Äî —É–¥–æ–±–Ω–æ–µ –ø–æ—Å—Ç—Ä–æ—á–Ω–æ–µ —á—Ç–µ–Ω–∏–µ
6. **–†–∞–∑–º–µ—Ä –±—É—Ñ–µ—Ä–∞** ‚Äî –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 4KB

---

## üìã –°–∏–Ω—Ç–∞–∫—Å–∏—Å

### –°–æ–∑–¥–∞–Ω–∏–µ –±—É—Ñ–µ—Ä–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –ø–æ—Ç–æ–∫–æ–≤

```go
// Writer
writer := bufio.NewWriter(file)
writer := bufio.NewWriterSize(file, 8192)  // custom size

// Reader
reader := bufio.NewReader(file)
reader := bufio.NewReaderSize(file, 8192)  // custom size

// Scanner
scanner := bufio.NewScanner(file)
```

### –ú–µ—Ç–æ–¥—ã Writer

```go
writer.Write([]byte)       // –∑–∞–ø–∏—Å—å –±–∞–π—Ç–æ–≤
writer.WriteString(string) // –∑–∞–ø–∏—Å—å —Å—Ç—Ä–æ–∫–∏
writer.WriteByte(byte)     // –∑–∞–ø–∏—Å—å –±–∞–π—Ç–∞
writer.WriteRune(rune)     // –∑–∞–ø–∏—Å—å —Ä—É–Ω—ã
writer.Flush()             // —Å–±—Ä–æ—Å –±—É—Ñ–µ—Ä–∞
```

### –ú–µ—Ç–æ–¥—ã Reader

```go
reader.Read([]byte)           // —á—Ç–µ–Ω–∏–µ –≤ –±—É—Ñ–µ—Ä
reader.ReadString(delim)      // —á—Ç–µ–Ω–∏–µ –¥–æ —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª—è
reader.ReadLine()             // —á—Ç–µ–Ω–∏–µ —Å—Ç—Ä–æ–∫–∏
reader.ReadByte()             // —á—Ç–µ–Ω–∏–µ –±–∞–π—Ç–∞
reader.ReadRune()             // —á—Ç–µ–Ω–∏–µ —Ä—É–Ω—ã
reader.Peek(n)                // –ø–æ–¥–≥–ª—è–¥–µ—Ç—å n –±–∞–π—Ç
```

---

## üíª –ü—Ä–∏–º–µ—Ä—ã –∫–æ–¥–∞

### –ë—É—Ñ–µ—Ä–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –∑–∞–ø–∏—Å—å

```go
package main

import (
    "bufio"
    "fmt"
    "os"
)

func main() {
    file, err := os.Create("buffered.txt")
    if err != nil {
        fmt.Println("Error:", err)
        return
    }
    defer file.Close()
    
    // –°–æ–∑–¥–∞—ë–º –±—É—Ñ–µ—Ä–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π writer
    writer := bufio.NewWriter(file)
    
    // –ó–∞–ø–∏—Å—ã–≤–∞–µ–º –¥–∞–Ω–Ω—ã–µ (–≤ –±—É—Ñ–µ—Ä)
    writer.WriteString("Line 1\n")
    writer.WriteString("Line 2\n")
    writer.WriteString("Line 3\n")
    
    // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Ä–∞–∑–º–µ—Ä –±—É—Ñ–µ—Ä–∞
    fmt.Println("Buffered:", writer.Buffered())
    fmt.Println("Available:", writer.Available())
    
    // –í–ê–ñ–ù–û: —Å–±—Ä–∞—Å—ã–≤–∞–µ–º –±—É—Ñ–µ—Ä –≤ —Ñ–∞–π–ª
    err = writer.Flush()
    if err != nil {
        fmt.Println("Flush error:", err)
    }
    
    fmt.Println("File written!")
}
```

### –ë—É—Ñ–µ—Ä–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ —á—Ç–µ–Ω–∏–µ

```go
package main

import (
    "bufio"
    "fmt"
    "io"
    "os"
)

func main() {
    file, err := os.Open("buffered.txt")
    if err != nil {
        fmt.Println("Error:", err)
        return
    }
    defer file.Close()
    
    reader := bufio.NewReader(file)
    
    for {
        // ReadString —á–∏—Ç–∞–µ—Ç –¥–æ —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª—è (–≤–∫–ª—é—á–∞—è –µ–≥–æ)
        line, err := reader.ReadString('\n')
        if err == io.EOF {
            break
        }
        if err != nil {
            fmt.Println("Error:", err)
            break
        }
        
        fmt.Print(line)  // —Å—Ç—Ä–æ–∫–∞ —É–∂–µ —Å–æ–¥–µ—Ä–∂–∏—Ç \n
    }
}
```

### Scanner –¥–ª—è –ø–æ—Å—Ç—Ä–æ—á–Ω–æ–≥–æ —á—Ç–µ–Ω–∏—è

```go
package main

import (
    "bufio"
    "fmt"
    "os"
)

func main() {
    file, err := os.Open("buffered.txt")
    if err != nil {
        fmt.Println("Error:", err)
        return
    }
    defer file.Close()
    
    scanner := bufio.NewScanner(file)
    
    lineNum := 0
    for scanner.Scan() {
        lineNum++
        fmt.Printf("%d: %s\n", lineNum, scanner.Text())
    }
    
    if err := scanner.Err(); err != nil {
        fmt.Println("Scanner error:", err)
    }
}
```

### Scanner —Å –∫–∞—Å—Ç–æ–º–Ω—ã–º —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª–µ–º

```go
package main

import (
    "bufio"
    "fmt"
    "strings"
)

func main() {
    data := "word1,word2,word3,word4"
    reader := strings.NewReader(data)
    
    scanner := bufio.NewScanner(reader)
    
    // –†–∞–∑–¥–µ–ª–∏—Ç–µ–ª—å ‚Äî –∑–∞–ø—è—Ç–∞—è
    scanner.Split(func(data []byte, atEOF bool) (advance int, token []byte, err error) {
        for i := 0; i < len(data); i++ {
            if data[i] == ',' {
                return i + 1, data[:i], nil
            }
        }
        if atEOF && len(data) > 0 {
            return len(data), data, nil
        }
        return 0, nil, nil
    })
    
    for scanner.Scan() {
        fmt.Println("Token:", scanner.Text())
    }
}
```

### –í—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª–∏ Scanner

```go
package main

import (
    "bufio"
    "fmt"
    "strings"
)

func main() {
    data := "Hello World!\nThis is Go.\nBuffered I/O."
    
    // –ü–æ —Å—Ç—Ä–æ–∫–∞–º (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
    fmt.Println("=== Lines ===")
    scanner := bufio.NewScanner(strings.NewReader(data))
    for scanner.Scan() {
        fmt.Println(scanner.Text())
    }
    
    // –ü–æ —Å–ª–æ–≤–∞–º
    fmt.Println("\n=== Words ===")
    scanner = bufio.NewScanner(strings.NewReader(data))
    scanner.Split(bufio.ScanWords)
    for scanner.Scan() {
        fmt.Println(scanner.Text())
    }
    
    // –ü–æ –±–∞–π—Ç–∞–º
    fmt.Println("\n=== Bytes (first 10) ===")
    scanner = bufio.NewScanner(strings.NewReader(data))
    scanner.Split(bufio.ScanBytes)
    count := 0
    for scanner.Scan() && count < 10 {
        fmt.Printf("%q ", scanner.Text())
        count++
    }
    fmt.Println()
    
    // –ü–æ —Ä—É–Ω–∞–º (Unicode)
    fmt.Println("\n=== Runes (–ü—Ä–∏–≤–µ—Ç) ===")
    scanner = bufio.NewScanner(strings.NewReader("–ü—Ä–∏–≤–µ—Ç"))
    scanner.Split(bufio.ScanRunes)
    for scanner.Scan() {
        fmt.Printf("%s ", scanner.Text())
    }
    fmt.Println()
}
```

### Peek ‚Äî –ø–æ–¥–≥–ª—è–¥—ã–≤–∞–Ω–∏–µ –±–µ–∑ –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏—è

```go
package main

import (
    "bufio"
    "fmt"
    "strings"
)

func main() {
    reader := bufio.NewReader(strings.NewReader("Hello, World!"))
    
    // –ü–æ–¥–≥–ª—è–¥—ã–≤–∞–µ–º –ø–µ—Ä–≤—ã–µ 5 –±–∞–π—Ç
    peek, _ := reader.Peek(5)
    fmt.Printf("Peek: %s\n", string(peek))
    
    // –î–∞–Ω–Ω—ã–µ –≤—Å—ë –µ—â—ë –¥–æ—Å—Ç—É–ø–Ω—ã
    data, _ := reader.ReadString('!')
    fmt.Printf("Read: %s\n", data)
}
```

### –≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–∞—è –∑–∞–ø–∏—Å—å –±–æ–ª—å—à–∏—Ö –¥–∞–Ω–Ω—ã—Ö

```go
package main

import (
    "bufio"
    "fmt"
    "os"
    "time"
)

func writeUnbuffered(filename string, lines int) time.Duration {
    file, _ := os.Create(filename)
    defer file.Close()
    
    start := time.Now()
    for i := 0; i < lines; i++ {
        file.WriteString(fmt.Sprintf("Line %d\n", i))
    }
    return time.Since(start)
}

func writeBuffered(filename string, lines int) time.Duration {
    file, _ := os.Create(filename)
    defer file.Close()
    
    writer := bufio.NewWriter(file)
    defer writer.Flush()
    
    start := time.Now()
    for i := 0; i < lines; i++ {
        writer.WriteString(fmt.Sprintf("Line %d\n", i))
    }
    return time.Since(start)
}

func main() {
    lines := 100000
    
    unbuffered := writeUnbuffered("unbuffered.txt", lines)
    buffered := writeBuffered("buffered.txt", lines)
    
    fmt.Printf("Unbuffered: %v\n", unbuffered)
    fmt.Printf("Buffered: %v\n", buffered)
    fmt.Printf("Speedup: %.2fx\n", float64(unbuffered)/float64(buffered))
    
    // Cleanup
    os.Remove("unbuffered.txt")
    os.Remove("buffered.txt")
}
```

### ReadWriter ‚Äî –∫–æ–º–±–∏–Ω–∞—Ü–∏—è Reader –∏ Writer

```go
package main

import (
    "bufio"
    "fmt"
    "os"
)

func main() {
    file, _ := os.OpenFile("data.txt", 
        os.O_RDWR|os.O_CREATE|os.O_TRUNC, 0644)
    defer file.Close()
    
    // –ö–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –±—É—Ñ–µ—Ä–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø–æ—Ç–æ–∫
    rw := bufio.NewReadWriter(
        bufio.NewReader(file),
        bufio.NewWriter(file),
    )
    
    // –ó–∞–ø–∏—Å—ã–≤–∞–µ–º
    rw.WriteString("Hello, buffered world!\n")
    rw.Flush()
    
    // –ü–µ—Ä–µ–º–µ—â–∞–µ–º—Å—è –≤ –Ω–∞—á–∞–ª–æ
    file.Seek(0, 0)
    
    // –ß–∏—Ç–∞–µ–º
    line, _ := rw.ReadString('\n')
    fmt.Println("Read:", line)
}
```

---

## ‚ö†Ô∏è –ß–∞—Å—Ç—ã–µ –æ—à–∏–±–∫–∏

### 1. –ó–∞–±—ã–ª–∏ Flush()

```go
writer := bufio.NewWriter(file)
writer.WriteString("data")
// ‚ùå –î–∞–Ω–Ω—ã–µ –æ—Å—Ç–∞–ª–∏—Å—å –≤ –±—É—Ñ–µ—Ä–µ, —Ñ–∞–π–ª –ø—É—Å—Ç!

// ‚úÖ –í—Å–µ–≥–¥–∞ –≤—ã–∑—ã–≤–∞–π—Ç–µ Flush
defer writer.Flush()
```

### 2. Scanner —Å –¥–ª–∏–Ω–Ω—ã–º–∏ —Å—Ç—Ä–æ–∫–∞–º–∏

```go
scanner := bufio.NewScanner(file)
// ‚ùå –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –±—É—Ñ–µ—Ä 64KB ‚Äî –¥–ª–∏–Ω–Ω—ã–µ —Å—Ç—Ä–æ–∫–∏ –≤—ã–∑–æ–≤—É—Ç –æ—à–∏–±–∫—É

// ‚úÖ –£–≤–µ–ª–∏—á—å—Ç–µ –±—É—Ñ–µ—Ä
buf := make([]byte, 1024*1024)  // 1MB
scanner.Buffer(buf, len(buf))
```

### 3. –ü–æ—Ç–µ—Ä—è –¥–∞–Ω–Ω—ã—Ö –ø—Ä–∏ –æ—à–∏–±–∫–µ

```go
// ‚ùå –ü—Ä–∏ –æ—à–∏–±–∫–µ –¥–∞–Ω–Ω—ã–µ –≤ –±—É—Ñ–µ—Ä–µ –ø–æ—Ç–µ—Ä—è—é—Ç—Å—è
writer.WriteString("important")
// –æ—à–∏–±–∫–∞...

// ‚úÖ Flush –ø–µ—Ä–µ–¥ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–º–∏ —Ç–æ—á–∫–∞–º–∏
writer.WriteString("important")
writer.Flush()  // –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ–º –∑–∞–ø–∏—Å—å
```

---

## üìù –ü—Ä–∞–∫—Ç–∏–∫–∞

### –ó–∞–¥–∞—á–∞ 1: Word counter
–ü–æ–¥—Å—á–∏—Ç–∞–π—Ç–µ —Å–ª–æ–≤–∞ –≤ —Ñ–∞–π–ª–µ –∏—Å–ø–æ–ª—å–∑—É—è Scanner.

### –ó–∞–¥–∞—á–∞ 2: Log writer
–°–æ–∑–¥–∞–π—Ç–µ –±—É—Ñ–µ—Ä–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ª–æ–≥–≥–µ—Ä —Å –∞–≤—Ç–æ-flush.

### –ó–∞–¥–∞—á–∞ 3: CSV parser
–†–∞—Å–ø–∞—Ä—Å–∏—Ç–µ CSV —Å –±—É—Ñ–µ—Ä–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–º —á—Ç–µ–Ω–∏–µ–º.

### –ó–∞–¥–∞—á–∞ 4: Line filter
–û—Ç—Ñ–∏–ª—å—Ç—Ä—É–π—Ç–µ —Å—Ç—Ä–æ–∫–∏ —Ñ–∞–π–ª–∞ –ø–æ —É—Å–ª–æ–≤–∏—é.

### –ó–∞–¥–∞—á–∞ 5: File concatenation
–û–±—ä–µ–¥–∏–Ω–∏—Ç–µ —Ñ–∞–π–ª—ã —Å –±—É—Ñ–µ—Ä–∏–∑–∞—Ü–∏–µ–π.

### –ó–∞–¥–∞—á–∞ 6: Custom scanner
–°–æ–∑–¥–∞–π—Ç–µ Scanner –¥–ª—è JSON –æ–±—ä–µ–∫—Ç–æ–≤.

### –ó–∞–¥–∞—á–∞ 7: Buffered copy
–†–µ–∞–ª–∏–∑—É–π—Ç–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ —Å –ø—Ä–æ–≥—Ä–µ—Å—Å–æ–º.

### –ó–∞–¥–∞—á–∞ 8: Auto-flush writer
–°–æ–∑–¥–∞–π—Ç–µ Writer —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º flush –ø–æ —Ç–∞–π–º–µ—Ä—É.
