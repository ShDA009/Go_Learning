# Ğ—Ğ°Ğ¼Ñ‹ĞºĞ°Ğ½Ğ¸Ñ (Closures)

---

## ğŸ’¡ ĞšĞ»ÑÑ‡ĞµĞ²Ñ‹Ğµ Ğ¸Ğ´ĞµĞ¸

- **Ğ—Ğ°Ğ¼Ñ‹ĞºĞ°Ğ½Ğ¸Ğµ** â€” Ñ„ÑƒĞ½ĞºÑ†Ğ¸Ñ + Ğ·Ğ°Ñ…Ğ²Ğ°Ñ‡ĞµĞ½Ğ½Ğ¾Ğµ Ğ¾ĞºÑ€ÑƒĞ¶ĞµĞ½Ğ¸Ğµ (Ğ¿ĞµÑ€ĞµĞ¼ĞµĞ½Ğ½Ñ‹Ğµ Ğ¸Ğ· Ğ²Ğ½ĞµÑˆĞ½ĞµĞ¹ Ğ¾Ğ±Ğ»Ğ°ÑÑ‚Ğ¸)
- Ğ—Ğ°Ğ¼Ñ‹ĞºĞ°Ğ½Ğ¸Ğµ "Ğ¿Ğ¾Ğ¼Ğ½Ğ¸Ñ‚" Ğ¿ĞµÑ€ĞµĞ¼ĞµĞ½Ğ½Ñ‹Ğµ Ğ´Ğ°Ğ¶Ğµ Ğ¿Ğ¾ÑĞ»Ğµ Ğ²Ñ‹Ñ…Ğ¾Ğ´Ğ° Ğ¸Ğ· Ğ²Ğ½ĞµÑˆĞ½ĞµĞ¹ Ñ„ÑƒĞ½ĞºÑ†Ğ¸Ğ¸
- ĞšĞ°Ğ¶Ğ´Ñ‹Ğ¹ Ğ²Ñ‹Ğ·Ğ¾Ğ² Ğ²Ğ½ĞµÑˆĞ½ĞµĞ¹ Ñ„ÑƒĞ½ĞºÑ†Ğ¸Ğ¸ ÑĞ¾Ğ·Ğ´Ğ°Ñ‘Ñ‚ **Ğ½Ğ¾Ğ²Ğ¾Ğµ Ğ½ĞµĞ·Ğ°Ğ²Ğ¸ÑĞ¸Ğ¼Ğ¾Ğµ Ğ·Ğ°Ğ¼Ñ‹ĞºĞ°Ğ½Ğ¸Ğµ**
- Ğ—Ğ°Ğ¼Ñ‹ĞºĞ°Ğ½Ğ¸Ñ Ğ¿Ğ¾Ğ·Ğ²Ğ¾Ğ»ÑÑÑ‚ ÑĞ¾Ğ·Ğ´Ğ°Ğ²Ğ°Ñ‚ÑŒ **Ğ¿Ñ€Ğ¸Ğ²Ğ°Ñ‚Ğ½Ğ¾Ğµ ÑĞ¾ÑÑ‚Ğ¾ÑĞ½Ğ¸Ğµ**
- ĞÑĞ½Ğ¾Ğ²Ğ° Ğ´Ğ»Ñ: Ğ³ĞµĞ½ĞµÑ€Ğ°Ñ‚Ğ¾Ñ€Ğ¾Ğ², Ñ„Ğ°Ğ±Ñ€Ğ¸Ğº, middleware, Ğ¼ĞµĞ¼Ğ¾Ğ¸Ğ·Ğ°Ñ†Ğ¸Ğ¸

### Ğ¡Ñ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ° Ğ·Ğ°Ğ¼Ñ‹ĞºĞ°Ğ½Ğ¸Ñ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Ğ’Ğ½ĞµÑˆĞ½ÑÑ Ñ„ÑƒĞ½ĞºÑ†Ğ¸Ñ                     â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ Ğ›Ğ¾ĞºĞ°Ğ»ÑŒĞ½Ñ‹Ğµ Ğ¿ĞµÑ€ĞµĞ¼ĞµĞ½Ğ½Ñ‹Ğµ            â”‚ â”‚  â† Ğ›ĞµĞºÑĞ¸Ñ‡ĞµÑĞºĞ¾Ğµ Ğ¾ĞºÑ€ÑƒĞ¶ĞµĞ½Ğ¸Ğµ
â”‚ â”‚ (Ğ·Ğ°Ñ…Ğ²Ğ°Ñ‡ĞµĞ½Ğ½Ğ¾Ğµ ÑĞ¾ÑÑ‚Ğ¾ÑĞ½Ğ¸Ğµ)         â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ Ğ’Ğ½ÑƒÑ‚Ñ€ĞµĞ½Ğ½ÑÑ (Ğ²Ğ¾Ğ·Ğ²Ñ€Ğ°Ñ‰Ğ°ĞµĞ¼Ğ°Ñ)       â”‚ â”‚
â”‚ â”‚ Ñ„ÑƒĞ½ĞºÑ†Ğ¸Ñ                         â”‚ â”‚  â† Ğ—Ğ°Ğ¼Ñ‹ĞºĞ°Ğ½Ğ¸Ğµ
â”‚ â”‚ (Ğ¸Ğ¼ĞµĞµÑ‚ Ğ´Ğ¾ÑÑ‚ÑƒĞ¿ Ğº Ğ¿ĞµÑ€ĞµĞ¼ĞµĞ½Ğ½Ñ‹Ğ¼)     â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“‹ Ğ¡Ğ¸Ğ½Ñ‚Ğ°ĞºÑĞ¸Ñ

### Ğ‘Ğ°Ğ·Ğ¾Ğ²Ğ¾Ğµ Ğ·Ğ°Ğ¼Ñ‹ĞºĞ°Ğ½Ğ¸Ğµ
```go
func outer() func() {
    variable := value  // Ğ·Ğ°Ñ…Ğ²Ğ°Ñ‡ĞµĞ½Ğ½Ğ°Ñ Ğ¿ĞµÑ€ĞµĞ¼ĞµĞ½Ğ½Ğ°Ñ
    
    return func() {
        // Ğ´Ğ¾ÑÑ‚ÑƒĞ¿ Ğº variable
    }
}
```

### Ğ—Ğ°Ğ¼Ñ‹ĞºĞ°Ğ½Ğ¸Ğµ Ñ Ğ¿Ğ°Ñ€Ğ°Ğ¼ĞµÑ‚Ñ€Ğ¾Ğ¼
```go
func makeAdder(n int) func(int) int {
    return func(x int) int {
        return x + n  // n Ğ·Ğ°Ñ…Ğ²Ğ°Ñ‡ĞµĞ½Ğ°
    }
}
```

### Ğ—Ğ°Ğ¼Ñ‹ĞºĞ°Ğ½Ğ¸Ğµ Ñ Ğ¼ÑƒÑ‚Ğ°Ğ±ĞµĞ»ÑŒĞ½Ñ‹Ğ¼ ÑĞ¾ÑÑ‚Ğ¾ÑĞ½Ğ¸ĞµĞ¼
```go
func counter() func() int {
    count := 0
    return func() int {
        count++  // Ğ¸Ğ·Ğ¼ĞµĞ½ÑĞµĞ¼ Ğ·Ğ°Ñ…Ğ²Ğ°Ñ‡ĞµĞ½Ğ½ÑƒÑ Ğ¿ĞµÑ€ĞµĞ¼ĞµĞ½Ğ½ÑƒÑ
        return count
    }
}
```

---

## ğŸ’» ĞŸÑ€Ğ¸Ğ¼ĞµÑ€Ñ‹ ĞºĞ¾Ğ´Ğ°

### ĞŸÑ€Ğ¸Ğ¼ĞµÑ€ 1: ĞŸÑ€Ğ¾ÑÑ‚Ğ¾Ğµ Ğ·Ğ°Ğ¼Ñ‹ĞºĞ°Ğ½Ğ¸Ğµ
```go
package main

import "fmt"

func outer() func() {
    message := "ĞŸÑ€Ğ¸Ğ²ĞµÑ‚ Ğ¸Ğ· Ğ·Ğ°Ğ¼Ñ‹ĞºĞ°Ğ½Ğ¸Ñ!"
    
    return func() {
        fmt.Println(message)  // message Ğ·Ğ°Ñ…Ğ²Ğ°Ñ‡ĞµĞ½Ğ°
    }
}

func main() {
    fn := outer()
    fn()  // ĞŸÑ€Ğ¸Ğ²ĞµÑ‚ Ğ¸Ğ· Ğ·Ğ°Ğ¼Ñ‹ĞºĞ°Ğ½Ğ¸Ñ!
    fn()  // ĞŸÑ€Ğ¸Ğ²ĞµÑ‚ Ğ¸Ğ· Ğ·Ğ°Ğ¼Ñ‹ĞºĞ°Ğ½Ğ¸Ñ!
}
```

### ĞŸÑ€Ğ¸Ğ¼ĞµÑ€ 2: Ğ¡Ñ‡Ñ‘Ñ‚Ñ‡Ğ¸Ğº (ĞºĞ»Ğ°ÑÑĞ¸Ñ‡ĞµÑĞºĞ¸Ğ¹ Ğ¿Ñ€Ğ¸Ğ¼ĞµÑ€)
```go
package main

import "fmt"

func makeCounter() func() int {
    count := 0  // Ğ¿Ñ€Ğ¸Ğ²Ğ°Ñ‚Ğ½Ğ¾Ğµ ÑĞ¾ÑÑ‚Ğ¾ÑĞ½Ğ¸Ğµ
    
    return func() int {
        count++
        return count
    }
}

func main() {
    // ĞšĞ°Ğ¶Ğ´Ñ‹Ğ¹ Ğ²Ñ‹Ğ·Ğ¾Ğ² makeCounter ÑĞ¾Ğ·Ğ´Ğ°Ñ‘Ñ‚ Ğ½Ğ¾Ğ²Ğ¾Ğµ Ğ½ĞµĞ·Ğ°Ğ²Ğ¸ÑĞ¸Ğ¼Ğ¾Ğµ ÑĞ¾ÑÑ‚Ğ¾ÑĞ½Ğ¸Ğµ
    counter1 := makeCounter()
    counter2 := makeCounter()
    
    fmt.Println("Counter1:", counter1())  // 1
    fmt.Println("Counter1:", counter1())  // 2
    fmt.Println("Counter1:", counter1())  // 3
    
    fmt.Println("Counter2:", counter2())  // 1 (Ğ½ĞµĞ·Ğ°Ğ²Ğ¸ÑĞ¸Ğ¼Ñ‹Ğ¹!)
    fmt.Println("Counter2:", counter2())  // 2
    
    fmt.Println("Counter1:", counter1())  // 4
}
```

### ĞŸÑ€Ğ¸Ğ¼ĞµÑ€ 3: Ğ“ĞµĞ½ĞµÑ€Ğ°Ñ‚Ğ¾Ñ€ Ğ¿Ğ¾ÑĞ»ĞµĞ´Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒĞ½Ğ¾ÑÑ‚Ğ¸
```go
package main

import "fmt"

func fibonacci() func() int {
    a, b := 0, 1
    
    return func() int {
        result := a
        a, b = b, a+b
        return result
    }
}

func powers(base int) func() int {
    current := 1
    
    return func() int {
        result := current
        current *= base
        return result
    }
}

func main() {
    fib := fibonacci()
    fmt.Print("Ğ¤Ğ¸Ğ±Ğ¾Ğ½Ğ°Ñ‡Ñ‡Ğ¸: ")
    for i := 0; i < 10; i++ {
        fmt.Print(fib(), " ")
    }
    fmt.Println()
    
    pow2 := powers(2)
    fmt.Print("Ğ¡Ñ‚ĞµĞ¿ĞµĞ½Ğ¸ 2: ")
    for i := 0; i < 8; i++ {
        fmt.Print(pow2(), " ")
    }
    fmt.Println()
}
```

### ĞŸÑ€Ğ¸Ğ¼ĞµÑ€ 4: Ğ¤Ğ°Ğ±Ñ€Ğ¸ĞºĞ° Ñ„ÑƒĞ½ĞºÑ†Ğ¸Ğ¹ Ñ Ğ·Ğ°Ñ…Ğ²Ğ°Ñ‚Ğ¾Ğ¼ Ğ¿Ğ°Ñ€Ğ°Ğ¼ĞµÑ‚Ñ€Ğ°
```go
package main

import "fmt"

func multiplier(factor int) func(int) int {
    return func(x int) int {
        return x * factor  // factor Ğ·Ğ°Ñ…Ğ²Ğ°Ñ‡ĞµĞ½
    }
}

func greeter(prefix string) func(string) string {
    return func(name string) string {
        return prefix + ", " + name + "!"
    }
}

func main() {
    double := multiplier(2)
    triple := multiplier(3)
    half := multiplier(0)  // Ğ½Ñƒ, Ğ¿Ğ¾Ñ‡Ñ‚Ğ¸ Ğ¿Ğ¾Ğ»Ğ¾Ğ²Ğ¸Ğ½Ğ° :)
    
    fmt.Println("double(5) =", double(5))  // 10
    fmt.Println("triple(5) =", triple(5))  // 15
    
    hello := greeter("ĞŸÑ€Ğ¸Ğ²ĞµÑ‚")
    goodbye := greeter("Ğ”Ğ¾ ÑĞ²Ğ¸Ğ´Ğ°Ğ½Ğ¸Ñ")
    
    fmt.Println(hello("ĞĞ½Ğ½Ğ°"))    // ĞŸÑ€Ğ¸Ğ²ĞµÑ‚, ĞĞ½Ğ½Ğ°!
    fmt.Println(goodbye("Ğ‘Ğ¾Ñ€Ğ¸Ñ")) // Ğ”Ğ¾ ÑĞ²Ğ¸Ğ´Ğ°Ğ½Ğ¸Ñ, Ğ‘Ğ¾Ñ€Ğ¸Ñ!
}
```

### ĞŸÑ€Ğ¸Ğ¼ĞµÑ€ 5: ĞĞºĞºÑƒĞ¼ÑƒĞ»ÑÑ‚Ğ¾Ñ€
```go
package main

import "fmt"

func makeAccumulator(initial int) (func(int) int, func() int) {
    sum := initial
    
    add := func(n int) int {
        sum += n
        return sum
    }
    
    get := func() int {
        return sum
    }
    
    return add, get
}

func main() {
    add, get := makeAccumulator(0)
    
    fmt.Println("ĞĞ°Ñ‡Ğ°Ğ»Ğ¾:", get())  // 0
    fmt.Println("Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ¸Ğ»Ğ¸ 5:", add(5))   // 5
    fmt.Println("Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ¸Ğ»Ğ¸ 10:", add(10)) // 15
    fmt.Println("Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ¸Ğ»Ğ¸ 3:", add(3))   // 18
    fmt.Println("Ğ˜Ñ‚Ğ¾Ğ³Ğ¾:", get())  // 18
}
```

### ĞŸÑ€Ğ¸Ğ¼ĞµÑ€ 6: ĞœĞµĞ¼Ğ¾Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ (ĞºÑÑˆĞ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ)
```go
package main

import "fmt"

func memoize(fn func(int) int) func(int) int {
    cache := make(map[int]int)
    
    return func(n int) int {
        if result, ok := cache[n]; ok {
            fmt.Printf("  (ĞºÑÑˆ Ğ´Ğ»Ñ %d)\n", n)
            return result
        }
        result := fn(n)
        cache[n] = result
        return result
    }
}

func slowSquare(n int) int {
    fmt.Printf("  Ğ²Ñ‹Ñ‡Ğ¸ÑĞ»ÑĞµĞ¼ %dÂ²...\n", n)
    return n * n
}

func main() {
    cachedSquare := memoize(slowSquare)
    
    fmt.Println("square(5) =", cachedSquare(5))
    fmt.Println("square(3) =", cachedSquare(3))
    fmt.Println("square(5) =", cachedSquare(5))  // Ğ¸Ğ· ĞºÑÑˆĞ°
    fmt.Println("square(3) =", cachedSquare(3))  // Ğ¸Ğ· ĞºÑÑˆĞ°
    fmt.Println("square(7) =", cachedSquare(7))
}
```

### ĞŸÑ€Ğ¸Ğ¼ĞµÑ€ 7: Middleware / Ğ”ĞµĞºĞ¾Ñ€Ğ°Ñ‚Ğ¾Ñ€Ñ‹
```go
package main

import (
    "fmt"
    "time"
)

type Operation func(int, int) int

func withLogging(name string, op Operation) Operation {
    return func(a, b int) int {
        fmt.Printf("[LOG] %s(%d, %d) Ğ²Ñ‹Ğ·Ğ²Ğ°Ğ½Ğ°\n", name, a, b)
        result := op(a, b)
        fmt.Printf("[LOG] %s Ğ²ĞµÑ€Ğ½ÑƒĞ»Ğ° %d\n", name, result)
        return result
    }
}

func withTiming(op Operation) Operation {
    return func(a, b int) int {
        start := time.Now()
        result := op(a, b)
        fmt.Printf("[TIME] Ğ’Ñ‹Ğ¿Ğ¾Ğ»Ğ½ĞµĞ½Ğ¾ Ğ·Ğ° %v\n", time.Since(start))
        return result
    }
}

func add(a, b int) int { return a + b }

func main() {
    // ĞĞ±Ğ¾Ñ€Ğ°Ñ‡Ğ¸Ğ²Ğ°ĞµĞ¼ Ñ„ÑƒĞ½ĞºÑ†Ğ¸Ñ
    loggedAdd := withLogging("add", add)
    result := loggedAdd(5, 3)
    fmt.Println("Ğ ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚:", result)
    
    fmt.Println()
    
    // ĞšĞ¾Ğ¼Ğ±Ğ¸Ğ½Ğ¸Ñ€ÑƒĞµĞ¼ Ğ´ĞµĞºĞ¾Ñ€Ğ°Ñ‚Ğ¾Ñ€Ñ‹
    timedLoggedAdd := withTiming(withLogging("add", add))
    timedLoggedAdd(10, 20)
}
```

### ĞŸÑ€Ğ¸Ğ¼ĞµÑ€ 8: Ğ¡Ğ¾ÑÑ‚Ğ¾ÑĞ½Ğ¸Ğµ Ğ¾Ğ±ÑŠĞµĞºÑ‚Ğ° Ñ‡ĞµÑ€ĞµĞ· Ğ·Ğ°Ğ¼Ñ‹ĞºĞ°Ğ½Ğ¸Ñ
```go
package main

import "fmt"

type Stack struct {
    Push func(int)
    Pop  func() (int, bool)
    Peek func() (int, bool)
    Size func() int
}

func NewStack() Stack {
    data := []int{}  // Ğ¿Ñ€Ğ¸Ğ²Ğ°Ñ‚Ğ½Ğ¾Ğµ ÑĞ¾ÑÑ‚Ğ¾ÑĞ½Ğ¸Ğµ
    
    return Stack{
        Push: func(val int) {
            data = append(data, val)
        },
        Pop: func() (int, bool) {
            if len(data) == 0 {
                return 0, false
            }
            val := data[len(data)-1]
            data = data[:len(data)-1]
            return val, true
        },
        Peek: func() (int, bool) {
            if len(data) == 0 {
                return 0, false
            }
            return data[len(data)-1], true
        },
        Size: func() int {
            return len(data)
        },
    }
}

func main() {
    stack := NewStack()
    
    stack.Push(1)
    stack.Push(2)
    stack.Push(3)
    
    fmt.Println("Ğ Ğ°Ğ·Ğ¼ĞµÑ€:", stack.Size())  // 3
    
    if val, ok := stack.Peek(); ok {
        fmt.Println("Ğ’ĞµÑ€ÑˆĞ¸Ğ½Ğ°:", val)  // 3
    }
    
    for stack.Size() > 0 {
        val, _ := stack.Pop()
        fmt.Println("Pop:", val)
    }
}
```

---

## âš ï¸ Ğ§Ğ°ÑÑ‚Ñ‹Ğµ Ğ¾ÑˆĞ¸Ğ±ĞºĞ¸

### 1. Ğ—Ğ°Ñ…Ğ²Ğ°Ñ‚ Ğ¿ĞµÑ€ĞµĞ¼ĞµĞ½Ğ½Ğ¾Ğ¹ Ñ†Ğ¸ĞºĞ»Ğ°
```go
// âŒ ĞĞµĞ¿Ñ€Ğ°Ğ²Ğ¸Ğ»ÑŒĞ½Ğ¾ â€” Ğ²ÑĞµ Ñ„ÑƒĞ½ĞºÑ†Ğ¸Ğ¸ Ğ²Ğ¸Ğ´ÑÑ‚ Ğ¿Ğ¾ÑĞ»ĞµĞ´Ğ½ĞµĞµ Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ğµ i
funcs := []func(){}
for i := 0; i < 3; i++ {
    funcs = append(funcs, func() {
        fmt.Println(i)  // Ğ²ÑĞµ Ğ²Ñ‹Ğ²ĞµĞ´ÑƒÑ‚ 3!
    })
}
for _, f := range funcs {
    f()  // 3, 3, 3
}

// âœ… ĞŸÑ€Ğ°Ğ²Ğ¸Ğ»ÑŒĞ½Ğ¾ â€” ÑĞ¾Ğ·Ğ´Ğ°Ñ‘Ğ¼ ĞºĞ¾Ğ¿Ğ¸Ñ
funcs := []func(){}
for i := 0; i < 3; i++ {
    i := i  // ÑĞ¾Ğ·Ğ´Ğ°Ñ‘Ğ¼ Ğ½Ğ¾Ğ²ÑƒÑ Ğ¿ĞµÑ€ĞµĞ¼ĞµĞ½Ğ½ÑƒÑ
    funcs = append(funcs, func() {
        fmt.Println(i)
    })
}
for _, f := range funcs {
    f()  // 0, 1, 2
}
```

### 2. ĞĞµĞ¿Ğ¾Ğ½Ğ¸Ğ¼Ğ°Ğ½Ğ¸Ğµ Ğ²Ñ€ĞµĞ¼ĞµĞ½Ğ¸ Ğ·Ğ°Ñ…Ğ²Ğ°Ñ‚Ğ°
```go
// âš ï¸ ĞÑÑ‚Ğ¾Ñ€Ğ¾Ğ¶Ğ½Ğ¾ â€” Ğ·Ğ°Ğ¼Ñ‹ĞºĞ°Ğ½Ğ¸Ğµ Ğ²Ğ¸Ğ´Ğ¸Ñ‚ Ğ¢Ğ•ĞšĞ£Ğ©Ğ•Ğ• Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ğµ
x := 10
fn := func() { fmt.Println(x) }

x = 20
fn()  // Ğ’Ñ‹Ğ²ĞµĞ´ĞµÑ‚ 20, Ğ½Ğµ 10!

// Ğ•ÑĞ»Ğ¸ Ğ½ÑƒĞ¶Ğ½Ğ¾ "Ğ·Ğ°Ğ¼Ğ¾Ñ€Ğ¾Ğ·Ğ¸Ñ‚ÑŒ" Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ğµ:
x := 10
fn := func(val int) func() {
    return func() { fmt.Println(val) }
}(x)

x = 20
fn()  // Ğ’Ñ‹Ğ²ĞµĞ´ĞµÑ‚ 10
```

### 3. Ğ£Ñ‚ĞµÑ‡ĞºĞ° Ğ¿Ğ°Ğ¼ÑÑ‚Ğ¸ Ñ‡ĞµÑ€ĞµĞ· Ğ·Ğ°Ğ¼Ñ‹ĞºĞ°Ğ½Ğ¸Ñ
```go
// âš ï¸ ĞÑÑ‚Ğ¾Ñ€Ğ¾Ğ¶Ğ½Ğ¾ â€” Ğ±Ğ¾Ğ»ÑŒÑˆĞ¸Ğµ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ Ğ¾ÑÑ‚Ğ°ÑÑ‚ÑÑ Ğ² Ğ¿Ğ°Ğ¼ÑÑ‚Ğ¸
func createLeak() func() int {
    hugeData := make([]byte, 100*1024*1024)  // 100 MB
    small := len(hugeData)
    
    return func() int {
        return small  // hugeData Ğ²ÑÑ‘ ĞµÑ‰Ñ‘ Ğ² Ğ¿Ğ°Ğ¼ÑÑ‚Ğ¸!
    }
}

// âœ… Ğ›ÑƒÑ‡ÑˆĞµ â€” ÑĞ²Ğ½Ğ¾ Ğ¾Ğ±Ğ½ÑƒĞ»ÑĞµĞ¼ Ğ½ĞµĞ½ÑƒĞ¶Ğ½Ñ‹Ğµ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ
func noLeak() func() int {
    hugeData := make([]byte, 100*1024*1024)
    small := len(hugeData)
    hugeData = nil  // Ğ¾ÑĞ²Ğ¾Ğ±Ğ¾Ğ¶Ğ´Ğ°ĞµĞ¼ Ğ¿Ğ°Ğ¼ÑÑ‚ÑŒ
    
    return func() int {
        return small
    }
}
```

---

## ğŸ“ ĞŸÑ€Ğ°ĞºÑ‚Ğ¸ĞºĞ°

### Ğ—Ğ°Ğ´Ğ°Ğ½Ğ¸Ğµ 1: Once (Ğ¾Ğ´Ğ¸Ğ½ Ñ€Ğ°Ğ·)
Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ¹Ñ‚Ğµ Ñ„ÑƒĞ½ĞºÑ†Ğ¸Ñ, ĞºĞ¾Ñ‚Ğ¾Ñ€Ğ°Ñ Ğ²Ñ‹Ğ¿Ğ¾Ğ»Ğ½ÑĞµÑ‚ Ğ´ĞµĞ¹ÑÑ‚Ğ²Ğ¸Ğµ Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ Ğ¾Ğ´Ğ¸Ğ½ Ñ€Ğ°Ğ·.

<details>
<summary>Ğ ĞµÑˆĞµĞ½Ğ¸Ğµ</summary>

```go
package main

import "fmt"

func once(fn func()) func() {
    called := false
    return func() {
        if !called {
            called = true
            fn()
        }
    }
}

func main() {
    init := once(func() {
        fmt.Println("Ğ˜Ğ½Ğ¸Ñ†Ğ¸Ğ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ!")
    })
    
    init()  // Ğ˜Ğ½Ğ¸Ñ†Ğ¸Ğ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ!
    init()  // Ğ½Ğ¸Ñ‡ĞµĞ³Ğ¾
    init()  // Ğ½Ğ¸Ñ‡ĞµĞ³Ğ¾
}
```
</details>

### Ğ—Ğ°Ğ´Ğ°Ğ½Ğ¸Ğµ 2: Rate Limiter
Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ¹Ñ‚Ğµ Ñ„ÑƒĞ½ĞºÑ†Ğ¸Ñ, Ğ¾Ğ³Ñ€Ğ°Ğ½Ğ¸Ñ‡Ğ¸Ğ²Ğ°ÑÑ‰ÑƒÑ Ñ‡Ğ°ÑÑ‚Ğ¾Ñ‚Ñƒ Ğ²Ñ‹Ğ·Ğ¾Ğ²Ğ¾Ğ².

<details>
<summary>Ğ ĞµÑˆĞµĞ½Ğ¸Ğµ</summary>

```go
package main

import (
    "fmt"
    "time"
)

func rateLimiter(limit int, period time.Duration) func() bool {
    calls := 0
    lastReset := time.Now()
    
    return func() bool {
        now := time.Now()
        if now.Sub(lastReset) > period {
            calls = 0
            lastReset = now
        }
        
        if calls < limit {
            calls++
            return true  // Ñ€Ğ°Ğ·Ñ€ĞµÑˆĞµĞ½Ğ¾
        }
        return false  // Ğ¿Ñ€ĞµĞ²Ñ‹ÑˆĞµĞ½ Ğ»Ğ¸Ğ¼Ğ¸Ñ‚
    }
}

func main() {
    limiter := rateLimiter(3, time.Second)
    
    for i := 0; i < 5; i++ {
        if limiter() {
            fmt.Println("Ğ—Ğ°Ğ¿Ñ€Ğ¾Ñ", i+1, "- OK")
        } else {
            fmt.Println("Ğ—Ğ°Ğ¿Ñ€Ğ¾Ñ", i+1, "- ĞĞ¢ĞšĞ›ĞĞĞĞ")
        }
    }
}
```
</details>

### Ğ—Ğ°Ğ´Ğ°Ğ½Ğ¸Ğµ 3: Debounce
Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ¹Ñ‚Ğµ Ñ„ÑƒĞ½ĞºÑ†Ğ¸Ñ, Ğ¾Ñ‚ĞºĞ»Ğ°Ğ´Ñ‹Ğ²Ğ°ÑÑ‰ÑƒÑ Ğ²Ñ‹Ğ¿Ğ¾Ğ»Ğ½ĞµĞ½Ğ¸Ğµ Ğ´Ğ¾ Ğ¿Ğ°ÑƒĞ·Ñ‹.

<details>
<summary>Ğ ĞµÑˆĞµĞ½Ğ¸Ğµ</summary>

```go
package main

import (
    "fmt"
    "time"
)

func debounce(fn func(), delay time.Duration) func() {
    var timer *time.Timer
    
    return func() {
        if timer != nil {
            timer.Stop()
        }
        timer = time.AfterFunc(delay, fn)
    }
}

func main() {
    search := debounce(func() {
        fmt.Println("Ğ’Ñ‹Ğ¿Ğ¾Ğ»Ğ½ÑĞµĞ¼ Ğ¿Ğ¾Ğ¸ÑĞº...")
    }, 300*time.Millisecond)
    
    // Ğ˜Ğ¼Ğ¸Ñ‚Ğ°Ñ†Ğ¸Ñ Ğ±Ñ‹ÑÑ‚Ñ€Ğ¾Ğ³Ğ¾ Ğ²Ğ²Ğ¾Ğ´Ğ°
    search()
    time.Sleep(100 * time.Millisecond)
    search()
    time.Sleep(100 * time.Millisecond)
    search()
    
    // Ğ–Ğ´Ñ‘Ğ¼ Ğ²Ñ‹Ğ¿Ğ¾Ğ»Ğ½ĞµĞ½Ğ¸Ñ
    time.Sleep(500 * time.Millisecond)
}
```
</details>

### Ğ—Ğ°Ğ´Ğ°Ğ½Ğ¸Ğµ 4: Ğ“ĞµĞ½ĞµÑ€Ğ°Ñ‚Ğ¾Ñ€ ID
Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ¹Ñ‚Ğµ Ğ³ĞµĞ½ĞµÑ€Ğ°Ñ‚Ğ¾Ñ€ ÑƒĞ½Ğ¸ĞºĞ°Ğ»ÑŒĞ½Ñ‹Ñ… ID.

<details>
<summary>Ğ ĞµÑˆĞµĞ½Ğ¸Ğµ</summary>

```go
package main

import "fmt"

func idGenerator(prefix string) func() string {
    id := 0
    return func() string {
        id++
        return fmt.Sprintf("%s-%d", prefix, id)
    }
}

func main() {
    userID := idGenerator("user")
    orderID := idGenerator("order")
    
    fmt.Println(userID())   // user-1
    fmt.Println(userID())   // user-2
    fmt.Println(orderID())  // order-1
    fmt.Println(userID())   // user-3
    fmt.Println(orderID())  // order-2
}
```
</details>

---

## ğŸ”— ĞŸĞ¾Ğ»ĞµĞ·Ğ½Ñ‹Ğµ ÑÑÑ‹Ğ»ĞºĞ¸

- [A Tour of Go â€” Function closures](https://go.dev/tour/moretypes/25)
- [Go by Example â€” Closures](https://gobyexample.com/closures)
- [Effective Go â€” Functions](https://go.dev/doc/effective_go#functions)
