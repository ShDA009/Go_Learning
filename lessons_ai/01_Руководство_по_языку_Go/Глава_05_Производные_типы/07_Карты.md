# –ö–∞—Ä—Ç—ã (Maps) –≤ Go

## üí° –ö–ª—é—á–µ–≤—ã–µ –∏–¥–µ–∏

1. **–ö–∞—Ä—Ç–∞ (map)** ‚Äî —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö "–∫–ª—é—á-–∑–Ω–∞—á–µ–Ω–∏–µ" (—Ö–µ—à-—Ç–∞–±–ª–∏—Ü–∞, —Å–ª–æ–≤–∞—Ä—å)
2. **–°—Å—ã–ª–æ—á–Ω—ã–π —Ç–∏–ø** ‚Äî –∫–∞—Ä—Ç—É –Ω—É–∂–Ω–æ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –ø–µ—Ä–µ–¥ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º
3. **–£–Ω–∏–∫–∞–ª—å–Ω—ã–µ –∫–ª—é—á–∏** ‚Äî –∫–∞–∂–¥—ã–π –∫–ª—é—á –º–æ–∂–µ—Ç –≤—Å—Ç—Ä–µ—á–∞—Ç—å—Å—è —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω —Ä–∞–∑
4. **–ù–µ—É–ø–æ—Ä—è–¥–æ—á–µ–Ω–Ω–æ—Å—Ç—å** ‚Äî –ø–æ—Ä—è–¥–æ–∫ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –Ω–µ –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω
5. **–ë—ã—Å—Ç—Ä—ã–π –¥–æ—Å—Ç—É–ø** ‚Äî O(1) –¥–ª—è —á—Ç–µ–Ω–∏—è, –∑–∞–ø–∏—Å–∏ –∏ —É–¥–∞–ª–µ–Ω–∏—è

---

## üìñ –¢–µ–æ—Ä–∏—è

### –ß—Ç–æ —Ç–∞–∫–æ–µ –∫–∞—Ä—Ç–∞ (map)?

**–ö–∞—Ä—Ç–∞** (map, —Å–ª–æ–≤–∞—Ä—å, —Ö–µ—à-—Ç–∞–±–ª–∏—Ü–∞) ‚Äî —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö, —Å–≤—è–∑—ã–≤–∞—é—â–∞—è –∫–ª—é—á–∏ —Å–æ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏. –í –¥—Ä—É–≥–∏—Ö —è–∑—ã–∫–∞—Ö:
- Python: `dict`
- JavaScript: `object` –∏–ª–∏ `Map`
- Java: `HashMap`

```go
ages := map[string]int{
    "Alice": 25,
    "Bob":   30,
}
fmt.Println(ages["Alice"])  // 25
```

### –ö–ª—é—á–∏ –∏ –∑–Ω–∞—á–µ–Ω–∏—è

**–ö–ª—é—á–∏** –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å **—Å—Ä–∞–≤–Ω–∏–º—ã–º–∏** (comparable):
- ‚úÖ int, string, float, bool, struct (–±–µ–∑ —Å—Ä–µ–∑–æ–≤), —É–∫–∞–∑–∞—Ç–µ–ª–∏
- ‚ùå —Å—Ä–µ–∑—ã, map, —Ñ—É–Ω–∫—Ü–∏–∏

**–ó–Ω–∞—á–µ–Ω–∏—è** –º–æ–≥—É—Ç –±—ã—Ç—å –ª—é–±–æ–≥–æ —Ç–∏–ø–∞.

### nil map ‚Äî –æ–ø–∞—Å–Ω–æ—Å—Ç—å!

–ù–µ–∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –∫–∞—Ä—Ç–∞ = nil. –ß–∏—Ç–∞—Ç—å –º–æ–∂–Ω–æ, –ø–∏—Å–∞—Ç—å –Ω–µ–ª—å–∑—è:

```go
var m map[string]int  // nil

v := m["key"]  // OK, v = 0 (–Ω—É–ª–µ–≤–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ)
m["key"] = 1   // PANIC! assignment to entry in nil map
```

**–í—Å–µ–≥–¥–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–π—Ç–µ –∫–∞—Ä—Ç—É:**
```go
m := make(map[string]int)
// –∏–ª–∏
m := map[string]int{}
```

### –ß—Ç–µ–Ω–∏–µ —Å –ø—Ä–æ–≤–µ—Ä–∫–æ–π —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è

–ß—Ç–µ–Ω–∏–µ –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ –∫–ª—é—á–∞ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –Ω—É–ª–µ–≤–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ:

```go
m := map[string]int{"a": 1}
fmt.Println(m["b"])  // 0 (–∫–ª—é—á–∞ –Ω–µ—Ç, –Ω–æ –æ—à–∏–±–∫–∏ –Ω–µ—Ç)
```

–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ "comma ok" –∏–¥–∏–æ–º—É –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏:

```go
value, ok := m["b"]
if ok {
    fmt.Println("Found:", value)
} else {
    fmt.Println("Not found")
}

// –ò–ª–∏ –∫–æ—Ä–æ—á–µ:
if value, ok := m["b"]; ok {
    fmt.Println("Found:", value)
}
```

### –ü–æ—Ä—è–¥–æ–∫ –Ω–µ –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω

–ü—Ä–∏ –∏—Ç–µ—Ä–∞—Ü–∏–∏ –ø–æ—Ä—è–¥–æ–∫ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ **—Å–ª—É—á–∞–π–Ω—ã–π**:

```go
m := map[string]int{"a": 1, "b": 2, "c": 3}

for k, v := range m {
    fmt.Println(k, v)  // –ø–æ—Ä—è–¥–æ–∫ —Ä–∞–∑–Ω—ã–π –ø—Ä–∏ –∫–∞–∂–¥–æ–º –∑–∞–ø—É—Å–∫–µ!
}
```

–ï—Å–ª–∏ –Ω—É–∂–µ–Ω –ø–æ—Ä—è–¥–æ–∫ ‚Äî –æ—Ç—Å–æ—Ä—Ç–∏—Ä—É–π—Ç–µ –∫–ª—é—á–∏ –æ—Ç–¥–µ–ª—å–Ω–æ.

### –ö–∞—Ä—Ç—ã ‚Äî —Å—Å—ã–ª–æ—á–Ω—ã–π —Ç–∏–ø

–ö–∞—Ä—Ç–∞ –ø–µ—Ä–µ–¥–∞—ë—Ç—Å—è –ø–æ —Å—Å—ã–ª–∫–µ (–∫–∞–∫ —Å—Ä–µ–∑):

```go
func modify(m map[string]int) {
    m["new"] = 100  // –∏–∑–º–µ–Ω–∏—Ç –æ—Ä–∏–≥–∏–Ω–∞–ª!
}

m := map[string]int{"a": 1}
modify(m)
fmt.Println(m["new"])  // 100
```

### –í–ª–æ–∂–µ–Ω–Ω—ã–µ –∫–∞—Ä—Ç—ã

–ö–∞—Ä—Ç–∞ –∑–Ω–∞—á–µ–Ω–∏–π-–∫–∞—Ä—Ç:

```go
users := map[string]map[string]int{
    "Alice": {"score": 100, "level": 5},
    "Bob":   {"score": 80, "level": 3},
}
fmt.Println(users["Alice"]["score"])  // 100
```

**–û—Å—Ç–æ—Ä–æ–∂–Ω–æ:** –í–ª–æ–∂–µ–Ω–Ω—ã–µ –∫–∞—Ä—Ç—ã –Ω—É–∂–Ω–æ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å:
```go
users["Charlie"] = make(map[string]int)  // —Å–Ω–∞—á–∞–ª–∞ —Å–æ–∑–¥–∞—Ç—å
users["Charlie"]["score"] = 50           // –ø–æ—Ç–æ–º –ø–∏—Å–∞—Ç—å
```

---

## üìã –°–∏–Ω—Ç–∞–∫—Å–∏—Å

### –û–±—ä—è–≤–ª–µ–Ω–∏–µ –∏ —Å–æ–∑–¥–∞–Ω–∏–µ

```go
var m map[KeyType]ValueType        // nil –∫–∞—Ä—Ç–∞ (–Ω–µ–ª—å–∑—è –ø–∏—Å–∞—Ç—å!)
m := map[string]int{}              // –ø—É—Å—Ç–∞—è –∫–∞—Ä—Ç–∞
m := map[string]int{"a": 1, "b": 2} // —Å –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–µ–π
m := make(map[string]int)          // —á–µ—Ä–µ–∑ make
m := make(map[string]int, 100)     // —Å –Ω–∞—á–∞–ª—å–Ω–æ–π —ë–º–∫–æ—Å—Ç—å—é
```

### –û—Å–Ω–æ–≤–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏

```go
m[key] = value                     // –∑–∞–ø–∏—Å—å/–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ
value := m[key]                    // —á—Ç–µ–Ω–∏–µ
value, ok := m[key]                // —á—Ç–µ–Ω–∏–µ —Å –ø—Ä–æ–≤–µ—Ä–∫–æ–π
delete(m, key)                     // —É–¥–∞–ª–µ–Ω–∏–µ
len(m)                             // –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —ç–ª–µ–º–µ–Ω—Ç–æ–≤
```

---

## üíª –ü—Ä–∏–º–µ—Ä—ã –∫–æ–¥–∞

### –°–æ–∑–¥–∞–Ω–∏–µ –∏ –±–∞–∑–æ–≤—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏

```go
package main

import "fmt"

func main() {
    // –°–æ–∑–¥–∞–Ω–∏–µ –∫–∞—Ä—Ç—ã —Å –ª–∏—Ç–µ—Ä–∞–ª–æ–º
    ages := map[string]int{
        "Tom":   30,
        "Alice": 25,
        "Bob":   35,
    }
    
    // –ß—Ç–µ–Ω–∏–µ
    fmt.Println("–í–æ–∑—Ä–∞—Å—Ç Tom:", ages["Tom"])  // 30
    
    // –ó–∞–ø–∏—Å—å –Ω–æ–≤–æ–≥–æ —ç–ª–µ–º–µ–Ω—Ç–∞
    ages["Kate"] = 28
    
    // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ
    ages["Tom"] = 31
    
    // –£–¥–∞–ª–µ–Ω–∏–µ
    delete(ages, "Bob")
    
    // –í—ã–≤–æ–¥ –≤—Å–µ–π –∫–∞—Ä—Ç—ã
    fmt.Println(ages)  // map[Alice:25 Kate:28 Tom:31]
}
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è –∫–ª—é—á–∞

```go
package main

import "fmt"

func main() {
    users := map[string]int{
        "admin":  1,
        "editor": 2,
    }
    
    // –°–ø–æ—Å–æ–± 1: –ø—Ä–æ–≤–µ—Ä–∫–∞ —á–µ—Ä–µ–∑ ok
    if id, ok := users["admin"]; ok {
        fmt.Println("admin –Ω–∞–π–¥–µ–Ω, ID:", id)
    }
    
    // –°–ø–æ—Å–æ–± 2: –ø—Ä–æ–≤–µ—Ä–∫–∞ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏—è
    if _, ok := users["guest"]; !ok {
        fmt.Println("guest –Ω–µ –Ω–∞–π–¥–µ–Ω")
    }
    
    // ‚ùå –û–ü–ê–°–ù–û: —á—Ç–µ–Ω–∏–µ –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ –∫–ª—é—á–∞ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –Ω—É–ª–µ–≤–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ
    fmt.Println("guest ID:", users["guest"])  // 0 (–Ω—É–ª–µ–≤–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ int)
    
    // –ö–∞–∫ –æ—Ç–ª–∏—á–∏—Ç—å "–∫–ª—é—á —Å–æ –∑–Ω–∞—á–µ–Ω–∏–µ–º 0" –æ—Ç "–∫–ª—é—á–∞ –Ω–µ—Ç"?
    users["viewer"] = 0  // —è–≤–Ω–æ —É—Å—Ç–∞–Ω–æ–≤–∏–ª–∏ 0
    
    id1 := users["viewer"]  // 0
    id2 := users["unknown"] // —Ç–æ–∂–µ 0!
    
    // –¢–æ–ª—å–∫–æ —Å ok –º–æ–∂–Ω–æ —Ä–∞–∑–ª–∏—á–∏—Ç—å
    _, ok1 := users["viewer"]  // ok1 = true
    _, ok2 := users["unknown"] // ok2 = false
    fmt.Println("viewer exists:", ok1, "unknown exists:", ok2)
}
```

### –ü–µ—Ä–µ–±–æ—Ä –∫–∞—Ä—Ç—ã

```go
package main

import "fmt"

func main() {
    scores := map[string]int{
        "Alice": 95,
        "Bob":   87,
        "Carol": 92,
    }
    
    // –ü–µ—Ä–µ–±–æ—Ä –∫–ª—é—á–µ–π –∏ –∑–Ω–∞—á–µ–Ω–∏–π
    for name, score := range scores {
        fmt.Printf("%s: %d\n", name, score)
    }
    
    // –¢–æ–ª—å–∫–æ –∫–ª—é—á–∏
    fmt.Println("\n–¢–æ–ª—å–∫–æ –∏–º–µ–Ω–∞:")
    for name := range scores {
        fmt.Println(name)
    }
    
    // ‚ö†Ô∏è –ü–æ—Ä—è–¥–æ–∫ –ø–µ—Ä–µ–±–æ—Ä–∞ –°–õ–£–ß–ê–ô–ù–´–ô –ø—Ä–∏ –∫–∞–∂–¥–æ–º –∑–∞–ø—É—Å–∫–µ!
}
```

### –ö–∞—Ä—Ç–∞ –∫–∞–∫ –º–Ω–æ–∂–µ—Å—Ç–≤–æ (Set)

```go
package main

import "fmt"

func main() {
    // –ò—Å–ø–æ–ª—å–∑—É–µ–º map[T]bool –∫–∞–∫ –º–Ω–æ–∂–µ—Å—Ç–≤–æ
    set := make(map[string]bool)
    
    // –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —ç–ª–µ–º–µ–Ω—Ç–æ–≤
    set["apple"] = true
    set["banana"] = true
    set["orange"] = true
    
    // –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è
    if set["apple"] {
        fmt.Println("apple –≤ –º–Ω–æ–∂–µ—Å—Ç–≤–µ")
    }
    
    if !set["grape"] {
        fmt.Println("grape –ù–ï –≤ –º–Ω–æ–∂–µ—Å—Ç–≤–µ")
    }
    
    // –£–¥–∞–ª–µ–Ω–∏–µ
    delete(set, "banana")
    
    // –ë–æ–ª–µ–µ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã–π –≤–∞—Ä–∏–∞–Ω—Ç: map[T]struct{}
    efficientSet := make(map[string]struct{})
    efficientSet["item1"] = struct{}{}
    
    if _, exists := efficientSet["item1"]; exists {
        fmt.Println("item1 —Å—É—â–µ—Å—Ç–≤—É–µ—Ç")
    }
}
```

### –ü–æ–¥—Å—á—ë—Ç —ç–ª–µ–º–µ–Ω—Ç–æ–≤

```go
package main

import "fmt"

func main() {
    text := "hello world hello go hello"
    words := []string{"hello", "world", "hello", "go", "hello"}
    
    // –ü–æ–¥—Å—á—ë—Ç —Å–ª–æ–≤
    counter := make(map[string]int)
    for _, word := range words {
        counter[word]++  // –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç—Å—è –Ω—É–ª—ë–º
    }
    
    fmt.Println("–ß–∞—Å—Ç–æ—Ç–∞ —Å–ª–æ–≤:")
    for word, count := range counter {
        fmt.Printf("  %s: %d\n", word, count)
    }
    
    // –ü–æ–¥—Å—á—ë—Ç —Å–∏–º–≤–æ–ª–æ–≤
    charCount := make(map[rune]int)
    for _, char := range text {
        charCount[char]++
    }
    
    fmt.Println("\n–ß–∞—Å—Ç–æ—Ç–∞ —Å–∏–º–≤–æ–ª–æ–≤:")
    for char, count := range charCount {
        fmt.Printf("  '%c': %d\n", char, count)
    }
}
```

### –ö–∞—Ä—Ç–∞ —Å —Å–æ—Å—Ç–∞–≤–Ω—ã–º–∏ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏

```go
package main

import "fmt"

type User struct {
    Name  string
    Email string
    Age   int
}

func main() {
    // –ö–∞—Ä—Ç–∞ —Å–æ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞–º–∏
    users := map[int]User{
        1: {Name: "Tom", Email: "tom@mail.com", Age: 30},
        2: {Name: "Alice", Email: "alice@mail.com", Age: 25},
    }
    
    // –î–æ–±–∞–≤–ª–µ–Ω–∏–µ
    users[3] = User{Name: "Bob", Email: "bob@mail.com", Age: 35}
    
    // –ß—Ç–µ–Ω–∏–µ
    if user, ok := users[1]; ok {
        fmt.Printf("User 1: %s (%s)\n", user.Name, user.Email)
    }
    
    // ‚ö†Ô∏è –ù–µ–ª—å–∑—è –∏–∑–º–µ–Ω—è—Ç—å –ø–æ–ª—è —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –Ω–∞–ø—Ä—è–º—É—é!
    // users[1].Age = 31  // –û–®–ò–ë–ö–ê: cannot assign to struct field
    
    // ‚úÖ –ù—É–∂–Ω–æ –∑–∞–º–µ–Ω–∏—Ç—å –≤—Å—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É
    user := users[1]
    user.Age = 31
    users[1] = user
    
    // –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —É–∫–∞–∑–∞—Ç–µ–ª–∏
    usersPtr := map[int]*User{
        1: {Name: "Tom", Age: 30},
    }
    usersPtr[1].Age = 31  // OK
}
```

### –í–ª–æ–∂–µ–Ω–Ω—ã–µ –∫–∞—Ä—Ç—ã

```go
package main

import "fmt"

func main() {
    // –ö–∞—Ä—Ç–∞ –∫–∞—Ä—Ç: —Å—Ç—Ä–∞–Ω–∞ -> –≥–æ—Ä–æ–¥ -> –Ω–∞—Å–µ–ª–µ–Ω–∏–µ
    population := map[string]map[string]int{
        "Russia": {
            "Moscow":      12000000,
            "SPb":         5000000,
            "Novosibirsk": 1600000,
        },
        "USA": {
            "New York":   8400000,
            "Los Angeles": 4000000,
        },
    }
    
    // –ß—Ç–µ–Ω–∏–µ
    fmt.Println("–ú–æ—Å–∫–≤–∞:", population["Russia"]["Moscow"])
    
    // –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –≥–æ—Ä–æ–¥–∞
    population["Russia"]["Kazan"] = 1200000
    
    // –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–π —Å—Ç—Ä–∞–Ω—ã
    population["Germany"] = map[string]int{
        "Berlin": 3700000,
    }
    
    // –ë–µ–∑–æ–ø–∞—Å–Ω–æ–µ —á—Ç–µ–Ω–∏–µ –≤–ª–æ–∂–µ–Ω–Ω–æ–π –∫–∞—Ä—Ç—ã
    if cities, ok := population["France"]; ok {
        fmt.Println("–ü–∞—Ä–∏–∂:", cities["Paris"])
    } else {
        fmt.Println("–§—Ä–∞–Ω—Ü–∏—è –Ω–µ –Ω–∞–π–¥–µ–Ω–∞")
    }
}
```

### –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –∫–∞—Ä—Ç

```go
package main

import (
    "fmt"
    "reflect"
)

func main() {
    m1 := map[string]int{"a": 1, "b": 2}
    m2 := map[string]int{"a": 1, "b": 2}
    m3 := map[string]int{"a": 1, "b": 3}
    
    // –ù–µ–ª—å–∑—è —Å—Ä–∞–≤–Ω–∏–≤–∞—Ç—å –∫–∞—Ä—Ç—ã –Ω–∞–ø—Ä—è–º—É—é: m1 == m2 ‚Äî –æ—à–∏–±–∫–∞
    
    // –ò—Å–ø–æ–ª—å–∑—É–µ–º reflect.DeepEqual
    fmt.Println("m1 == m2:", reflect.DeepEqual(m1, m2))  // true
    fmt.Println("m1 == m3:", reflect.DeepEqual(m1, m3))  // false
    
    // –ò–ª–∏ —Å–≤–æ—è —Ñ—É–Ω–∫—Ü–∏—è
    equal := func(a, b map[string]int) bool {
        if len(a) != len(b) {
            return false
        }
        for k, v := range a {
            if bv, ok := b[k]; !ok || bv != v {
                return false
            }
        }
        return true
    }
    
    fmt.Println("equal(m1, m2):", equal(m1, m2))
}
```

### –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –¥–∞–Ω–Ω—ã—Ö

```go
package main

import "fmt"

type Person struct {
    Name string
    Age  int
    City string
}

func main() {
    people := []Person{
        {"Tom", 30, "Moscow"},
        {"Alice", 25, "SPb"},
        {"Bob", 35, "Moscow"},
        {"Kate", 28, "SPb"},
        {"John", 32, "Moscow"},
    }
    
    // –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –ø–æ –≥–æ—Ä–æ–¥—É
    byCity := make(map[string][]Person)
    for _, p := range people {
        byCity[p.City] = append(byCity[p.City], p)
    }
    
    fmt.Println("–õ—é–¥–∏ –ø–æ –≥–æ—Ä–æ–¥–∞–º:")
    for city, persons := range byCity {
        fmt.Printf("\n%s:\n", city)
        for _, p := range persons {
            fmt.Printf("  - %s (%d –ª–µ—Ç)\n", p.Name, p.Age)
        }
    }
}
```

---

## ‚ö†Ô∏è –ß–∞—Å—Ç—ã–µ –æ—à–∏–±–∫–∏

### 1. –ó–∞–ø–∏—Å—å –≤ nil –∫–∞—Ä—Ç—É

```go
// ‚ùå –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û ‚Äî panic: assignment to entry in nil map
var m map[string]int
m["key"] = 1

// ‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û ‚Äî –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º –∫–∞—Ä—Ç—É
m := make(map[string]int)
m["key"] = 1

// –∏–ª–∏
m := map[string]int{}
m["key"] = 1
```

### 2. –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è –∫–ª—é—á–∞

```go
m := map[string]int{"zero": 0}

// ‚ùå –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û ‚Äî –Ω–µ–ª—å–∑—è –æ—Ç–ª–∏—á–∏—Ç—å "–Ω–µ—Ç –∫–ª—é—á–∞" –æ—Ç "–∑–Ω–∞—á–µ–Ω–∏–µ 0"
if m["zero"] == 0 {
    // –≠—Ç–æ –º–æ–∂–µ—Ç –±—ã—Ç—å –∫–∞–∫ "–∫–ª—é—á —Å–æ –∑–Ω–∞—á–µ–Ω–∏–µ–º 0", —Ç–∞–∫ –∏ "–∫–ª—é—á–∞ –Ω–µ—Ç"
}

// ‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û
if val, ok := m["zero"]; ok {
    fmt.Println("–ö–ª—é—á —Å—É—â–µ—Å—Ç–≤—É–µ—Ç, –∑–Ω–∞—á–µ–Ω–∏–µ:", val)
}
```

### 3. –ò–∑–º–µ–Ω–µ–Ω–∏–µ –ø–æ–ª—è —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –≤ –∫–∞—Ä—Ç–µ

```go
type User struct {
    Name string
    Age  int
}

m := map[string]User{
    "tom": {Name: "Tom", Age: 30},
}

// ‚ùå –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û ‚Äî cannot assign to struct field
// m["tom"].Age = 31

// ‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û ‚Äî –∑–∞–º–µ–Ω—è–µ–º –≤—Å—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É
user := m["tom"]
user.Age = 31
m["tom"] = user

// –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ–º —É–∫–∞–∑–∞—Ç–µ–ª–∏
m2 := map[string]*User{
    "tom": {Name: "Tom", Age: 30},
}
m2["tom"].Age = 31  // OK
```

### 4. –û–∂–∏–¥–∞–Ω–∏–µ –ø–æ—Ä—è–¥–∫–∞ –ø—Ä–∏ –∏—Ç–µ—Ä–∞—Ü–∏–∏

```go
m := map[string]int{"a": 1, "b": 2, "c": 3}

// ‚ùå –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û ‚Äî –ø–æ—Ä—è–¥–æ–∫ —Å–ª—É—á–∞–π–Ω—ã–π!
for k, v := range m {
    fmt.Println(k, v)  // –º–æ–∂–µ—Ç –±—ã—Ç—å –ª—é–±–æ–π –ø–æ—Ä—è–¥–æ–∫
}

// ‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û ‚Äî —Å–æ—Ä—Ç–∏—Ä—É–µ–º –∫–ª—é—á–∏
import "sort"

keys := make([]string, 0, len(m))
for k := range m {
    keys = append(keys, k)
}
sort.Strings(keys)

for _, k := range keys {
    fmt.Println(k, m[k])  // a:1, b:2, c:3
}
```

### 5. –ö–æ–Ω–∫—É—Ä–µ–Ω—Ç–Ω—ã–π –¥–æ—Å—Ç—É–ø –±–µ–∑ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏

```go
// ‚ùå –û–ü–ê–°–ù–û ‚Äî –≥–æ–Ω–∫–∞ –¥–∞–Ω–Ω—ã—Ö
m := make(map[string]int)
go func() { m["a"] = 1 }()
go func() { m["b"] = 2 }()

// ‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û ‚Äî –∏—Å–ø–æ–ª—å–∑—É–µ–º sync.Map –∏–ª–∏ –º—å—é—Ç–µ–∫—Å
import "sync"

var mu sync.Mutex
m := make(map[string]int)

go func() {
    mu.Lock()
    m["a"] = 1
    mu.Unlock()
}()
```

### 6. –ö–ª—é—á ‚Äî –Ω–µ—Å—Ä–∞–≤–Ω–∏–º—ã–π —Ç–∏–ø

```go
// ‚ùå –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û ‚Äî —Å—Ä–µ–∑—ã –Ω–µ–ª—å–∑—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–∞–∫ –∫–ª—é—á–∏
// m := make(map[[]int]string)  // –æ—à–∏–±–∫–∞ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏

// ‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û ‚Äî –∏—Å–ø–æ–ª—å–∑—É–µ–º –º–∞—Å—Å–∏–≤—ã –∏–ª–∏ –ø—Ä–µ–æ–±—Ä–∞–∑—É–µ–º –≤ —Å—Ç—Ä–æ–∫—É
m := make(map[[3]int]string)  // –º–∞—Å—Å–∏–≤ —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–π –¥–ª–∏–Ω—ã OK
m[[3]int{1, 2, 3}] = "value"

// –ò–ª–∏ –ø—Ä–µ–æ–±—Ä–∞–∑—É–µ–º —Å—Ä–µ–∑ –≤ —Å—Ç—Ä–æ–∫—É
import "fmt"
key := fmt.Sprint([]int{1, 2, 3})  // "[1 2 3]"
m2 := make(map[string]string)
m2[key] = "value"
```

---

## üèãÔ∏è –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ –∑–∞–¥–∞–Ω–∏—è

### –ó–∞–¥–∞–Ω–∏–µ 1: –°–æ–∑–¥–∞–Ω–∏–µ –∫–∞—Ä—Ç—ã

–°–æ–∑–¥–∞–π—Ç–µ –∫–∞—Ä—Ç—É –≤–æ–∑—Ä–∞—Å—Ç–æ–≤.

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
```
Alice: 25
Bob: 30
```

**–ö—Ä–∏—Ç–µ—Ä–∏–∏ –ø—Ä–∏—ë–º–∫–∏:**
- map[string]int
- –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–∞ —Å –¥–∞–Ω–Ω—ã–º–∏
- –î–æ—Å—Ç—É–ø –ø–æ –∫–ª—é—á—É

**–ü–æ–¥—Å–∫–∞–∑–∫–∏:**
- `m := map[string]int{"Alice": 25}`
- –î–æ—Å—Ç—É–ø: `m["Alice"]`

**–ù–∞—á–∞–ª—å–Ω—ã–π –∫–æ–¥:**
```go
package main

import "fmt"

func main() {
    ages := map[string]int{
        "Alice": 25,
        "Bob":   30,
    }
    fmt.Println("Alice:", ages["Alice"])
    fmt.Println("Bob:", ages["Bob"])
}
```

**–û–∂–∏–¥–∞–µ–º—ã–π –≤—ã–≤–æ–¥:**
```
Alice: 25
Bob: 30
```

**–ë–∞–ª–ª—ã:** 5

### –ó–∞–¥–∞–Ω–∏–µ 2: make –¥–ª—è –∫–∞—Ä—Ç

–°–æ–∑–¥–∞–π—Ç–µ –∫–∞—Ä—Ç—É —á–µ—Ä–µ–∑ make –∏ –¥–æ–±–∞–≤—å—Ç–µ —ç–ª–µ–º–µ–Ω—Ç—ã.

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
```
–°—á—ë—Ç—á–∏–∫–∏: map[a:1 b:2]
```

**–ö—Ä–∏—Ç–µ—Ä–∏–∏ –ø—Ä–∏—ë–º–∫–∏:**
- –ö–∞—Ä—Ç–∞ —Å–æ–∑–¥–∞–Ω–∞ —á–µ—Ä–µ–∑ make
- –≠–ª–µ–º–µ–Ω—Ç—ã –¥–æ–±–∞–≤–ª–µ–Ω—ã –ø–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è

**–ü–æ–¥—Å–∫–∞–∑–∫–∏:**
- `m := make(map[string]int)`
- `m["key"] = value`

**–ù–∞—á–∞–ª—å–Ω—ã–π –∫–æ–¥:**
```go
package main

import "fmt"

func main() {
    counts := make(map[string]int)
    counts["a"] = 1
    counts["b"] = 2
    fmt.Println("–°—á—ë—Ç—á–∏–∫–∏:", counts)
}
```

**–û–∂–∏–¥–∞–µ–º—ã–π –≤—ã–≤–æ–¥:**
```
–°—á—ë—Ç—á–∏–∫–∏: map[a:1 b:2]
```

**–ë–∞–ª–ª—ã:** 10

### –ó–∞–¥–∞–Ω–∏–µ 3: –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–ª—é—á–∞

–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏–µ –∫–ª—é—á–∞ –≤ –∫–∞—Ä—Ç–µ.

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
```
Alice —Å—É—â–µ—Å—Ç–≤—É–µ—Ç: true
Charlie —Å—É—â–µ—Å—Ç–≤—É–µ—Ç: false
```

**–ö—Ä–∏—Ç–µ—Ä–∏–∏ –ø—Ä–∏—ë–º–∫–∏:**
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∞ —Ñ–æ—Ä–º–∞ `v, ok := m[key]`
- ok –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞–ª–∏—á–∏–µ –∫–ª—é—á–∞

**–ü–æ–¥—Å–∫–∞–∑–∫–∏:**
- `_, ok := m["key"]`
- ok = true –µ—Å–ª–∏ –∫–ª—é—á –µ—Å—Ç—å

**–ù–∞—á–∞–ª—å–Ω—ã–π –∫–æ–¥:**
```go
package main

import "fmt"

func main() {
    ages := map[string]int{"Alice": 25, "Bob": 30}
    _, ok1 := ages["Alice"]
    _, ok2 := ages["Charlie"]
    fmt.Println("Alice —Å—É—â–µ—Å—Ç–≤—É–µ—Ç:", ok1)
    fmt.Println("Charlie —Å—É—â–µ—Å—Ç–≤—É–µ—Ç:", ok2)
}
```

**–û–∂–∏–¥–∞–µ–º—ã–π –≤—ã–≤–æ–¥:**
```
Alice —Å—É—â–µ—Å—Ç–≤—É–µ—Ç: true
Charlie —Å—É—â–µ—Å—Ç–≤—É–µ—Ç: false
```

**–ë–∞–ª–ª—ã:** 15

### –ó–∞–¥–∞–Ω–∏–µ 4: –£–¥–∞–ª–µ–Ω–∏–µ –∏–∑ –∫–∞—Ä—Ç—ã

–£–¥–∞–ª–∏—Ç–µ —ç–ª–µ–º–µ–Ω—Ç –∏–∑ –∫–∞—Ä—Ç—ã —á–µ—Ä–µ–∑ delete.

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
```
–î–æ: map[a:1 b:2 c:3]
–ü–æ—Å–ª–µ: map[a:1 c:3]
```

**–ö—Ä–∏—Ç–µ—Ä–∏–∏ –ø—Ä–∏—ë–º–∫–∏:**
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è delete
- –≠–ª–µ–º–µ–Ω—Ç —É–¥–∞–ª—ë–Ω –∏–∑ –∫–∞—Ä—Ç—ã

**–ü–æ–¥—Å–∫–∞–∑–∫–∏:**
- `delete(m, "key")`
- delete –Ω–µ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –Ω–∏—á–µ–≥–æ

**–ù–∞—á–∞–ª—å–Ω—ã–π –∫–æ–¥:**
```go
package main

import "fmt"

func main() {
    m := map[string]int{"a": 1, "b": 2, "c": 3}
    fmt.Println("–î–æ:", m)
    delete(m, "b")
    fmt.Println("–ü–æ—Å–ª–µ:", m)
}
```

**–û–∂–∏–¥–∞–µ–º—ã–π –≤—ã–≤–æ–¥:**
```
–î–æ: map[a:1 b:2 c:3]
–ü–æ—Å–ª–µ: map[a:1 c:3]
```

**–ë–∞–ª–ª—ã:** 10

### –ó–∞–¥–∞–Ω–∏–µ 5: –ü–µ—Ä–µ–±–æ—Ä –∫–∞—Ä—Ç—ã

–ü–µ—Ä–µ–±–µ—Ä–∏—Ç–µ –∫–∞—Ä—Ç—É –∏ –≤—ã–≤–µ–¥–∏—Ç–µ –æ—Ç—Å–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∫–ª—é—á–∏.

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
```
–ê–ª—Ñ–∞–≤–∏—Ç–Ω—ã–π –ø–æ—Ä—è–¥–æ–∫:
a: 1
b: 2
c: 3
```

**–ö—Ä–∏—Ç–µ—Ä–∏–∏ –ø—Ä–∏—ë–º–∫–∏:**
- –ö–ª—é—á–∏ —Å–æ–±—Ä–∞–Ω—ã –∏ –æ—Ç—Å–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω—ã
- –í—ã–≤–æ–¥ –≤ –∞–ª—Ñ–∞–≤–∏—Ç–Ω–æ–º –ø–æ—Ä—è–¥–∫–µ

**–ü–æ–¥—Å–∫–∞–∑–∫–∏:**
- –ü–æ—Ä—è–¥–æ–∫ –≤ map —Å–ª—É—á–∞–π–Ω—ã–π
- –°–æ–±–µ—Ä–∏—Ç–µ –∫–ª—é—á–∏ –≤ —Å—Ä–µ–∑ –∏ sort.Strings

**–ù–∞—á–∞–ª—å–Ω—ã–π –∫–æ–¥:**
```go
package main

import (
    "fmt"
    "sort"
)

func main() {
    m := map[string]int{"c": 3, "a": 1, "b": 2}
    // –û—Ç—Å–æ—Ä—Ç–∏—Ä—É–π—Ç–µ –∏ –≤—ã–≤–µ–¥–∏—Ç–µ
}
```

**–û–∂–∏–¥–∞–µ–º—ã–π –≤—ã–≤–æ–¥:**
```
–ê–ª—Ñ–∞–≤–∏—Ç–Ω—ã–π –ø–æ—Ä—è–¥–æ–∫:
a: 1
b: 2
c: 3
```

**–ë–∞–ª–ª—ã:** 20
