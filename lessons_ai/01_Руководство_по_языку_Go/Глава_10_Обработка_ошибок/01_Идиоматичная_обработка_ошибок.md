# –ò–¥–∏–æ–º–∞—Ç–∏—á–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –≤ Go

## üí° –ö–ª—é—á–µ–≤—ã–µ –∏–¥–µ–∏

1. **–û—à–∏–±–∫–∏ –∫–∞–∫ –∑–Ω–∞—á–µ–Ω–∏—è** ‚Äî Go –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –∏—Å–∫–ª—é—á–µ–Ω–∏—è, –æ—à–∏–±–∫–∏ –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç—Å—è –∫–∞–∫ –∑–Ω–∞—á–µ–Ω–∏—è
2. **–ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–π –≤–æ–∑–≤—Ä–∞—Ç** ‚Äî —Ñ—É–Ω–∫—Ü–∏—è –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç –∏ –æ—à–∏–±–∫—É
3. **nil = —É—Å–ø–µ—Ö** ‚Äî –µ—Å–ª–∏ –æ—à–∏–±–∫–∞ —Ä–∞–≤–Ω–∞ nil, –æ–ø–µ—Ä–∞—Ü–∏—è —É—Å–ø–µ—à–Ω–∞
4. **–Ø–≤–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞** ‚Äî –æ—à–∏–±–∫—É –Ω—É–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä—è—Ç—å —Å—Ä–∞–∑—É –ø–æ—Å–ª–µ –≤—ã–∑–æ–≤–∞
5. **–ü—Ä–æ—Å—Ç–æ—Ç–∞** ‚Äî –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –≤—Å—Ç—Ä–æ–µ–Ω–∞ –≤ –æ–±—ã—á–Ω—ã–π –ø–æ—Ç–æ–∫ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
6. **–§–∏–ª–æ—Å–æ—Ñ–∏—è Go** ‚Äî "Errors are values" (–æ—à–∏–±–∫–∏ ‚Äî —ç—Ç–æ –∑–Ω–∞—á–µ–Ω–∏—è)

---

## üìã –°–∏–Ω—Ç–∞–∫—Å–∏—Å

### –í–æ–∑–≤—Ä–∞—Ç –æ—à–∏–±–∫–∏ –∏–∑ —Ñ—É–Ω–∫—Ü–∏–∏

```go
func operation() (ResultType, error) {
    if somethingWrong {
        return defaultValue, errors.New("error message")
    }
    return result, nil
}
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ—à–∏–±–∫–∏

```go
result, err := operation()
if err != nil {
    // –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–∫–∏
    return err  // –∏–ª–∏ log.Fatal(err), –∏–ª–∏ –¥—Ä—É–≥–∞—è —Ä–µ–∞–∫—Ü–∏—è
}
// –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ result
```

### –ò–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—à–∏–±–∫–∏ (—Ä–µ–¥–∫–æ!)

```go
result, _ := operation()  // _ –∏–≥–Ω–æ—Ä–∏—Ä—É–µ—Ç –æ—à–∏–±–∫—É
```

---

## üíª –ü—Ä–∏–º–µ—Ä—ã –∫–æ–¥–∞

### –ë–∞–∑–æ–≤—ã–π –ø–∞—Ç—Ç–µ—Ä–Ω –æ–±—Ä–∞–±–æ—Ç–∫–∏

```go
package main

import (
    "fmt"
    "os"
)

func main() {
    // –¢–∏–ø–∏—á–Ω—ã–π –ø–∞—Ç—Ç–µ—Ä–Ω: –≤—ã–∑–æ–≤ + –ø—Ä–æ–≤–µ—Ä–∫–∞
    file, err := os.Open("config.txt")
    if err != nil {
        fmt.Println("Error:", err)
        return
    }
    defer file.Close()
    
    fmt.Println("File opened successfully:", file.Name())
}
```

### –§—É–Ω–∫—Ü–∏—è —Å –≤–æ–∑–≤—Ä–∞—Ç–æ–º –æ—à–∏–±–∫–∏

```go
package main

import (
    "errors"
    "fmt"
)

func divide(a, b float64) (float64, error) {
    if b == 0 {
        return 0, errors.New("division by zero")
    }
    return a / b, nil
}

func main() {
    // –£—Å–ø–µ—à–Ω—ã–π –≤—ã–∑–æ–≤
    result, err := divide(10, 2)
    if err != nil {
        fmt.Println("Error:", err)
    } else {
        fmt.Printf("10 / 2 = %.2f\n", result)
    }
    
    // –í—ã–∑–æ–≤ —Å –æ—à–∏–±–∫–æ–π
    result, err = divide(10, 0)
    if err != nil {
        fmt.Println("Error:", err)
    } else {
        fmt.Printf("10 / 0 = %.2f\n", result)
    }
}
```

### –§–∞–∫—Ç–æ—Ä–∏–∞–ª —Å –ø—Ä–æ–≤–µ—Ä–∫–æ–π

```go
package main

import (
    "errors"
    "fmt"
)

func factorial(n int) (int, error) {
    if n < 0 {
        return 0, errors.New("factorial is not defined for negative numbers")
    }
    
    if n > 20 {
        return 0, errors.New("number too large, would overflow")
    }
    
    result := 1
    for i := 2; i <= n; i++ {
        result *= i
    }
    return result, nil
}

func main() {
    testValues := []int{5, 0, -3, 25}
    
    for _, n := range testValues {
        result, err := factorial(n)
        if err != nil {
            fmt.Printf("factorial(%d) = Error: %v\n", n, err)
        } else {
            fmt.Printf("factorial(%d) = %d\n", n, result)
        }
    }
}
```

### –¶–µ–ø–æ—á–∫–∞ –ø—Ä–æ–≤–µ—Ä–æ–∫

```go
package main

import (
    "fmt"
    "strconv"
)

func parseAndDouble(s string) (int, error) {
    // –ü–µ—Ä–≤–∞—è –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω–∞—è –æ—à–∏–±–∫–∞
    num, err := strconv.Atoi(s)
    if err != nil {
        return 0, fmt.Errorf("parsing failed: %w", err)
    }
    
    // –í—Ç–æ—Ä–∞—è –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω–∞—è –æ—à–∏–±–∫–∞
    if num < 0 {
        return 0, fmt.Errorf("negative number not allowed: %d", num)
    }
    
    return num * 2, nil
}

func main() {
    inputs := []string{"42", "abc", "-5", "100"}
    
    for _, input := range inputs {
        result, err := parseAndDouble(input)
        if err != nil {
            fmt.Printf("Input %q: Error - %v\n", input, err)
        } else {
            fmt.Printf("Input %q: Result = %d\n", input, result)
        }
    }
}
```

### –†–∞–Ω–Ω–µ–µ –≤–æ–∑–≤—Ä–∞—â–µ–Ω–∏–µ (early return)

```go
package main

import (
    "errors"
    "fmt"
)

type User struct {
    Name  string
    Email string
    Age   int
}

func validateUser(u User) error {
    // –ü—Ä–æ–≤–µ—Ä—è–µ–º –∫–∞–∂–¥–æ–µ —É—Å–ª–æ–≤–∏–µ –∏ —Å—Ä–∞–∑—É –≤–æ–∑–≤—Ä–∞—â–∞–µ–º –æ—à–∏–±–∫—É
    if u.Name == "" {
        return errors.New("name is required")
    }
    
    if u.Email == "" {
        return errors.New("email is required")
    }
    
    if u.Age < 0 {
        return errors.New("age cannot be negative")
    }
    
    if u.Age < 18 {
        return errors.New("user must be at least 18 years old")
    }
    
    return nil  // –í—Å–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø—Ä–æ–π–¥–µ–Ω—ã
}

func main() {
    users := []User{
        {Name: "Alice", Email: "alice@example.com", Age: 25},
        {Name: "", Email: "bob@example.com", Age: 30},
        {Name: "Charlie", Email: "", Age: 20},
        {Name: "Diana", Email: "diana@example.com", Age: 15},
    }
    
    for _, user := range users {
        if err := validateUser(user); err != nil {
            fmt.Printf("User %q: %v\n", user.Name, err)
        } else {
            fmt.Printf("User %q: Valid!\n", user.Name)
        }
    }
}
```

### –û—à–∏–±–∫–∏ –Ω–∞ —Ä–∞–∑–Ω—ã—Ö —É—Ä–æ–≤–Ω—è—Ö

```go
package main

import (
    "errors"
    "fmt"
)

// –ù–∏–∑–∫–∏–π —É—Ä–æ–≤–µ–Ω—å
func readConfig() (string, error) {
    // –ò–º–∏—Ç–∞—Ü–∏—è –æ—à–∏–±–∫–∏ —á—Ç–µ–Ω–∏—è
    return "", errors.New("file not found")
}

// –°—Ä–µ–¥–Ω–∏–π —É—Ä–æ–≤–µ–Ω—å
func loadSettings() (map[string]string, error) {
    config, err := readConfig()
    if err != nil {
        return nil, fmt.Errorf("loadSettings: %w", err)
    }
    
    // –ü–∞—Ä—Å–∏–Ω–≥ config...
    _ = config
    return map[string]string{}, nil
}

// –í—ã—Å–æ–∫–∏–π —É—Ä–æ–≤–µ–Ω—å
func startApp() error {
    settings, err := loadSettings()
    if err != nil {
        return fmt.Errorf("startApp: %w", err)
    }
    
    // –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ settings...
    _ = settings
    fmt.Println("App started!")
    return nil
}

func main() {
    err := startApp()
    if err != nil {
        fmt.Println("Failed to start app:", err)
        // –ü–æ–ª–Ω—ã–π –ø—É—Ç—å –æ—à–∏–±–∫–∏: startApp: loadSettings: file not found
    }
}
```

### –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–π –ø—Ä–∏–º–µ—Ä: –æ–±—Ä–∞–±–æ—Ç–∫–∞ HTTP –∑–∞–ø—Ä–æ—Å–∞

```go
package main

import (
    "encoding/json"
    "errors"
    "fmt"
)

type Response struct {
    Data   string `json:"data"`
    Status int    `json:"status"`
}

func fetchData() ([]byte, error) {
    // –ò–º–∏—Ç–∞—Ü–∏—è HTTP-–æ—Ç–≤–µ—Ç–∞
    return []byte(`{"data": "hello", "status": 200}`), nil
}

func parseResponse(body []byte) (*Response, error) {
    var resp Response
    if err := json.Unmarshal(body, &resp); err != nil {
        return nil, fmt.Errorf("parse error: %w", err)
    }
    
    if resp.Status != 200 {
        return nil, fmt.Errorf("bad status: %d", resp.Status)
    }
    
    return &resp, nil
}

func getData() (string, error) {
    // –®–∞–≥ 1: –ø–æ–ª—É—á–∞–µ–º –¥–∞–Ω–Ω—ã–µ
    body, err := fetchData()
    if err != nil {
        return "", fmt.Errorf("fetch failed: %w", err)
    }
    
    // –®–∞–≥ 2: –ø–∞—Ä—Å–∏–º –æ—Ç–≤–µ—Ç
    resp, err := parseResponse(body)
    if err != nil {
        return "", fmt.Errorf("response error: %w", err)
    }
    
    return resp.Data, nil
}

func main() {
    data, err := getData()
    if err != nil {
        fmt.Println("Error:", err)
        return
    }
    
    fmt.Println("Data:", data)
}
```

---

## ‚ö†Ô∏è –ß–∞—Å—Ç—ã–µ –æ—à–∏–±–∫–∏

### 1. –ò–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—à–∏–±–∫–∏

```go
// ‚ùå –ü–õ–û–•–û ‚Äî –æ—à–∏–±–∫–∞ –∏–≥–Ω–æ—Ä–∏—Ä—É–µ—Ç—Å—è
file, _ := os.Open("config.txt")
file.Read(buffer)  // panic –µ—Å–ª–∏ file == nil

// ‚úÖ –•–û–†–û–®–û ‚Äî –æ—à–∏–±–∫–∞ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è
file, err := os.Open("config.txt")
if err != nil {
    log.Fatal(err)
}
```

### 2. –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ—à–∏–±–∫–∏ –ø–æ—Å–ª–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞

```go
// ‚ùå –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û
result, err := operation()
fmt.Println(result)  // –º–æ–∂–µ—Ç –±—ã—Ç—å zero value!
if err != nil {
    // ...
}

// ‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û
result, err := operation()
if err != nil {
    // –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–∫–∏
    return
}
fmt.Println(result)  // –±–µ–∑–æ–ø–∞—Å–Ω–æ
```

### 3. –ó–∞—Ç–µ–Ω–µ–Ω–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π err

```go
func process() error {
    err := step1()
    if err != nil {
        return err
    }
    
    // ‚ùå err := —Å–æ–∑–¥–∞—ë—Ç –Ω–æ–≤—É—é –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é!
    result, err := step2()
    if err != nil {
        return err
    }
    
    // ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ = –≤–º–µ—Å—Ç–æ := –µ—Å–ª–∏ err —É–∂–µ –æ–±—ä—è–≤–ª–µ–Ω–∞
    result, err = step3()
    // ...
}
```

### 4. –í–æ–∑–≤—Ä–∞—Ç err –Ω–∞–ø—Ä—è–º—É—é –±–µ–∑ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞

```go
// ‚ùå –ü–æ—Ç–µ—Ä—è –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞
func loadUser(id int) (*User, error) {
    return db.Get(id)  // "record not found" ‚Äî –∫–∞–∫–æ–π record?
}

// ‚úÖ –î–æ–±–∞–≤–ª—è–µ–º –∫–æ–Ω—Ç–µ–∫—Å—Ç
func loadUser(id int) (*User, error) {
    user, err := db.Get(id)
    if err != nil {
        return nil, fmt.Errorf("loadUser(%d): %w", id, err)
    }
    return user, nil
}
```

---

## üìù –ü—Ä–∞–∫—Ç–∏–∫–∞

### –ó–∞–¥–∞—á–∞ 1: –ö–≤–∞–¥—Ä–∞—Ç–Ω—ã–π –∫–æ—Ä–µ–Ω—å
–ù–∞–ø–∏—à–∏—Ç–µ —Ñ—É–Ω–∫—Ü–∏—é `sqrt(x float64) (float64, error)`, –≤–æ–∑–≤—Ä–∞—â–∞—é—â—É—é –æ—à–∏–±–∫—É –¥–ª—è –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã—Ö —á–∏—Å–µ–ª.

### –ó–∞–¥–∞—á–∞ 2: –ü–∞—Ä—Å–µ—Ä –≤–æ–∑—Ä–∞—Å—Ç–∞
–ù–∞–ø–∏—à–∏—Ç–µ —Ñ—É–Ω–∫—Ü–∏—é, –∫–æ—Ç–æ—Ä–∞—è –ø–∞—Ä—Å–∏—Ç —Å—Ç—Ä–æ–∫—É –≤ –≤–æ–∑—Ä–∞—Å—Ç (int) —Å –ø—Ä–æ–≤–µ—Ä–∫–æ–π –¥–∏–∞–ø–∞–∑–æ–Ω–∞ 0-150.

### –ó–∞–¥–∞—á–∞ 3: –î–µ–ª–µ–Ω–∏–µ
–ù–∞–ø–∏—à–∏—Ç–µ —Ñ—É–Ω–∫—Ü–∏—é –¥–µ–ª–µ–Ω–∏—è —Å –ø—Ä–æ–≤–µ—Ä–∫–æ–π –¥–µ–ª–µ–Ω–∏—è –Ω–∞ –Ω–æ–ª—å –∏ –ø–µ—Ä–µ–ø–æ–ª–Ω–µ–Ω–∏—è.

### –ó–∞–¥–∞—á–∞ 4: –§–∞–π–ª –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
–ù–∞–ø–∏—à–∏—Ç–µ —Ñ—É–Ω–∫—Ü–∏—é –∑–∞–≥—Ä—É–∑–∫–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ —Å –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ —É—Ä–æ–≤–Ω—è–º–∏ –æ—à–∏–±–æ–∫.

### –ó–∞–¥–∞—á–∞ 5: –í–∞–ª–∏–¥–∞—Ü–∏—è email
–ù–∞–ø–∏—à–∏—Ç–µ —Ñ—É–Ω–∫—Ü–∏—é –≤–∞–ª–∏–¥–∞—Ü–∏–∏ email —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ç–∏–≤–Ω—ã–º–∏ –æ—à–∏–±–∫–∞–º–∏.

### –ó–∞–¥–∞—á–∞ 6: –ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä
–°–æ–∑–¥–∞–π—Ç–µ –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä —Å –æ–±—Ä–∞–±–æ—Ç–∫–æ–π –æ—à–∏–±–æ–∫ –¥–ª—è –∫–∞–∂–¥–æ–π –æ–ø–µ—Ä–∞—Ü–∏–∏.

### –ó–∞–¥–∞—á–∞ 7: –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è
–ù–∞–ø–∏—à–∏—Ç–µ —Ñ—É–Ω–∫—Ü–∏—é —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω–æ–π –≤–∞–ª–∏–¥–∞—Ü–∏–µ–π.

### –ó–∞–¥–∞—á–∞ 8: HTTP –∫–ª–∏–µ–Ω—Ç
–ò–º–∏—Ç–∏—Ä—É–π—Ç–µ HTTP –∫–ª–∏–µ–Ω—Ç —Å –æ–±—Ä–∞–±–æ—Ç–∫–æ–π –æ—à–∏–±–æ–∫ —Å–µ—Ç–∏, –ø–∞—Ä—Å–∏–Ω–≥–∞, –≤–∞–ª–∏–¥–∞—Ü–∏–∏.
