# –ü–µ—Ä–≤–æ–µ –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ

## üí° –ö–ª—é—á–µ–≤—ã–µ –∏–¥–µ–∏

1. **net/http** ‚Äî —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –ø–∞–∫–µ—Ç –¥–ª—è –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π
2. **http.ListenAndServe** ‚Äî –∑–∞–ø—É—Å–∫ HTTP —Å–µ—Ä–≤–µ—Ä–∞
3. **Handler** ‚Äî –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∑–∞–ø—Ä–æ—Å–æ–≤
4. **ResponseWriter** ‚Äî –∑–∞–ø–∏—Å—å –æ—Ç–≤–µ—Ç–∞ –∫–ª–∏–µ–Ω—Ç—É
5. **Request** ‚Äî –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –≤—Ö–æ–¥—è—â–µ–º –∑–∞–ø—Ä–æ—Å–µ

---

## üìã –°–∏–Ω—Ç–∞–∫—Å–∏—Å

### –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞

```go
http.ListenAndServe(addr string, handler Handler) error
```

### –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å Handler

```go
type Handler interface {
    ServeHTTP(ResponseWriter, *Request)
}
```

### ResponseWriter ‚Äî –∑–∞–ø–∏—Å—å –æ—Ç–≤–µ—Ç–∞

```go
type ResponseWriter interface {
    Header() Header                 // –∑–∞–≥–æ–ª–æ–≤–∫–∏ –æ—Ç–≤–µ—Ç–∞
    Write([]byte) (int, error)     // –∑–∞–ø–∏—Å—å —Ç–µ–ª–∞ –æ—Ç–≤–µ—Ç–∞
    WriteHeader(statusCode int)     // —É—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å—Ç–∞—Ç—É—Å–∞
}
```

---

## üìñ –¢–µ–æ—Ä–∏—è

### –í–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∑–∞ 5 –º–∏–Ω—É—Ç

Go —É–º–µ–µ—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å –≤–µ–±-—Å–µ—Ä–≤–µ—Ä—ã "–∏–∑ –∫–æ—Ä–æ–±–∫–∏" ‚Äî –±–µ–∑ –≤–Ω–µ—à–Ω–∏—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π:

```go
package main

import (
    "fmt"
    "net/http"
)

func main() {
    http.HandleFunc("/", func(w http.ResponseWriter, r *http.Request) {
        fmt.Fprint(w, "Hello, World!")
    })
    
    http.ListenAndServe(":8080", nil)
}
```

–ó–∞–ø—É—Å—Ç–∏—Ç–µ –∏ –æ—Ç–∫—Ä–æ–π—Ç–µ http://localhost:8080

### –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç?

1. **HandleFunc** ‚Äî —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ—Ç –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–ª—è URL
2. **ListenAndServe** ‚Äî –∑–∞–ø—É—Å–∫–∞–µ—Ç —Å–µ—Ä–≤–µ—Ä –Ω–∞ –ø–æ—Ä—Ç—É
3. –ü—Ä–∏ –∑–∞–ø—Ä–æ—Å–µ Go –≤—ã–∑—ã–≤–∞–µ—Ç –Ω—É–∂–Ω—ã–π –æ–±—Ä–∞–±–æ—Ç—á–∏–∫

### ResponseWriter ‚Äî –æ—Ç–ø—Ä–∞–≤–∫–∞ –æ—Ç–≤–µ—Ç–∞

```go
func handler(w http.ResponseWriter, r *http.Request) {
    // –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≥–æ–ª–æ–≤–æ–∫
    w.Header().Set("Content-Type", "application/json")
    
    // –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Å—Ç–∞—Ç—É—Å (–¥–æ Write!)
    w.WriteHeader(http.StatusOK)  // 200
    
    // –ó–∞–ø–∏—Å–∞—Ç—å —Ç–µ–ª–æ –æ—Ç–≤–µ—Ç–∞
    w.Write([]byte(`{"message": "hello"}`))
}
```

### Request ‚Äî –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∑–∞–ø—Ä–æ—Å–µ

```go
func handler(w http.ResponseWriter, r *http.Request) {
    fmt.Println(r.Method)        // GET, POST, etc.
    fmt.Println(r.URL.Path)      // /users/123
    fmt.Println(r.URL.Query())   // ?key=value
    fmt.Println(r.Header)        // –≤—Å–µ –∑–∞–≥–æ–ª–æ–≤–∫–∏
    fmt.Println(r.RemoteAddr)    // IP –∫–ª–∏–µ–Ω—Ç–∞
}
```

### Handler vs HandlerFunc

**HandlerFunc** ‚Äî —Ñ—É–Ω–∫—Ü–∏—è:
```go
http.HandleFunc("/", myHandler)
```

**Handler** ‚Äî –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å:
```go
type MyHandler struct{}
func (h MyHandler) ServeHTTP(w http.ResponseWriter, r *http.Request) {
    // ...
}
http.Handle("/", MyHandler{})
```

### Graceful shutdown

```go
srv := &http.Server{Addr: ":8080"}

go func() {
    srv.ListenAndServe()
}()

// –û–∂–∏–¥–∞–Ω–∏–µ —Å–∏–≥–Ω–∞–ª–∞ –æ—Å—Ç–∞–Ω–æ–≤–∫–∏
<-stopChan
srv.Shutdown(context.Background())
```

---

## üíª –ü—Ä–∏–º–µ—Ä—ã –∫–æ–¥–∞

### –ú–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ

```go
package main

import (
    "fmt"
    "net/http"
)

type HelloHandler struct{}

func (h HelloHandler) ServeHTTP(w http.ResponseWriter, r *http.Request) {
    fmt.Fprint(w, "Hello, World!")
}

func main() {
    handler := HelloHandler{}
    
    fmt.Println("Server started at http://localhost:8080")
    http.ListenAndServe(":8080", handler)
}
```

### –ö–∞—Å—Ç–æ–º–Ω—ã–π —Ç–∏–ø –∫–∞–∫ Handler

```go
package main

import (
    "fmt"
    "net/http"
)

// –°—Ç—Ä–æ–∫–∞ –º–æ–∂–µ—Ç –±—ã—Ç—å Handler'–æ–º!
type Message string

func (m Message) ServeHTTP(w http.ResponseWriter, r *http.Request) {
    fmt.Fprint(w, m)
}

func main() {
    msg := Message("Welcome to Go Web Server!")
    
    fmt.Println("Server started at http://localhost:8080")
    http.ListenAndServe(":8080", msg)
}
```

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ HandleFunc

```go
package main

import (
    "fmt"
    "net/http"
)

func main() {
    // –ê–Ω–æ–Ω–∏–º–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –∫–∞–∫ handler
    http.HandleFunc("/", func(w http.ResponseWriter, r *http.Request) {
        fmt.Fprint(w, "Home Page")
    })
    
    http.HandleFunc("/about", func(w http.ResponseWriter, r *http.Request) {
        fmt.Fprint(w, "About Page")
    })
    
    fmt.Println("Server started at http://localhost:8080")
    http.ListenAndServe(":8080", nil)
}
```

### –ò–º–µ–Ω–æ–≤–∞–Ω–Ω—ã–µ handler-—Ñ—É–Ω–∫—Ü–∏–∏

```go
package main

import (
    "fmt"
    "net/http"
)

func homeHandler(w http.ResponseWriter, r *http.Request) {
    fmt.Fprint(w, "<h1>Welcome Home!</h1>")
}

func aboutHandler(w http.ResponseWriter, r *http.Request) {
    fmt.Fprint(w, "<h1>About Us</h1>")
}

func contactHandler(w http.ResponseWriter, r *http.Request) {
    fmt.Fprint(w, "<h1>Contact</h1>")
}

func main() {
    http.HandleFunc("/", homeHandler)
    http.HandleFunc("/about", aboutHandler)
    http.HandleFunc("/contact", contactHandler)
    
    fmt.Println("Server started at http://localhost:8080")
    http.ListenAndServe(":8080", nil)
}
```

### HTML –æ—Ç–≤–µ—Ç

```go
package main

import (
    "fmt"
    "net/http"
)

func handler(w http.ResponseWriter, r *http.Request) {
    // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º Content-Type
    w.Header().Set("Content-Type", "text/html; charset=utf-8")
    
    html := `
<!DOCTYPE html>
<html>
<head>
    <title>Go Web App</title>
</head>
<body>
    <h1>Hello from Go!</h1>
    <p>This is a simple web page.</p>
</body>
</html>
`
    fmt.Fprint(w, html)
}

func main() {
    http.HandleFunc("/", handler)
    
    fmt.Println("Server started at http://localhost:8080")
    http.ListenAndServe(":8080", nil)
}
```

### JSON –æ—Ç–≤–µ—Ç

```go
package main

import (
    "encoding/json"
    "net/http"
)

type User struct {
    ID    int    `json:"id"`
    Name  string `json:"name"`
    Email string `json:"email"`
}

func userHandler(w http.ResponseWriter, r *http.Request) {
    user := User{
        ID:    1,
        Name:  "John Doe",
        Email: "john@example.com",
    }
    
    w.Header().Set("Content-Type", "application/json")
    json.NewEncoder(w).Encode(user)
}

func main() {
    http.HandleFunc("/user", userHandler)
    
    http.ListenAndServe(":8080", nil)
}
```

### –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∑–∞–ø—Ä–æ—Å–µ

```go
package main

import (
    "fmt"
    "net/http"
)

func infoHandler(w http.ResponseWriter, r *http.Request) {
    fmt.Fprintf(w, "Method: %s\n", r.Method)
    fmt.Fprintf(w, "URL: %s\n", r.URL.Path)
    fmt.Fprintf(w, "Host: %s\n", r.Host)
    fmt.Fprintf(w, "User-Agent: %s\n", r.UserAgent())
    fmt.Fprintf(w, "Remote Addr: %s\n", r.RemoteAddr)
}

func main() {
    http.HandleFunc("/", infoHandler)
    
    http.ListenAndServe(":8080", nil)
}
```

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ –æ—Ç–≤–µ—Ç–∞

```go
package main

import (
    "fmt"
    "net/http"
)

func notFoundHandler(w http.ResponseWriter, r *http.Request) {
    w.WriteHeader(http.StatusNotFound)
    fmt.Fprint(w, "Page not found!")
}

func serverErrorHandler(w http.ResponseWriter, r *http.Request) {
    w.WriteHeader(http.StatusInternalServerError)
    fmt.Fprint(w, "Internal server error!")
}

func createdHandler(w http.ResponseWriter, r *http.Request) {
    w.WriteHeader(http.StatusCreated)
    fmt.Fprint(w, "Resource created!")
}

func main() {
    http.HandleFunc("/notfound", notFoundHandler)
    http.HandleFunc("/error", serverErrorHandler)
    http.HandleFunc("/created", createdHandler)
    
    http.ListenAndServe(":8080", nil)
}
```

---

## ‚ö†Ô∏è –ß–∞—Å—Ç—ã–µ –æ—à–∏–±–∫–∏

### 1. WriteHeader –ø–æ—Å–ª–µ Write

```go
// ‚ùå WriteHeader –∏–≥–Ω–æ—Ä–∏—Ä—É–µ—Ç—Å—è –ø–æ—Å–ª–µ Write
w.Write([]byte("Hello"))
w.WriteHeader(http.StatusCreated)  // –Ω–µ —Å—Ä–∞–±–æ—Ç–∞–µ—Ç!

// ‚úÖ WriteHeader –¥–æ Write
w.WriteHeader(http.StatusCreated)
w.Write([]byte("Created"))
```

### 2. –ó–∞–±—ã–ª–∏ —É–∫–∞–∑–∞—Ç—å –ø–æ—Ä—Ç

```go
// ‚ùå –ù–µ —É–∫–∞–∑–∞–Ω –ø–æ—Ä—Ç
http.ListenAndServe("localhost", nil)  // –æ—à–∏–±–∫–∞!

// ‚úÖ –£–∫–∞–∑–∞–Ω –ø–æ—Ä—Ç
http.ListenAndServe(":8080", nil)
http.ListenAndServe("localhost:8080", nil)
```

### 3. –ü–∞–Ω–∏–∫–∞ –ø—Ä–∏ –æ—à–∏–±–∫–µ

```go
// ‚ùå –°–µ—Ä–≤–µ—Ä –º–æ–ª—á–∞ –ø–∞–¥–∞–µ—Ç
http.ListenAndServe(":8080", nil)

// ‚úÖ –ü—Ä–æ–≤–µ—Ä—è–π—Ç–µ –æ—à–∏–±–∫—É
err := http.ListenAndServe(":8080", nil)
if err != nil {
    log.Fatal(err)
}
```

---

## üèãÔ∏è –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ –∑–∞–¥–∞–Ω–∏—è

### –ó–∞–¥–∞–Ω–∏–µ 1: Chi router

–°–æ–∑–¥–∞–π—Ç–µ —Ä–æ—É—Ç–µ—Ä —Å chi.

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
```
Chi: r := chi.NewRouter()
```

**–ù–∞—á–∞–ª—å–Ω—ã–π –∫–æ–¥:**
```go
package main

import "fmt"

func main() {
    fmt.Println("Chi: r := chi.NewRouter()")
}
```

**–û–∂–∏–¥–∞–µ–º—ã–π –≤—ã–≤–æ–¥:**
```
Chi: r := chi.NewRouter()
```

**–ë–∞–ª–ª—ã:** 10

### –ó–∞–¥–∞–Ω–∏–µ 2: Chi –ø–∞—Ä–∞–º–µ—Ç—Ä—ã URL

–ü–æ–ª—É—á–∏—Ç–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∏–∑ URL.

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
```
–ü–∞—Ä–∞–º–µ—Ç—Ä—ã: chi.URLParam(r, "id")
```

**–ù–∞—á–∞–ª—å–Ω—ã–π –∫–æ–¥:**
```go
package main

import "fmt"

func main() {
    fmt.Println("–ü–∞—Ä–∞–º–µ—Ç—Ä—ã: chi.URLParam(r, \"id\")")
}
```

**–û–∂–∏–¥–∞–µ–º—ã–π –≤—ã–≤–æ–¥:**
```
–ü–∞—Ä–∞–º–µ—Ç—Ä—ã: chi.URLParam(r, "id")
```

**–ë–∞–ª–ª—ã:** 10

### –ó–∞–¥–∞–Ω–∏–µ 3: Chi Route groups

–°–æ–∑–¥–∞–π—Ç–µ –≥—Ä—É–ø–ø—ã –º–∞—Ä—à—Ä—É—Ç–æ–≤.

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
```
–ì—Ä—É–ø–ø—ã: r.Route("/api", func(r chi.Router) {...})
```

**–ù–∞—á–∞–ª—å–Ω—ã–π –∫–æ–¥:**
```go
package main

import "fmt"

func main() {
    fmt.Println("–ì—Ä—É–ø–ø—ã: r.Route(\"/api\", func(r chi.Router) {...})")
}
```

**–û–∂–∏–¥–∞–µ–º—ã–π –≤—ã–≤–æ–¥:**
```
–ì—Ä—É–ø–ø—ã: r.Route("/api", func(r chi.Router) {...})
```

**–ë–∞–ª–ª—ã:** 15

### –ó–∞–¥–∞–Ω–∏–µ 4: Chi middleware

–î–æ–±–∞–≤—å—Ç–µ middleware.

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
```
Middleware: r.Use(middleware.Logger)
```

**–ù–∞—á–∞–ª—å–Ω—ã–π –∫–æ–¥:**
```go
package main

import "fmt"

func main() {
    fmt.Println("Middleware: r.Use(middleware.Logger)")
}
```

**–û–∂–∏–¥–∞–µ–º—ã–π –≤—ã–≤–æ–¥:**
```
Middleware: r.Use(middleware.Logger)
```

**–ë–∞–ª–ª—ã:** 10

### –ó–∞–¥–∞–Ω–∏–µ 5: Chi context

–ü–µ—Ä–µ–¥–∞–π—Ç–µ –¥–∞–Ω–Ω—ã–µ —á–µ—Ä–µ–∑ context.

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
```
Context: r.WithContext(context.WithValue(...))
```

**–ù–∞—á–∞–ª—å–Ω—ã–π –∫–æ–¥:**
```go
package main

import (
    "context"
    "fmt"
)

// TODO: –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ context

func main() {
    // –í–∞—à –∫–æ–¥ –∑–¥–µ—Å—å
    
}
```

**–û–∂–∏–¥–∞–µ–º—ã–π –≤—ã–≤–æ–¥:**
```
Context: r.WithContext(context.WithValue(...))
```

**–ë–∞–ª–ª—ã:** 15
