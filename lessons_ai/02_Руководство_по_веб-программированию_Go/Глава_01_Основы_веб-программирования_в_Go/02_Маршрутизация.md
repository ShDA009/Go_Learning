# –ú–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è

## üí° –ö–ª—é—á–µ–≤—ã–µ –∏–¥–µ–∏

1. **HandleFunc** ‚Äî –ø—Ä–∏–≤—è–∑–∫–∞ —Ñ—É–Ω–∫—Ü–∏–∏ –∫ –º–∞—Ä—à—Ä—É—Ç—É
2. **Handle** ‚Äî –ø—Ä–∏–≤—è–∑–∫–∞ Handler –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ –∫ –º–∞—Ä—à—Ä—É—Ç—É
3. **–ü–∞—Ç—Ç–µ—Ä–Ω—ã** ‚Äî `/` (–∫–æ—Ä–µ–Ω—å), `/about` (—Ç–æ—á–Ω—ã–π –ø—É—Ç—å)
4. **Trailing slash** ‚Äî `/api/` vs `/api`
5. **http.ServeMux** ‚Äî —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ç–æ—Ä

---

## üìã –°–∏–Ω—Ç–∞–∫—Å–∏—Å

### HandleFunc

```go
http.HandleFunc(pattern string, handler func(ResponseWriter, *Request))
```

### Handle

```go
http.Handle(pattern string, handler Handler)
```

### –ü–∞—Ç—Ç–µ—Ä–Ω—ã –º–∞—Ä—à—Ä—É—Ç–æ–≤

```go
"/"           // –∫–æ—Ä–µ–Ω—å —Å–∞–π—Ç–∞ (–ª–æ–≤–∏—Ç –≤—Å–µ!)
"/about"     // —Ç–æ—á–Ω—ã–π –ø—É—Ç—å /about
"/api/"      // /api/ –∏ –≤—Å—ë –ø–æ–¥ –Ω–∏–º (/api/users, /api/items)
"/static/"   // –¥–ª—è —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏—Ö —Ñ–∞–π–ª–æ–≤
```

---

## üìñ –¢–µ–æ—Ä–∏—è

### –ß—Ç–æ —Ç–∞–∫–æ–µ –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è?

**–ú–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è** ‚Äî —Å–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–µ URL-–ø—É—Ç–µ–π —Å –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞–º–∏:

```
GET /users     ‚Üí usersHandler
GET /about     ‚Üí aboutHandler
GET /api/items ‚Üí apiHandler
```

### –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ç–æ—Ä (ServeMux)

```go
mux := http.NewServeMux()
mux.HandleFunc("/users", usersHandler)
mux.HandleFunc("/about", aboutHandler)

http.ListenAndServe(":8080", mux)
```

–ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –≥–ª–æ–±–∞–ª—å–Ω—ã–π:
```go
http.HandleFunc("/users", usersHandler)  // DefaultServeMux
http.ListenAndServe(":8080", nil)        // nil = DefaultServeMux
```

### –ü—Ä–∞–≤–∏–ª–∞ —Å–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∏—è

1. **–¢–æ—á–Ω–æ–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ** –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω–µ–µ
2. **Trailing slash** ‚Äî `/api/` –ª–æ–≤–∏—Ç –≤—Å—ë –ø–æ–¥ `/api/`
3. **–ö–æ—Ä–µ–Ω—å `/`** ‚Äî –ª–æ–≤–∏—Ç –í–°–Å, —á—Ç–æ –Ω–µ —Å–æ–≤–ø–∞–ª–æ

```go
http.HandleFunc("/", rootHandler)         // /any, /path
http.HandleFunc("/users", usersHandler)   // —Ç–æ–ª—å–∫–æ /users
http.HandleFunc("/api/", apiHandler)      // /api/, /api/users, /api/items
```

### –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–≥–æ —Ä–æ—É—Ç–µ—Ä–∞

- ‚ùå –ù–µ—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –≤ URL (`/users/{id}`)
- ‚ùå –ù–µ—Ç —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –ø–æ HTTP-–º–µ—Ç–æ–¥—É
- ‚ùå –ù–µ—Ç middleware
- ‚ùå –ù–µ—Ç —Ä–µ–≥—É–ª—è—Ä–Ω—ã—Ö –≤—ã—Ä–∞–∂–µ–Ω–∏–π

–î–ª—è —ç—Ç–æ–≥–æ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `gorilla/mux` –∏–ª–∏ –¥—Ä—É–≥–∏–µ —Ä–æ—É—Ç–µ—Ä—ã.

### –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ HTTP-–º–µ—Ç–æ–¥–∞ –≤—Ä—É—á–Ω—É—é

```go
func handler(w http.ResponseWriter, r *http.Request) {
    switch r.Method {
    case http.MethodGet:
        // GET –ª–æ–≥–∏–∫–∞
    case http.MethodPost:
        // POST –ª–æ–≥–∏–∫–∞
    default:
        http.Error(w, "Method not allowed", http.StatusMethodNotAllowed)
    }
}
```

### –û–±—Ä–∞–±–æ—Ç–∫–∞ 404

```go
func notFoundHandler(w http.ResponseWriter, r *http.Request) {
    http.Error(w, "Page not found", http.StatusNotFound)
}

// –ö–æ—Ä–µ–Ω—å "/" –ª–æ–≤–∏—Ç –≤—Å–µ –Ω–µ –Ω–∞–π–¥–µ–Ω–Ω—ã–µ
http.HandleFunc("/", notFoundHandler)
```

---

## üíª –ü—Ä–∏–º–µ—Ä—ã –∫–æ–¥–∞

### –ë–∞–∑–æ–≤–∞—è –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è

```go
package main

import (
    "fmt"
    "net/http"
)

func main() {
    http.HandleFunc("/", func(w http.ResponseWriter, r *http.Request) {
        fmt.Fprint(w, "Home Page")
    })
    
    http.HandleFunc("/about", func(w http.ResponseWriter, r *http.Request) {
        fmt.Fprint(w, "About Page")
    })
    
    http.HandleFunc("/contact", func(w http.ResponseWriter, r *http.Request) {
        fmt.Fprint(w, "Contact Page")
    })
    
    fmt.Println("Server started at :8080")
    http.ListenAndServe(":8080", nil)
}
```

### Handle —Å Handler –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–º

```go
package main

import (
    "fmt"
    "net/http"
)

type PageHandler struct {
    Title   string
    Content string
}

func (h PageHandler) ServeHTTP(w http.ResponseWriter, r *http.Request) {
    fmt.Fprintf(w, "<h1>%s</h1><p>%s</p>", h.Title, h.Content)
}

func main() {
    homePage := PageHandler{
        Title:   "Welcome",
        Content: "This is the home page",
    }
    
    aboutPage := PageHandler{
        Title:   "About Us",
        Content: "Learn more about our company",
    }
    
    http.Handle("/", homePage)
    http.Handle("/about", aboutPage)
    
    http.ListenAndServe(":8080", nil)
}
```

### –û—Ç–ø—Ä–∞–≤–∫–∞ HTML —Ñ–∞–π–ª–æ–≤

```go
package main

import (
    "fmt"
    "net/http"
)

func main() {
    http.HandleFunc("/", func(w http.ResponseWriter, r *http.Request) {
        http.ServeFile(w, r, "index.html")
    })
    
    http.HandleFunc("/about", func(w http.ResponseWriter, r *http.Request) {
        http.ServeFile(w, r, "about.html")
    })
    
    http.HandleFunc("/contact", func(w http.ResponseWriter, r *http.Request) {
        http.ServeFile(w, r, "contact.html")
    })
    
    fmt.Println("Server started at :8080")
    http.ListenAndServe(":8080", nil)
}
```

### –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –ø–æ HTTP –º–µ—Ç–æ–¥–∞–º

```go
package main

import (
    "fmt"
    "net/http"
)

func usersHandler(w http.ResponseWriter, r *http.Request) {
    switch r.Method {
    case http.MethodGet:
        fmt.Fprint(w, "GET: List all users")
    case http.MethodPost:
        fmt.Fprint(w, "POST: Create user")
    case http.MethodPut:
        fmt.Fprint(w, "PUT: Update user")
    case http.MethodDelete:
        fmt.Fprint(w, "DELETE: Delete user")
    default:
        w.WriteHeader(http.StatusMethodNotAllowed)
        fmt.Fprint(w, "Method not allowed")
    }
}

func main() {
    http.HandleFunc("/users", usersHandler)
    
    http.ListenAndServe(":8080", nil)
}
```

### –ö–∞—Å—Ç–æ–º–Ω—ã–π ServeMux

```go
package main

import (
    "fmt"
    "net/http"
)

func main() {
    mux := http.NewServeMux()
    
    mux.HandleFunc("/", func(w http.ResponseWriter, r *http.Request) {
        fmt.Fprint(w, "Home")
    })
    
    mux.HandleFunc("/api/", func(w http.ResponseWriter, r *http.Request) {
        fmt.Fprintf(w, "API endpoint: %s", r.URL.Path)
    })
    
    // –ò—Å–ø–æ–ª—å–∑—É–µ–º –∫–∞—Å—Ç–æ–º–Ω—ã–π mux
    http.ListenAndServe(":8080", mux)
}
```

### –û–±—Ä–∞–±–æ—Ç–∫–∞ 404

```go
package main

import (
    "fmt"
    "net/http"
)

func main() {
    http.HandleFunc("/", func(w http.ResponseWriter, r *http.Request) {
        // "/" –ª–æ–≤–∏—Ç –≤—Å–µ –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –ø—É—Ç–∏
        if r.URL.Path != "/" {
            http.NotFound(w, r)
            return
        }
        fmt.Fprint(w, "Home Page")
    })
    
    http.HandleFunc("/about", func(w http.ResponseWriter, r *http.Request) {
        fmt.Fprint(w, "About Page")
    })
    
    http.ListenAndServe(":8080", nil)
}
```

### API —Å –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ–º

```go
package main

import (
    "encoding/json"
    "net/http"
)

func main() {
    // API v1
    http.HandleFunc("/api/v1/users", func(w http.ResponseWriter, r *http.Request) {
        w.Header().Set("Content-Type", "application/json")
        json.NewEncoder(w).Encode(map[string]string{
            "version": "1",
            "data":    "users list v1",
        })
    })
    
    // API v2
    http.HandleFunc("/api/v2/users", func(w http.ResponseWriter, r *http.Request) {
        w.Header().Set("Content-Type", "application/json")
        json.NewEncoder(w).Encode(map[string]interface{}{
            "version": "2",
            "data":    []string{"user1", "user2"},
        })
    })
    
    http.ListenAndServe(":8080", nil)
}
```

### Middleware –ø–∞—Ç—Ç–µ—Ä–Ω

```go
package main

import (
    "fmt"
    "log"
    "net/http"
    "time"
)

// Middleware –¥–ª—è –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
func loggingMiddleware(next http.HandlerFunc) http.HandlerFunc {
    return func(w http.ResponseWriter, r *http.Request) {
        start := time.Now()
        next(w, r)
        log.Printf("%s %s %v", r.Method, r.URL.Path, time.Since(start))
    }
}

func homeHandler(w http.ResponseWriter, r *http.Request) {
    fmt.Fprint(w, "Home Page")
}

func aboutHandler(w http.ResponseWriter, r *http.Request) {
    fmt.Fprint(w, "About Page")
}

func main() {
    http.HandleFunc("/", loggingMiddleware(homeHandler))
    http.HandleFunc("/about", loggingMiddleware(aboutHandler))
    
    http.ListenAndServe(":8080", nil)
}
```

---

## ‚ö†Ô∏è –ß–∞—Å—Ç—ã–µ –æ—à–∏–±–∫–∏

### 1. "/" –ª–æ–≤–∏—Ç –≤—Å–µ –ø—É—Ç–∏

```go
// ‚ùå "/" –ø–µ—Ä–µ—Ö–≤–∞—Ç—ã–≤–∞–µ—Ç /unknown
http.HandleFunc("/", homeHandler)
// –ü—É—Ç—å /unknown –ø–æ–ø–∞–¥—ë—Ç –≤ homeHandler!

// ‚úÖ –ü—Ä–æ–≤–µ—Ä—è–π—Ç–µ –ø—É—Ç—å
if r.URL.Path != "/" {
    http.NotFound(w, r)
    return
}
```

### 2. Trailing slash –∏–º–µ–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ

```go
// ‚ùå /api –∏ /api/ ‚Äî —Ä–∞–∑–Ω—ã–µ –º–∞—Ä—à—Ä—É—Ç—ã!
http.HandleFunc("/api", apiHandler)
// –ü—É—Ç—å /api/users –ù–ï –ø–æ–ø–∞–¥—ë—Ç —Å—é–¥–∞

// ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ /api/ –¥–ª—è –ø–æ–¥–ø—É—Ç–µ–π
http.HandleFunc("/api/", apiHandler)
// /api/users –ø–æ–ø–∞–¥—ë—Ç —Å—é–¥–∞
```

### 3. –ü–æ—Ä—è–¥–æ–∫ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏

```go
// –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π mux –≤—ã–±–∏—Ä–∞–µ—Ç —Å–∞–º—ã–π —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–π –º–∞—Ä—à—Ä—É—Ç
// –ü–æ—Ä—è–¥–æ–∫ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –Ω–µ –≤–∞–∂–µ–Ω

http.HandleFunc("/", home)
http.HandleFunc("/about", about)
// /about –ø–æ–ø–∞–¥—ë—Ç –≤ about, –Ω–µ –≤ home
```

---

## üèãÔ∏è –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ –∑–∞–¥–∞–Ω–∏—è

### –ó–∞–¥–∞–Ω–∏–µ 1: Fiber framework

–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ Fiber.

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
```
Fiber: app := fiber.New(); app.Get("/", handler)
```

**–ù–∞—á–∞–ª—å–Ω—ã–π –∫–æ–¥:**
```go
package main

import "fmt"

func main() {
    fmt.Println("Fiber: app := fiber.New(); app.Get(\"/\", handler)")
}
```

**–û–∂–∏–¥–∞–µ–º—ã–π –≤—ã–≤–æ–¥:**
```
Fiber: app := fiber.New(); app.Get("/", handler)
```

**–ë–∞–ª–ª—ã:** 10

### –ó–∞–¥–∞–Ω–∏–µ 2: Fiber Context

–†–∞–±–æ—Ç–∞ —Å fiber.Ctx.

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
```
Fiber Ctx: c.JSON(data), c.SendString("text")
```

**–ù–∞—á–∞–ª—å–Ω—ã–π –∫–æ–¥:**
```go
package main

import "fmt"

func main() {
    fmt.Println("Fiber Ctx: c.JSON(data), c.SendString(\"text\")")
}
```

**–û–∂–∏–¥–∞–µ–º—ã–π –≤—ã–≤–æ–¥:**
```
Fiber Ctx: c.JSON(data), c.SendString("text")
```

**–ë–∞–ª–ª—ã:** 10

### –ó–∞–¥–∞–Ω–∏–µ 3: Fiber –ø–∞—Ä–∞–º–µ—Ç—Ä—ã

–ü–æ–ª—É—á–∏—Ç–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã.

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
```
–ü–∞—Ä–∞–º–µ—Ç—Ä—ã: c.Params("id"), c.Query("name")
```

**–ù–∞—á–∞–ª—å–Ω—ã–π –∫–æ–¥:**
```go
package main

import "fmt"

func main() {
    fmt.Println("–ü–∞—Ä–∞–º–µ—Ç—Ä—ã: c.Params(\"id\"), c.Query(\"name\")")
}
```

**–û–∂–∏–¥–∞–µ–º—ã–π –≤—ã–≤–æ–¥:**
```
–ü–∞—Ä–∞–º–µ—Ç—Ä—ã: c.Params("id"), c.Query("name")
```

**–ë–∞–ª–ª—ã:** 10

### –ó–∞–¥–∞–Ω–∏–µ 4: Fiber BodyParser

–ü–∞—Ä—Å–∏–Ω–≥ —Ç–µ–ª–∞ –∑–∞–ø—Ä–æ—Å–∞.

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
```
–ü–∞—Ä—Å–∏–Ω–≥: c.BodyParser(&data)
```

**–ù–∞—á–∞–ª—å–Ω—ã–π –∫–æ–¥:**
```go
package main

import "fmt"

func main() {
    fmt.Println("–ü–∞—Ä—Å–∏–Ω–≥: c.BodyParser(&data)")
}
```

**–û–∂–∏–¥–∞–µ–º—ã–π –≤—ã–≤–æ–¥:**
```
–ü–∞—Ä—Å–∏–Ω–≥: c.BodyParser(&data)
```

**–ë–∞–ª–ª—ã:** 15

### –ó–∞–¥–∞–Ω–∏–µ 5: Fiber –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ Fiber.

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
```
Fiber: –ø–æ—Å—Ç—Ä–æ–µ–Ω –Ω–∞ fasthttp, –≤—ã—Å–æ–∫–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
```

**–ù–∞—á–∞–ª—å–Ω—ã–π –∫–æ–¥:**
```go
package main

import "fmt"

func main() {
    fmt.Println("Fiber: –ø–æ—Å—Ç—Ä–æ–µ–Ω –Ω–∞ fasthttp, –≤—ã—Å–æ–∫–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å")
}
```

**–û–∂–∏–¥–∞–µ–º—ã–π –≤—ã–≤–æ–¥:**
```
Fiber: –ø–æ—Å—Ç—Ä–æ–µ–Ω –Ω–∞ fasthttp, –≤—ã—Å–æ–∫–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
```

**–ë–∞–ª–ª—ã:** 10
