# –ú–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è

## üí° –ö–ª—é—á–µ–≤—ã–µ –∏–¥–µ–∏

1. **HandleFunc** ‚Äî –ø—Ä–∏–≤—è–∑–∫–∞ —Ñ—É–Ω–∫—Ü–∏–∏ –∫ –º–∞—Ä—à—Ä—É—Ç—É
2. **Handle** ‚Äî –ø—Ä–∏–≤—è–∑–∫–∞ Handler –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ –∫ –º–∞—Ä—à—Ä—É—Ç—É
3. **–ü–∞—Ç—Ç–µ—Ä–Ω—ã** ‚Äî `/` (–∫–æ—Ä–µ–Ω—å), `/about` (—Ç–æ—á–Ω—ã–π –ø—É—Ç—å)
4. **Trailing slash** ‚Äî `/api/` vs `/api`
5. **http.ServeMux** ‚Äî —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ç–æ—Ä

---

## üìã –°–∏–Ω—Ç–∞–∫—Å–∏—Å

### HandleFunc

```go
http.HandleFunc(pattern string, handler func(ResponseWriter, *Request))
```

### Handle

```go
http.Handle(pattern string, handler Handler)
```

### –ü–∞—Ç—Ç–µ—Ä–Ω—ã –º–∞—Ä—à—Ä—É—Ç–æ–≤

```go
"/"           // –∫–æ—Ä–µ–Ω—å —Å–∞–π—Ç–∞ (–ª–æ–≤–∏—Ç –≤—Å–µ!)
"/about"     // —Ç–æ—á–Ω—ã–π –ø—É—Ç—å /about
"/api/"      // /api/ –∏ –≤—Å—ë –ø–æ–¥ –Ω–∏–º (/api/users, /api/items)
"/static/"   // –¥–ª—è —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏—Ö —Ñ–∞–π–ª–æ–≤
```

---

## üíª –ü—Ä–∏–º–µ—Ä—ã –∫–æ–¥–∞

### –ë–∞–∑–æ–≤–∞—è –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è

```go
package main

import (
    "fmt"
    "net/http"
)

func main() {
    http.HandleFunc("/", func(w http.ResponseWriter, r *http.Request) {
        fmt.Fprint(w, "Home Page")
    })
    
    http.HandleFunc("/about", func(w http.ResponseWriter, r *http.Request) {
        fmt.Fprint(w, "About Page")
    })
    
    http.HandleFunc("/contact", func(w http.ResponseWriter, r *http.Request) {
        fmt.Fprint(w, "Contact Page")
    })
    
    fmt.Println("Server started at :8080")
    http.ListenAndServe(":8080", nil)
}
```

### Handle —Å Handler –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–º

```go
package main

import (
    "fmt"
    "net/http"
)

type PageHandler struct {
    Title   string
    Content string
}

func (h PageHandler) ServeHTTP(w http.ResponseWriter, r *http.Request) {
    fmt.Fprintf(w, "<h1>%s</h1><p>%s</p>", h.Title, h.Content)
}

func main() {
    homePage := PageHandler{
        Title:   "Welcome",
        Content: "This is the home page",
    }
    
    aboutPage := PageHandler{
        Title:   "About Us",
        Content: "Learn more about our company",
    }
    
    http.Handle("/", homePage)
    http.Handle("/about", aboutPage)
    
    http.ListenAndServe(":8080", nil)
}
```

### –û—Ç–ø—Ä–∞–≤–∫–∞ HTML —Ñ–∞–π–ª–æ–≤

```go
package main

import (
    "fmt"
    "net/http"
)

func main() {
    http.HandleFunc("/", func(w http.ResponseWriter, r *http.Request) {
        http.ServeFile(w, r, "index.html")
    })
    
    http.HandleFunc("/about", func(w http.ResponseWriter, r *http.Request) {
        http.ServeFile(w, r, "about.html")
    })
    
    http.HandleFunc("/contact", func(w http.ResponseWriter, r *http.Request) {
        http.ServeFile(w, r, "contact.html")
    })
    
    fmt.Println("Server started at :8080")
    http.ListenAndServe(":8080", nil)
}
```

### –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –ø–æ HTTP –º–µ—Ç–æ–¥–∞–º

```go
package main

import (
    "fmt"
    "net/http"
)

func usersHandler(w http.ResponseWriter, r *http.Request) {
    switch r.Method {
    case http.MethodGet:
        fmt.Fprint(w, "GET: List all users")
    case http.MethodPost:
        fmt.Fprint(w, "POST: Create user")
    case http.MethodPut:
        fmt.Fprint(w, "PUT: Update user")
    case http.MethodDelete:
        fmt.Fprint(w, "DELETE: Delete user")
    default:
        w.WriteHeader(http.StatusMethodNotAllowed)
        fmt.Fprint(w, "Method not allowed")
    }
}

func main() {
    http.HandleFunc("/users", usersHandler)
    
    http.ListenAndServe(":8080", nil)
}
```

### –ö–∞—Å—Ç–æ–º–Ω—ã–π ServeMux

```go
package main

import (
    "fmt"
    "net/http"
)

func main() {
    mux := http.NewServeMux()
    
    mux.HandleFunc("/", func(w http.ResponseWriter, r *http.Request) {
        fmt.Fprint(w, "Home")
    })
    
    mux.HandleFunc("/api/", func(w http.ResponseWriter, r *http.Request) {
        fmt.Fprintf(w, "API endpoint: %s", r.URL.Path)
    })
    
    // –ò—Å–ø–æ–ª—å–∑—É–µ–º –∫–∞—Å—Ç–æ–º–Ω—ã–π mux
    http.ListenAndServe(":8080", mux)
}
```

### –û–±—Ä–∞–±–æ—Ç–∫–∞ 404

```go
package main

import (
    "fmt"
    "net/http"
)

func main() {
    http.HandleFunc("/", func(w http.ResponseWriter, r *http.Request) {
        // "/" –ª–æ–≤–∏—Ç –≤—Å–µ –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –ø—É—Ç–∏
        if r.URL.Path != "/" {
            http.NotFound(w, r)
            return
        }
        fmt.Fprint(w, "Home Page")
    })
    
    http.HandleFunc("/about", func(w http.ResponseWriter, r *http.Request) {
        fmt.Fprint(w, "About Page")
    })
    
    http.ListenAndServe(":8080", nil)
}
```

### API —Å –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ–º

```go
package main

import (
    "encoding/json"
    "net/http"
)

func main() {
    // API v1
    http.HandleFunc("/api/v1/users", func(w http.ResponseWriter, r *http.Request) {
        w.Header().Set("Content-Type", "application/json")
        json.NewEncoder(w).Encode(map[string]string{
            "version": "1",
            "data":    "users list v1",
        })
    })
    
    // API v2
    http.HandleFunc("/api/v2/users", func(w http.ResponseWriter, r *http.Request) {
        w.Header().Set("Content-Type", "application/json")
        json.NewEncoder(w).Encode(map[string]interface{}{
            "version": "2",
            "data":    []string{"user1", "user2"},
        })
    })
    
    http.ListenAndServe(":8080", nil)
}
```

### Middleware –ø–∞—Ç—Ç–µ—Ä–Ω

```go
package main

import (
    "fmt"
    "log"
    "net/http"
    "time"
)

// Middleware –¥–ª—è –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
func loggingMiddleware(next http.HandlerFunc) http.HandlerFunc {
    return func(w http.ResponseWriter, r *http.Request) {
        start := time.Now()
        next(w, r)
        log.Printf("%s %s %v", r.Method, r.URL.Path, time.Since(start))
    }
}

func homeHandler(w http.ResponseWriter, r *http.Request) {
    fmt.Fprint(w, "Home Page")
}

func aboutHandler(w http.ResponseWriter, r *http.Request) {
    fmt.Fprint(w, "About Page")
}

func main() {
    http.HandleFunc("/", loggingMiddleware(homeHandler))
    http.HandleFunc("/about", loggingMiddleware(aboutHandler))
    
    http.ListenAndServe(":8080", nil)
}
```

---

## ‚ö†Ô∏è –ß–∞—Å—Ç—ã–µ –æ—à–∏–±–∫–∏

### 1. "/" –ª–æ–≤–∏—Ç –≤—Å–µ –ø—É—Ç–∏

```go
// ‚ùå "/" –ø–µ—Ä–µ—Ö–≤–∞—Ç—ã–≤–∞–µ—Ç /unknown
http.HandleFunc("/", homeHandler)
// –ü—É—Ç—å /unknown –ø–æ–ø–∞–¥—ë—Ç –≤ homeHandler!

// ‚úÖ –ü—Ä–æ–≤–µ—Ä—è–π—Ç–µ –ø—É—Ç—å
if r.URL.Path != "/" {
    http.NotFound(w, r)
    return
}
```

### 2. Trailing slash –∏–º–µ–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ

```go
// ‚ùå /api –∏ /api/ ‚Äî —Ä–∞–∑–Ω—ã–µ –º–∞—Ä—à—Ä—É—Ç—ã!
http.HandleFunc("/api", apiHandler)
// –ü—É—Ç—å /api/users –ù–ï –ø–æ–ø–∞–¥—ë—Ç —Å—é–¥–∞

// ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ /api/ –¥–ª—è –ø–æ–¥–ø—É—Ç–µ–π
http.HandleFunc("/api/", apiHandler)
// /api/users –ø–æ–ø–∞–¥—ë—Ç —Å—é–¥–∞
```

### 3. –ü–æ—Ä—è–¥–æ–∫ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏

```go
// –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π mux –≤—ã–±–∏—Ä–∞–µ—Ç —Å–∞–º—ã–π —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–π –º–∞—Ä—à—Ä—É—Ç
// –ü–æ—Ä—è–¥–æ–∫ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –Ω–µ –≤–∞–∂–µ–Ω

http.HandleFunc("/", home)
http.HandleFunc("/about", about)
// /about –ø–æ–ø–∞–¥—ë—Ç –≤ about, –Ω–µ –≤ home
```

---

## üìù –ü—Ä–∞–∫—Ç–∏–∫–∞

### –ó–∞–¥–∞—á–∞ 1: Multi-page site
–°–∞–π—Ç —Å –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ —Å—Ç—Ä–∞–Ω–∏—Ü–∞–º–∏ –∏ –Ω–∞–≤–∏–≥–∞—Ü–∏–µ–π.

### –ó–∞–¥–∞—á–∞ 2: REST API
API —Å —Ä–∞–∑–Ω—ã–º–∏ HTTP –º–µ—Ç–æ–¥–∞–º–∏.

### –ó–∞–¥–∞—á–∞ 3: 404 handler
–ö—Ä–∞—Å–∏–≤–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ 404.

### –ó–∞–¥–∞—á–∞ 4: Logging middleware
Middleware –¥–ª—è –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤.

### –ó–∞–¥–∞—á–∞ 5: Auth middleware
–ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏.

### –ó–∞–¥–∞—á–∞ 6: API versioning
API —Å —Ä–∞–∑–Ω—ã–º–∏ –≤–µ—Ä—Å–∏—è–º–∏.

### –ó–∞–¥–∞—á–∞ 7: Path parsing
–ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –∏–∑ URL.

### –ó–∞–¥–∞—á–∞ 8: Router wrapper
–û–±—ë—Ä—Ç–∫–∞ –Ω–∞–¥ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–º mux.
