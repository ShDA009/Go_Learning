# –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ñ–∞–π–ª—ã

## üí° –ö–ª—é—á–µ–≤—ã–µ –∏–¥–µ–∏

1. **http.FileServer** ‚Äî —Å–µ—Ä–≤–µ—Ä —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏—Ö —Ñ–∞–π–ª–æ–≤
2. **http.Dir** ‚Äî —É–∫–∞–∑–∞–Ω–∏–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ —Å —Ñ–∞–π–ª–∞–º–∏
3. **http.ServeFile** ‚Äî –æ—Ç–¥–∞—á–∞ –æ–¥–Ω–æ–≥–æ —Ñ–∞–π–ª–∞
4. **StripPrefix** ‚Äî —É–¥–∞–ª–µ–Ω–∏–µ –ø—Ä–µ—Ñ–∏–∫—Å–∞ –∏–∑ URL
5. **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ** ‚Äî –∑–∞–≥–æ–ª–æ–≤–∫–∏ –¥–ª—è –∫—ç—à–∞ –±—Ä–∞—É–∑–µ—Ä–∞

---

## üìã –°–∏–Ω—Ç–∞–∫—Å–∏—Å

### FileServer

```go
http.FileServer(root FileSystem) Handler
http.Dir(name string) Dir
```

### ServeFile

```go
http.ServeFile(w ResponseWriter, r *Request, name string)
```

### StripPrefix

```go
http.StripPrefix(prefix string, h Handler) Handler
```

---

## üíª –ü—Ä–∏–º–µ—Ä—ã –∫–æ–¥–∞

### –ü—Ä–æ—Å—Ç–æ–π —Ñ–∞–π–ª–æ–≤—ã–π —Å–µ—Ä–≤–µ—Ä

```go
package main

import (
    "fmt"
    "net/http"
)

func main() {
    // –û—Ç–¥–∞—ë–º —Ñ–∞–π–ª—ã –∏–∑ –ø–∞–ø–∫–∏ "static"
    fs := http.FileServer(http.Dir("static"))
    
    http.Handle("/", fs)
    
    fmt.Println("Server started at :8080")
    http.ListenAndServe(":8080", nil)
}
```

### –°—Ç–∞—Ç–∏–∫–∞ —Å –ø—Ä–µ—Ñ–∏–∫—Å–æ–º

```go
package main

import (
    "fmt"
    "net/http"
)

func main() {
    // URL: /static/style.css ‚Üí —Ñ–∞–π–ª: static/style.css
    fs := http.FileServer(http.Dir("static"))
    http.Handle("/static/", http.StripPrefix("/static/", fs))
    
    // –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞
    http.HandleFunc("/", func(w http.ResponseWriter, r *http.Request) {
        fmt.Fprint(w, `
<!DOCTYPE html>
<html>
<head>
    <link rel="stylesheet" href="/static/style.css">
</head>
<body>
    <h1>Hello!</h1>
    <script src="/static/app.js"></script>
</body>
</html>
        `)
    })
    
    http.ListenAndServe(":8080", nil)
}
```

### –û—Ç–¥–∞—á–∞ –æ–¥–Ω–æ–≥–æ —Ñ–∞–π–ª–∞

```go
package main

import (
    "fmt"
    "net/http"
)

func main() {
    http.HandleFunc("/", func(w http.ResponseWriter, r *http.Request) {
        http.ServeFile(w, r, "public/index.html")
    })
    
    http.HandleFunc("/about", func(w http.ResponseWriter, r *http.Request) {
        http.ServeFile(w, r, "public/about.html")
    })
    
    http.HandleFunc("/favicon.ico", func(w http.ResponseWriter, r *http.Request) {
        http.ServeFile(w, r, "public/favicon.ico")
    })
    
    fmt.Println("Server started at :8080")
    http.ListenAndServe(":8080", nil)
}
```

### –ö–æ–º–±–∏–Ω–∞—Ü–∏—è —Å—Ç–∞—Ç–∏–∫–∏ –∏ –¥–∏–Ω–∞–º–∏–∫–∏

```go
package main

import (
    "encoding/json"
    "fmt"
    "net/http"
)

func main() {
    // –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ñ–∞–π–ª—ã
    fs := http.FileServer(http.Dir("static"))
    http.Handle("/static/", http.StripPrefix("/static/", fs))
    
    // –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ (—Å—Ç–∞—Ç–∏—á–µ—Å–∫–∞—è)
    http.HandleFunc("/", func(w http.ResponseWriter, r *http.Request) {
        if r.URL.Path != "/" {
            http.NotFound(w, r)
            return
        }
        http.ServeFile(w, r, "static/index.html")
    })
    
    // API (–¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–µ)
    http.HandleFunc("/api/data", func(w http.ResponseWriter, r *http.Request) {
        w.Header().Set("Content-Type", "application/json")
        json.NewEncoder(w).Encode(map[string]string{
            "message": "Hello from API",
        })
    })
    
    fmt.Println("Server started at :8080")
    http.ListenAndServe(":8080", nil)
}
```

### –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—Ç–∞—Ç–∏–∫–∏

```go
package main

import (
    "net/http"
    "time"
)

func cacheMiddleware(next http.Handler) http.Handler {
    return http.HandlerFunc(func(w http.ResponseWriter, r *http.Request) {
        // –ö—ç—à –Ω–∞ 1 —á–∞—Å
        w.Header().Set("Cache-Control", "public, max-age=3600")
        w.Header().Set("Expires", time.Now().Add(time.Hour).Format(http.TimeFormat))
        next.ServeHTTP(w, r)
    })
}

func main() {
    fs := http.FileServer(http.Dir("static"))
    
    http.Handle("/static/", 
        http.StripPrefix("/static/", 
            cacheMiddleware(fs)))
    
    http.ListenAndServe(":8080", nil)
}
```

### –ó–∞—â–∏—Ç–∞ –æ—Ç directory listing

```go
package main

import (
    "net/http"
    "os"
    "path"
)

type neuteredFileSystem struct {
    fs http.FileSystem
}

func (nfs neuteredFileSystem) Open(p string) (http.File, error) {
    f, err := nfs.fs.Open(p)
    if err != nil {
        return nil, err
    }
    
    s, _ := f.Stat()
    if s.IsDir() {
        // –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞–ª–∏—á–∏–µ index.html
        index := path.Join(p, "index.html")
        if _, err := nfs.fs.Open(index); err != nil {
            closeErr := f.Close()
            if closeErr != nil {
                return nil, closeErr
            }
            return nil, os.ErrNotExist
        }
    }
    
    return f, nil
}

func main() {
    fs := neuteredFileSystem{http.Dir("static")}
    
    http.Handle("/", http.FileServer(fs))
    
    http.ListenAndServe(":8080", nil)
}
```

### –ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–æ–≤ (—Å–∫–∞—á–∏–≤–∞–Ω–∏–µ)

```go
package main

import (
    "fmt"
    "net/http"
    "path/filepath"
)

func downloadHandler(w http.ResponseWriter, r *http.Request) {
    filename := r.URL.Query().Get("file")
    if filename == "" {
        http.Error(w, "File not specified", http.StatusBadRequest)
        return
    }
    
    // –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å: —Ç–æ–ª—å–∫–æ –∏–º—è —Ñ–∞–π–ª–∞ –±–µ–∑ –ø—É—Ç–∏
    filename = filepath.Base(filename)
    filepath := filepath.Join("downloads", filename)
    
    // –ó–∞–≥–æ–ª–æ–≤–æ–∫ –¥–ª—è —Å–∫–∞—á–∏–≤–∞–Ω–∏—è
    w.Header().Set("Content-Disposition", 
        fmt.Sprintf("attachment; filename=%s", filename))
    
    http.ServeFile(w, r, filepath)
}

func main() {
    http.HandleFunc("/download", downloadHandler)
    
    http.ListenAndServe(":8080", nil)
}
```

### SPA (Single Page Application) —Ä–æ—É—Ç–∏–Ω–≥

```go
package main

import (
    "net/http"
    "os"
    "path/filepath"
)

func spaHandler(w http.ResponseWriter, r *http.Request) {
    // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏–µ —Ñ–∞–π–ª–∞
    path := filepath.Join("public", r.URL.Path)
    
    _, err := os.Stat(path)
    if os.IsNotExist(err) {
        // –§–∞–π–ª –Ω–µ –Ω–∞–π–¥–µ–Ω ‚Äî –æ—Ç–¥–∞—ë–º index.html (–¥–ª—è SPA —Ä–æ—É—Ç–∏–Ω–≥–∞)
        http.ServeFile(w, r, "public/index.html")
        return
    }
    
    // –§–∞–π–ª —Å—É—â–µ—Å—Ç–≤—É–µ—Ç ‚Äî –æ—Ç–¥–∞—ë–º –µ–≥–æ
    http.ServeFile(w, r, path)
}

func main() {
    http.HandleFunc("/", spaHandler)
    
    http.ListenAndServe(":8080", nil)
}
```

---

## ‚ö†Ô∏è –ß–∞—Å—Ç—ã–µ –æ—à–∏–±–∫–∏

### 1. –ù–µ–≤–µ—Ä–Ω—ã–π –ø—É—Ç—å –∫ –ø–∞–ø–∫–µ

```go
// ‚ùå –û—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω—ã–π –ø—É—Ç—å –º–æ–∂–µ—Ç –Ω–µ —Ä–∞–±–æ—Ç–∞—Ç—å
http.FileServer(http.Dir("./static"))

// ‚úÖ –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ç–µ–∫—É—â—É—é –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é
// –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∞–±—Å–æ–ª—é—Ç–Ω—ã–π –ø—É—Ç—å
```

### 2. Directory listing

```go
// ‚ùå –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –ø–∞–ø–∫–∏
http.FileServer(http.Dir("static"))

// ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ neuteredFileSystem –∏–ª–∏
// –¥–æ–±–∞–≤—å—Ç–µ index.html –≤ –∫–∞–∂–¥—É—é –ø–∞–ø–∫—É
```

### 3. StripPrefix –∑–∞–±—ã—Ç

```go
// ‚ùå URL /static/style.css ‚Üí —Ñ–∞–π–ª static/static/style.css
http.Handle("/static/", http.FileServer(http.Dir("static")))

// ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ StripPrefix
http.Handle("/static/", 
    http.StripPrefix("/static/", 
        http.FileServer(http.Dir("static"))))
```

---

## üìù –ü—Ä–∞–∫—Ç–∏–∫–∞

### –ó–∞–¥–∞—á–∞ 1: Static site
–°–∞–π—Ç –∏–∑ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏—Ö HTML —Ñ–∞–π–ª–æ–≤.

### –ó–∞–¥–∞—á–∞ 2: CSS/JS serving
–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —Å—Ç–∏–ª–µ–π –∏ —Å–∫—Ä–∏–ø—Ç–æ–≤.

### –ó–∞–¥–∞—á–∞ 3: Image gallery
–ì–∞–ª–µ—Ä–µ—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π.

### –ó–∞–¥–∞—á–∞ 4: File download
–°–∫–∞—á–∏–≤–∞–Ω–∏–µ —Ñ–∞–π–ª–æ–≤ —Å —Å–µ—Ä–≤–µ—Ä–∞.

### –ó–∞–¥–∞—á–∞ 5: Cache headers
–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è.

### –ó–∞–¥–∞—á–∞ 6: SPA hosting
–•–æ—Å—Ç–∏–Ω–≥ React/Vue –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.

### –ó–∞–¥–∞—á–∞ 7: Gzip compression
–°–∂–∞—Ç–∏–µ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏—Ö —Ñ–∞–π–ª–æ–≤.

### –ó–∞–¥–∞—á–∞ 8: Security headers
–î–æ–±–∞–≤–ª–µ–Ω–∏–µ security –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤.
