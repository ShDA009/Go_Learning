<!DOCTYPE html>
<html lang="ru">
<head>
    {{template "head" .}}
    <title>Go Learning ‚Äî –ò–∑—É—á–∞–π Go</title>
</head>
<body>
    {{template "header" .}}
    
    <main class="main">
        <div class="index-page">
            <section class="hero">
                <h1>–ò–∑—É—á–∞–π Go</h1>
                <p class="hero-subtitle">–°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —É—Ä–æ–∫–∏ —Å —Ç–µ–æ—Ä–∏–µ–π, –ø—Ä–∏–º–µ—Ä–∞–º–∏ –∏ –ø—Ä–∞–∫—Ç–∏–∫–æ–π</p>
                
                {{if .Stats}}
                <div class="progress-overview">
                    <div class="progress-bar-container">
                        <div class="progress-bar" style="width: {{if .Stats.TotalLessons}}{{printf "%.0f" (mulf (divf .Stats.CompletedCount .Stats.TotalLessons) 100.0)}}{{else}}0{{end}}%"></div>
                    </div>
                    <div class="progress-stats">
                        <div class="stat-card">
                            <span class="stat-value">{{.Stats.CompletedCount}}</span>
                            <span class="stat-label">–ø—Ä–æ–π–¥–µ–Ω–æ</span>
                        </div>
                        <div class="stat-card">
                            <span class="stat-value">{{.Stats.InProgressCount}}</span>
                            <span class="stat-label">–≤ –ø—Ä–æ—Ü–µ—Å—Å–µ</span>
                        </div>
                        <div class="stat-card">
                            <span class="stat-value">‚≠ê {{.Stats.EarnedPoints}}</span>
                            <span class="stat-label">–æ—á–∫–æ–≤</span>
                        </div>
                    </div>
                    {{if or .Stats.CompletedCount .Stats.InProgressCount .Stats.EarnedPoints}}
                    <div class="reset-progress-container">
                        <button class="btn btn-danger btn-sm reset-progress-btn" onclick="resetProgress()">
                            üîÑ –°–±—Ä–æ—Å–∏—Ç—å –ø—Ä–æ–≥—Ä–µ—Å—Å
                        </button>
                    </div>
                    {{end}}
                </div>
                {{end}}
            </section>

            <section class="modules">
                {{range .Modules}}
                <div class="module-card">
                    <h2 class="module-title">{{.Module.Title}}</h2>
                    <ul class="lesson-list">
                        {{$progress := $.Progress}}
                        {{range .Lessons}}
                        {{$p := index $progress .ID}}
                        <li class="lesson-item {{if $p}}{{statusClass $p.Status}}{{end}}">
                            <a href="/lessons/{{.Slug}}" class="lesson-link">
                                <span class="lesson-status">
                                    {{if $p}}{{statusIcon $p.Status}}{{else}}‚¨ú{{end}}
                                </span>
                                <span class="lesson-title">{{.Title}}</span>
                                <span class="lesson-meta">~{{.ReadingTimeMin}} –º–∏–Ω</span>
                            </a>
                        </li>
                        {{end}}
                    </ul>
                </div>
                {{else}}
                <div class="empty-state">
                    <p>–£—Ä–æ–∫–∏ –µ—â—ë –Ω–µ –∑–∞–≥—Ä—É–∂–µ–Ω—ã.</p>
                    <p>–ó–∞–ø—É—Å—Ç–∏—Ç–µ –∏–º–ø–æ—Ä—Ç: <code>go run ./cmd/ingest --db ./data.db --demo</code></p>
                </div>
                {{end}}
            </section>
        </div>
    </main>
    
    {{template "footer" .}}
    {{template "scripts" .}}
</body>
</html>
