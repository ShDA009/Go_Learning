# Вывод на консоль. Форматирование

<Meta>
reading_time: 9
</Meta>

<Overview>
- Пакет `fmt` — основной инструмент для вывода в Go
- `Println` — вывод с переносом строки и пробелами между значениями
- `Print` — вывод без переноса и пробелов
- `Printf` — форматированный вывод с шаблонами (спецификаторами)
- Спецификаторы `%v`, `%T`, `%d`, `%s`, `%f` — для разных типов данных

### Сравнение функций вывода

| Функция | Перенос строки | Пробелы между значениями | Форматирование |
|---------|----------------|-------------------------|----------------|
| `Print` | ❌ | ❌ | ❌ |
| `Println` | ✅ | ✅ | ❌ |
| `Printf` | ❌ (нужен `\n`) | ❌ | ✅ |
</Overview>

<Theory>
### Зачем нужен пакет fmt?

`fmt` (format) — главный пакет для ввода-вывода в Go. Он предоставляет:
- Вывод на консоль
- Форматирование строк
- Чтение с консоли
- Запись в файлы и другие io.Writer

### Print, Println, Printf — в чём разница?

**Print** — просто выводит значения:
```go
fmt.Print("Hello")
fmt.Print("World")
// Результат: HelloWorld (без пробела, без переноса)
```

**Println** — добавляет пробелы и перенос:
```go
fmt.Println("Hello", "World")
// Результат: Hello World\n
```

**Printf** — форматированный вывод:
```go
fmt.Printf("Имя: %s, Возраст: %d\n", "John", 25)
// Результат: Имя: John, Возраст: 25
```

### Спецификаторы формата

Спецификатор — это "плейсхолдер" для значения. Начинается с `%`:

**%v** — универсальный, подходит для любого типа:
```go
fmt.Printf("%v", 42)      // 42
fmt.Printf("%v", "hello") // hello
fmt.Printf("%v", true)    // true
```

**%T** — показывает тип:
```go
fmt.Printf("%T", 42)      // int
fmt.Printf("%T", "hello") // string
```

**%d** — десятичное целое:
```go
fmt.Printf("%d", 42)      // 42
fmt.Printf("%5d", 42)     // "   42" (ширина 5)
fmt.Printf("%05d", 42)    // "00042" (ведущие нули)
```

**%f** — число с плавающей точкой:
```go
fmt.Printf("%f", 3.14159)    // 3.141590
fmt.Printf("%.2f", 3.14159)  // 3.14 (2 знака после точки)
```

### Управляющие последовательности

- `\n` — перенос строки
- `\t` — табуляция
- `\\` — обратный слэш
- `\"` — кавычка внутри строки

```go
fmt.Printf("Строка 1\nСтрока 2")
// Строка 1
// Строка 2
```

### Sprintf — форматирование в строку

`Printf` выводит на консоль, `Sprintf` возвращает строку:

```go
s := fmt.Sprintf("Привет, %s!", name)
// s содержит строку, ничего не выводится
```

Это полезно для создания сообщений, логирования, генерации текста.

### Практический совет

Для отладки используйте `%+v` со структурами — он показывает имена полей:

```go
type User struct {
    Name string
    Age  int
}
u := User{"John", 25}

fmt.Printf("%v\n", u)   // {John 25}
fmt.Printf("%+v\n", u)  // {Name:John Age:25}
fmt.Printf("%#v\n", u)  // main.User{Name:"John", Age:25}
```
</Theory>

<Syntax>
### Основные функции вывода
```go
fmt.Print(значения...)      // без переноса
fmt.Println(значения...)    // с переносом строки
fmt.Printf(шаблон, значения...)  // форматированный вывод
```

### Основные спецификаторы

| Спецификатор | Назначение | Пример |
|--------------|------------|--------|
| `%v` | Значение по умолчанию | `42`, `true`, `hello` |
| `%+v` | Значение со структурой | `{Name:John Age:25}` |
| `%#v` | Go-синтаксис | `"hello"`, `main.User{...}` |
| `%T` | Тип переменной | `int`, `string` |
| `%t` | Boolean | `true`, `false` |
| `%d` | Десятичное целое | `42` |
| `%b` | Двоичное | `101010` |
| `%o` | Восьмеричное | `52` |
| `%x`, `%X` | Шестнадцатеричное | `2a`, `2A` |
| `%f` | Float | `3.141593` |
| `%e`, `%E` | Научная нотация | `3.14e+00` |
| `%s` | Строка | `hello` |
| `%q` | Строка в кавычках | `"hello"` |
| `%c` | Символ Unicode | `A` |
| `%p` | Указатель | `0xc0000...` |
| `%%` | Символ процента | `%` |
</Syntax>

<Examples>
кода

### Пример 1: Print vs Println
```go
package main

import "fmt"

func main() {
    // Print — без переноса и пробелов
    fmt.Print("Hello")
    fmt.Print("World")
    fmt.Print("\n")  // перенос вручную
    
    // Println — с переносом и пробелами
    fmt.Println("Hello", "World")
    
    // Вывод:
    // HelloWorld
    // Hello World
}
```

### Пример 2: Printf — базовое использование
```go
package main

import "fmt"

func main() {
    name := "Alice"
    age := 25
    height := 1.65
    
    fmt.Printf("Имя: %s\n", name)
    fmt.Printf("Возраст: %d лет\n", age)
    fmt.Printf("Рост: %.2f м\n", height)
    
    // Всё в одну строку
    fmt.Printf("%s, %d лет, рост %.2f м\n", name, age, height)
}
```

### Пример 3: Универсальный %v
```go
package main

import "fmt"

func main() {
    i := 42
    f := 3.14
    s := "hello"
    b := true
    arr := []int{1, 2, 3}
    
    // %v работает с любым типом
    fmt.Printf("int: %v\n", i)
    fmt.Printf("float: %v\n", f)
    fmt.Printf("string: %v\n", s)
    fmt.Printf("bool: %v\n", b)
    fmt.Printf("slice: %v\n", arr)
}
```

### Пример 4: Вывод типа %T
```go
package main

import "fmt"

func main() {
    a := 42
    b := 3.14
    c := "hello"
    d := true
    e := []int{1, 2, 3}
    
    fmt.Printf("a = %v (тип: %T)\n", a, a)
    fmt.Printf("b = %v (тип: %T)\n", b, b)
    fmt.Printf("c = %v (тип: %T)\n", c, c)
    fmt.Printf("d = %v (тип: %T)\n", d, d)
    fmt.Printf("e = %v (тип: %T)\n", e, e)
}
```

### Пример 5: Форматирование чисел
```go
package main

import "fmt"

func main() {
    n := 255
    
    fmt.Printf("Десятичное: %d\n", n)     // 255
    fmt.Printf("Двоичное: %b\n", n)        // 11111111
    fmt.Printf("Восьмеричное: %o\n", n)    // 377
    fmt.Printf("Hex (нижний): %x\n", n)    // ff
    fmt.Printf("Hex (верхний): %X\n", n)   // FF
    fmt.Printf("Символ: %c\n", 65)         // A
    fmt.Printf("Unicode: %U\n", 'A')       // U+0041
}
```

### Пример 6: Форматирование float
```go
package main

import "fmt"

func main() {
    pi := 3.14159265358979
    
    fmt.Printf("По умолчанию: %f\n", pi)     // 3.141593 (6 знаков)
    fmt.Printf("2 знака: %.2f\n", pi)        // 3.14
    fmt.Printf("10 знаков: %.10f\n", pi)     // 3.1415926536
    fmt.Printf("Научная: %e\n", pi)          // 3.141593e+00
    fmt.Printf("Компактно: %g\n", pi)        // 3.14159265358979
    
    big := 1234567890.123
    fmt.Printf("Большое число: %e\n", big)   // 1.234568e+09
}
```

### Пример 7: Ширина и выравнивание
```go
package main

import "fmt"

func main() {
    // Ширина поля
    fmt.Printf("|%10d|\n", 42)    // |        42| (ширина 10, справа)
    fmt.Printf("|%-10d|\n", 42)   // |42        | (ширина 10, слева)
    fmt.Printf("|%010d|\n", 42)   // |0000000042| (заполнение нулями)
    
    // Для float: ширина.точность
    fmt.Printf("|%10.2f|\n", 3.14159)   // |      3.14|
    fmt.Printf("|%-10.2f|\n", 3.14159)  // |3.14      |
    
    // Для строк
    fmt.Printf("|%10s|\n", "Go")   // |        Go|
    fmt.Printf("|%-10s|\n", "Go")  // |Go        |
}
```

### Пример 8: Строки и экранирование
```go
package main

import "fmt"

func main() {
    s := "Hello\tWorld"
    
    fmt.Printf("Обычный вывод: %s\n", s)   // Hello	World
    fmt.Printf("В кавычках: %q\n", s)       // "Hello\tWorld"
    fmt.Printf("Hex строки: %x\n", "Hi")    // 4869
    
    // Символ процента
    discount := 15
    fmt.Printf("Скидка: %d%%\n", discount)  // Скидка: 15%
}
```
</Examples>

<Pitfalls>
### 1. Забыли перенос строки в Printf
```go
// ❌ Неправильно — вывод склеится
fmt.Printf("Строка 1")
fmt.Printf("Строка 2")
// Вывод: Строка 1Строка 2

// ✅ Правильно
fmt.Printf("Строка 1\n")
fmt.Printf("Строка 2\n")
```

### 2. Несоответствие спецификатора и типа
```go
// ❌ Неправильно — %d для строки
name := "Alice"
fmt.Printf("Имя: %d\n", name)  // %!d(string=Alice)

// ✅ Правильно
fmt.Printf("Имя: %s\n", name)
// Или универсальный %v
fmt.Printf("Имя: %v\n", name)
```

### 3. Неправильное количество аргументов
```go
// ❌ Неправильно — 2 спецификатора, 1 аргумент
fmt.Printf("x=%d, y=%d\n", 10)  // x=10, y=%!d(MISSING)

// ❌ Неправильно — 1 спецификатор, 2 аргумента
fmt.Printf("x=%d\n", 10, 20)  // x=10 (20 игнорируется, но warning)

// ✅ Правильно
fmt.Printf("x=%d, y=%d\n", 10, 20)
```

### 4. Путаница %s и %v для структур
```go
type User struct {
    Name string
    Age  int
}

user := User{"Bob", 30}

// ❌ %s для структуры — не то, что ожидали
fmt.Printf("%s\n", user)  // {Bob 30} (но без имён полей)

// ✅ Лучше %v или %+v
fmt.Printf("%v\n", user)   // {Bob 30}
fmt.Printf("%+v\n", user)  // {Name:Bob Age:30}
fmt.Printf("%#v\n", user)  // main.User{Name:"Bob", Age:30}
```

### 5. Вывод процента без %%
```go
// ❌ Неправильно
fmt.Printf("Скидка: 15%\n")  // может сломаться

// ✅ Правильно
fmt.Printf("Скидка: 15%%\n")  // Скидка: 15%
```
</Pitfalls>

<Task id="1" points="10">
<Title>Задание 1: Спецификатор %d для целых чисел</Title>
<Prompt>
Используйте `fmt.Printf` со спецификатором `%d` для вывода целых чисел в разных форматах: обычный, с шириной поля, с ведущими нулями.
</Prompt>
<Hints>
- `%5d` — ширина 5, выравнивание вправо
- `%05d` — ширина 5, заполнение нулями
</Hints>
<StarterCode>
```go
package main

import "fmt"

func main() {
    n := 42
    // Выведите число в разных форматах
}
```
</StarterCode>
<ExpectedOutput>
Обычный: 42
Ширина 5: |   42|
С нулями: |00042|
</ExpectedOutput>
</Task>

<Task id="2" points="10">
<Title>Задание 2: Форматирование строк %s</Title>
<Prompt>
Выведите строки с разным выравниванием: по левому краю, по правому краю, с ограничением длины.
</Prompt>
<Hints>
- `%-10s` — влево, ширина 10
- `%10s` — вправо, ширина 10
- `%.3s` — только первые 3 символа
</Hints>
<StarterCode>
```go
package main

import "fmt"

func main() {
    s := "Hello"
    // Выведите с разным форматированием
}
```
</StarterCode>
<ExpectedOutput>
|Hello     | (лево, ширина 10)
|     Hello| (право, ширина 10)
|Hel| (первые 3 символа)
</ExpectedOutput>
</Task>

<Task id="3" points="15">
<Title>Задание 3: Форматирование вещественных чисел</Title>
<Prompt>
Выведите число π с разной точностью и в разных форматах: фиксированная точка, экспоненциальная запись.
</Prompt>
<Hints>
- `%.2f` — 2 знака после запятой
- `%e` — экспоненциальная форма
- `%g` — автоматический выбор формата
</Hints>
<StarterCode>
```go
package main

import "fmt"

func main() {
    pi := 3.141592653589793
    // Выведите с разной точностью
}
```
</StarterCode>
<ExpectedOutput>
Pi = 3.14 (2 знака)
Pi = 3.1416 (4 знака)
Pi = 3.141593e+00 (экспонента)
Pi = 3.14159 (авто, %g)
</ExpectedOutput>
</Task>

<Task id="4" points="15">
<Title>Задание 4: Спецификаторы %v, %T, %#v</Title>
<Prompt>
Используйте универсальные спецификаторы для вывода значений, типов и подробного представления.
</Prompt>
<Hints>
- `%v` — value, значение
- `%T` — type, тип
- `%#v` — Go-синтаксис (полезно для отладки)
</Hints>
<StarterCode>
```go
package main

import "fmt"

func main() {
    nums := []int{1, 2, 3}
    // Выведите с разными спецификаторами
}
```
</StarterCode>
<ExpectedOutput>
Значение: [1 2 3]
Тип: []int
Подробно: []int{1, 2, 3}
</ExpectedOutput>
</Task>

<Task id="5" points="15">
<Title>Задание 5: Sprintf для создания строк</Title>
<Prompt>
Используйте `fmt.Sprintf` для создания форматированных строк без вывода. Создайте строку с информацией о пользователе.
</Prompt>
<Hints>
- `Sprintf` возвращает строку, а не выводит
- Используйте %q для вывода строки в кавычках
</Hints>
<StarterCode>
```go
package main

import "fmt"

func main() {
    name := "Alice"
    id := 42
    active := true
    // Создайте строку через Sprintf
}
```
</StarterCode>
<ExpectedOutput>
Создана строка: "User: Alice (ID: 42, Active: true)"
Длина строки: 35
</ExpectedOutput>
</Task>
